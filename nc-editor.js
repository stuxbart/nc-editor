var nc;(()=>{"use strict";var e={1144:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(8081),n=i.n(s),o=i(3645),r=i.n(o)()(n());r.push([e.id,'*{margin:0;padding:0;box-sizing:border-box}@keyframes cursor-anim{0%{opacity:.7}100%{opacity:0}}.nc-editor{position:relative;display:grid;height:100%;max-height:100%;width:100%;max-width:100%}.nc-editor__text{position:relative;width:100%;height:100%;overflow:hidden;background-color:#242424;user-select:none}.nc-editor__gutter{grid-area:1/1/2/2;height:100%;width:100%;border-right:1px solid #949494;background-color:#242424;color:#a7a7a7;max-height:100%;overflow:hidden;user-select:none}.nc-editor__scroll-bar{overflow-y:scroll;overflow-x:hidden;background-color:#242424;height:100%;width:100%;max-height:100%}.nc-editor__selection{overflow:hidden;cursor:text}.nc-editortext__wrapper{position:relative;width:100%}.nc-editor__input{position:absolute;height:0px;width:0px;opacity:0;user-select:none;max-height:0px}.nc-scroll__scrollable{width:15px;content:"x"}.nc-selection__cursor{position:absolute;padding:0;margin:2px 0px;width:2px;height:18px;z-index:1;left:0;top:1px;opacity:1;background-color:#fff;pointer-events:none;user-select:none}.nc-selection__cursor--animated{animation-name:cursor-anim;animation-duration:1.2s;animation-iteration-count:infinite;animation-timing-function:steps(2, jump-none)}.nc-selection__range{position:absolute;padding:0;margin:0px;pointer-events:none;user-select:none;background-color:rgba(50,148,240,.2)}.nc-selection__search{position:absolute;padding:0;margin:0px;pointer-events:none;user-select:none;background-color:rgba(228,199,36,.295)}.nc-text__multi-line{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:0em 0em 0em 1em;margin:0;max-width:100%;background-color:#242424;cursor:text;color:#fff;white-space:pre}.nc-gutter__number{display:flex;justify-content:center;align-items:center}.nc-search{position:absolute;top:0px;right:15px;z-index:5;background-color:#000;width:300px;height:130px;border:1px solid #949494;border-top:0px;background-color:#242424;display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.nc-search__close{align-self:flex-end;color:#949494;background-color:#242424;border:none;padding:1em;cursor:pointer}.nc-search__input{width:80%;height:24px;color:#dadada;border:2px solid #949494;background-color:#5f5f5f;padding:.5em;font-size:14px;outline:none}.nc-search__input:focus,.nc-search__input:active{background-color:#6e6e6e}.nc-search__result{align-self:flex-start;color:#949494;padding:1em;margin-left:2em;font-size:14px}.nc-text__multi-line--hover{background-color:#2b2b2b}.nc-text__multi-line--active{background-color:#313131}.nc-format__word,.nc-format__bracket,.nc-format__square-bracket,.nc-format__brace,.nc-format__comment,.nc-format__keyword,.nc-format__space,.nc-format__string,.nc-format__semicolon,.nc-format__colon,.nc-format__comma,.nc-format__dot,.nc-format__number,.nc-format__declartion,.nc-format__type,.nc-format__const-value,.nc-format__access-modifier{white-space:pre}.nc-format__word{color:#88c4fd}.nc-format__bracket{color:#074ccc}.nc-format__square-bracket{color:#c527ca}.nc-format__brace{color:#bc06f3}.nc-format__comment{color:#008b07}.nc-format__keyword{color:#ac31d1}.nc-format__string{color:#ca4a18}.nc-format__semicolon,.nc-format__colon{color:#f0f0f0}.nc-format__operator{color:#f0f0f0}.nc-format__comma,.nc-format__dot{color:#f0f0f0}.nc-format__number{color:#3abd7f}.nc-format__const-value,.nc-format__access-modifier,.nc-format__declaration{color:#396cca}.nc-format__type{color:#22ad78}',""]);const l=r},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(s)for(var l=0;l<this.length;l++){var h=this[l][0];null!=h&&(r[h]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);s&&r[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},8081:e=>{e.exports=function(e){return e[1]}},7187:e=>{var t,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,s){function n(i){e.removeListener(t,o),s(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),i([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function a(e,t,i,s){var n,o,r,a;if(l(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),r=o[t]),void 0===r)r=o[t]=i,++e._eventsCount;else if("function"==typeof r?r=o[t]=s?[i,r]:[r,i]:s?r.unshift(i):r.push(i),(n=h(e))>0&&r.length>n&&!r.warned){r.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=r.length,a=c,console&&console.warn&&console.warn(a)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=c.bind(s);return n.listener=i,s.wrapFn=n,n}function _(e,t,i){var s=e._events;if(void 0===s)return[];var n=s[t];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(n):f(n,n.length)}function d(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function m(e,t,i,s){if("function"==typeof e.on)s.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){s.once&&e.removeEventListener(t,n),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var l=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw l.context=r,l}var h=o[e];if(void 0===h)return!1;if("function"==typeof h)s(h,this,t);else{var a=h.length,c=f(h,a);for(i=0;i<a;++i)s(c[i],this,t)}return!0},o.prototype.addListener=function(e,t){return a(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return a(this,e,t,!0)},o.prototype.once=function(e,t){return l(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,s,n,o,r;if(l(t),void 0===(s=this._events))return this;if(void 0===(i=s[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){r=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,n),1===i.length&&(s[e]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",e,r||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var n,o=Object.keys(i);for(s=0;s<o.length;++s)"removeListener"!==(n=o[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},o.prototype.listeners=function(e){return _(this,e,!0)},o.prototype.rawListeners=function(e){return _(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2545:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var s=i(3379),n=i.n(s),o=i(7795),r=i.n(o),l=i(569),h=i.n(l),a=i(3565),c=i.n(a),u=i(9216),_=i.n(u),d=i(4589),f=i.n(d),m=i(1144),p={};p.styleTagTransform=f(),p.setAttributes=c(),p.insert=h().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=_(),n()(m.Z,p);const g=m.Z&&m.Z.locals?m.Z.locals:void 0},3379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var o={},r=[],l=0;l<e.length;l++){var h=e[l],a=s.base?h[0]+s.base:h[0],c=o[a]||0,u="".concat(a," ").concat(c);o[a]=c+1;var _=i(u),d={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==_)t[_].references++,t[_].updater(d);else{var f=n(d,s);s.byIndex=l,t.splice(l,0,{identifier:u,updater:f,references:1})}r.push(u)}return r}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var o=s(e=e||[],n=n||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var l=i(o[r]);t[l].references--}for(var h=s(e,n),a=0;a<o.length;a++){var c=i(o[a]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=h}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1824:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e=""){this.left=null,this.right=null,this.parent=null,this.text="",this.leftSubTreeSize=0,this.height=1,this.text=e}}},6907:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(1824)),o=i(6090);t.default=class{constructor(e){this._rootNode=null,this._linesCount=0,this.insert(e,0,0)}insert(e,t,i){if(0===e.length&&null!==this._rootNode)return[0,0];if(null===this._rootNode){const e=new n.default("");this._rootNode=this._insertLine(this._rootNode,e,0)}const s=this._getNodeByLineNumber(this._rootNode,t);if(null===s)return[0,0];const o=e.split(/\r?\n|\r/g);if(1===o.length)s.text=s.text.slice(0,i)+e+s.text.slice(i);else{const e=s.text.slice(i);s.text=s.text.slice(0,i)+o[0];let r=null;for(let e=1;e<o.length;e++){const i=o[e];r=new n.default(i),this._rootNode=this._insertLine(this._rootNode,r,t+e)}null!==r&&(r.text+=e)}return[o.length-1,o[o.length-1].length]}remove(e){const t=this._getNodeByLineNumber(this._rootNode,e.start.line);if(null===t)return"";if(e.start.line===e.end.line){const i=t.text.slice(e.start.offset,e.end.offset);return t.text=t.text.slice(0,e.start.offset)+t.text.slice(e.end.offset),i}let i=t.text.slice(e.start.offset);t.text=t.text.slice(0,e.start.offset);const s=e.end.line-e.start.line-1;for(let t=0;t<s;t++){const t=this._getNodeByLineNumber(this._rootNode,e.start.line+1);if(null===t)return i;i+="\n"+t.text,this._rootNode=this._removeLine(this._rootNode,e.start.line+1)}const n=this._getNodeByLineNumber(this._rootNode,e.start.line+1);return null===n||(i+="\n"+n.text.slice(0,e.end.offset),t.text+=n.text.slice(e.end.offset),this._rootNode=this._removeLine(this._rootNode,e.start.line+1)),i}get linesCount(){return this._linesCount}get text(){return this._getNodeText(this._rootNode)}getText(e=null){if(null===e)return this.text;const t=this._getNodeByLineNumber(this._rootNode,e.start.line);if(null===t)return"";if(e.start.line===e.end.line)return t.text.substring(e.start.offset,e.end.offset);let i=t.text.substring(e.start.offset),s=t;const n=e.end.line-e.start.line-1;for(let e=0;e<n;e++){if(s=this._getNextLine(s),null===s)return i;i+="\n"+s.text}const o=this._getNextLine(s);return null===o||(i+="\n"+o.text.substring(0,e.end.offset)),i}getLines(e,t){const i=[];return this._getLines(this._rootNode,e,t,i),i}getLineNodes(e,t){const i=[];let s=this._getNodeByLineNumber(this._rootNode,e);for(;null!==s&&i.length<t;)i.push(s),s=this._getNextLine(s);return i}getLineNode(e){return this._getNodeByLineNumber(this._rootNode,e)}getLine(e){var t,i;return null!==(i=null===(t=this._getNodeByLineNumber(this._rootNode,e))||void 0===t?void 0:t.text)&&void 0!==i?i:""}getFirstLine(){var e,t;return null!==(t=null===(e=this._getFirstLine(this._rootNode))||void 0===e?void 0:e.text)&&void 0!==t?t:""}getLastLine(){var e,t;return null!==(t=null===(e=this._getLastLine(this._rootNode))||void 0===e?void 0:e.text)&&void 0!==t?t:""}getFirstLineNode(){return this._getFirstLine(this._rootNode)}getLastLineNode(){return this._getLastLine(this._rootNode)}removeLine(e){this._rootNode=this._removeLine(this._rootNode,e)}insertLineAfter(e,t){const i=new n.default(e);this._rootNode=this._insertLine(this._rootNode,i,t+1)}insertLineBefore(e,t){const i=new n.default(e);this._rootNode=this._insertLine(this._rootNode,i,t)}swapLineWithNext(e){const t=this._getNodeByLineNumber(this._rootNode,e);if(null===t)return;const i=this._getNextLine(t);if(null===i)return;const s=i.text;i.text=t.text,t.text=s}swapLineWithPrevious(e){return this.swapLineWithNext(e-1)}_removeLine(e,t){var i,s;if(null===e)return e;if(t<e.leftSubTreeSize)e.left=this._removeLine(e.left,t),e.leftSubTreeSize-=1;else if(t>e.leftSubTreeSize)e.right=this._removeLine(e.right,t-e.leftSubTreeSize-1);else if(null===e.left||null===e.right){let t=null;t=t===e.left?e.right:e.left,null===t?(t=e,e=null):(t.parent=e.parent,e=t),this._linesCount-=1}else{const t=this._getFirstLine(e.right);e.text=null!==(i=null==t?void 0:t.text)&&void 0!==i?i:"",e.right=this._removeLine(e.right,null!==(s=null==t?void 0:t.leftSubTreeSize)&&void 0!==s?s:0)}if(null===e)return e;e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1;const n=this._getBalanceFactor(e);return n>1&&this._getBalanceFactor(e.left)>=0?this._rotateRight(e):n>1&&this._getBalanceFactor(e.left)<0?(e.left&&(e.left=this._rotateLeft(e.left)),this._rotateRight(e)):n<-1&&this._getBalanceFactor(e.right)<=0?this._rotateLeft(e):n<-1&&this._getBalanceFactor(e.right)>0?(e.right&&(e.right=this._rotateRight(e.right)),this._rotateLeft(e)):e}_getLines(e,t,i,s){if(null===e)return;let n=this._getNodeByLineNumber(e,t);for(;null!==n&&s.length<i;)s.push(n.text),n=this._getNextLine(n)}_getNextLine(e){if(null!=e.right)return this._getFirstLine(e.right);let t=e.parent;for(;null!==t&&e===t.right;)e=t,t=t.parent;return t}_getFirstLine(e){if(null===e)return null;let t=e;for(;null!==t.left;)t=t.left;return t}_getLastLine(e){if(null===e)return null;let t=e;for(;null!=t.right;)t=t.right;return t}_getNodeByLineNumber(e,t){return null===e||t===e.leftSubTreeSize?e:t<e.leftSubTreeSize?this._getNodeByLineNumber(e.left,t):this._getNodeByLineNumber(e.right,t-e.leftSubTreeSize-1)}_getNodeText(e){if(null===e)return"";let t="";return null!==e.left&&(t+=this._getNodeText(e.left)+"\n"),t+=e.text,null!==e.right&&(t+="\n"+this._getNodeText(e.right)),t}_insertLine(e,t,i){var s,n,r,l;if(null===e)return this._linesCount+=1,t;i<=e.leftSubTreeSize?(e.left=this._insertLine(e.left,t,i),e.left.parent=e,e.leftSubTreeSize+=1):(e.right=this._insertLine(e.right,t,i-e.leftSubTreeSize-1),e.right.parent=e),e.height=1+Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right));const h=this._getBalanceFactor(e);return h>1&&i<(null!==(n=null===(s=e.left)||void 0===s?void 0:s.leftSubTreeSize)&&void 0!==n?n:0)?this._rotateRight(e):h<-1&&i-e.leftSubTreeSize-1>(null!==(l=null===(r=e.right)||void 0===r?void 0:r.leftSubTreeSize)&&void 0!==l?l:0)?this._rotateLeft(e):h>1&&e.left&&i>e.left.leftSubTreeSize?(e.left=this._rotateLeft(e.left),this._rotateRight(e)):h<-1&&e.right&&i-e.leftSubTreeSize-1<e.right.leftSubTreeSize?(e.right=this._rotateRight(e.right),this._rotateLeft(e)):e}_getBalanceFactor(e){return null===e?0:(0,o.nodeHeight)(e.left)-(0,o.nodeHeight)(e.right)}_rotateLeft(e){const t=e.right;if(null===t)return e;const i=t.left;return t.left=e,e.right=i,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,t.leftSubTreeSize=t.leftSubTreeSize+e.leftSubTreeSize+1,t.parent=e.parent,e.parent=t,null!==i&&(i.parent=e),t}_rotateRight(e){const t=e.left;if(null===t)return e;const i=t.right;return t.right=e,e.left=i,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,e.leftSubTreeSize=e.leftSubTreeSize-t.leftSubTreeSize-1,t.parent=e.parent,e.parent=t,null!==i&&(i.parent=e),t}}},1117:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Line=t.Document=void 0;const n=s(i(6907));t.Document=n.default;const o=s(i(2313));t.Line=o.default},2313:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,s=[]){this.rawText="",this.tokens=[],this.lineBreaks=[],this.searchResults=[],this.rawText=e,this.tokens=t,this.lineBreaks=i,this.searchResults=s}}},6090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHeight=void 0,t.nodeHeight=e=>null===e?0:e.height},3032:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(2197),o=i(4576),r=s(i(9895)),l=s(i(700)),h=s(i(6165));t.default=class{constructor(e,t=null,i=null,s=null,a=null,c=null){this._document=e,this._tokenizerData=null===t?new h.default:t,this._selections=null===i?new l.default(e):i,this._mode=null===s?n.MODES.default:s,this._searchResults=null===a?new r.default:a,this._search=null===c?new o.NaiveSearch:c}get document(){return this._document}get tokenizerData(){return this._tokenizerData}get selections(){return this._selections}get mode(){return this._mode}set mode(e){this._mode=e}get searchResults(){return this._searchResults}get search(){return this._search}}},9144:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(1117),o=s(i(6907)),r=i(7183),l=i(2197),h=i(6729),a=i(6924),c=i(2528),u=i(8593),_=s(i(3032)),d=i(2781);class f extends r.EventEmitter{constructor(){super(),this._currentSessionId="",this._sessions={},this._hasActiveSession=!1,this._tokenizeAfterEdit=!0,this._searchAfterEdit=!0,this._shouldEmitEditEvent=!0,this._shouldEmitLinesCountChangeEvent=!0,this._shouldUpdateSelections=!0,this._views=[],this._currentSessionId="default";const e=new o.default("");this._sessions[this._currentSessionId]=new _.default(e)}get _session(){if(!(this._currentSessionId in this._sessions))throw new Error("Session doesn't exist.");return this._sessions[this._currentSessionId]}get _currentDocument(){return this._session.document}get _selections(){return this._session.selections}get _tokenizer(){return this._session.mode.tokenizer}get _search(){return this._session.search}setMode(e){if(!(e in l.MODES))throw new Error("Mode with given name doesn't exist.");this._session.mode=l.MODES[e]}getHighlighterSchema(){return this._session.mode.schema}insert(e){const t=this._currentDocument,i=this._session.selections.getSelections();for(const e of i){if(e.isCollapsed)continue;const i=t.remove(e).split("\n");this._updateLinesTokens(e.start.line),this._updateLinesSearchResults(e.start.line),this._emitLinesCountChanged(e.end.line-e.start.line),this._updateSelctions(e.start.line,e.start.offset,1-i.length,-(e.end.offset-e.start.offset))}for(const s of i){const i=s.start.line,n=s.start.offset,o=t.insert(e,i,n);this._updateLinesTokens(i),this._updateLinesSearchResults(i),this._updateSelctions(i,n,o[0],o[1])}this._emitLinesCountChanged(1),this._emitEditEvent()}remove(e=0){const t=this._currentDocument,i=this._session.selections.getSelections();let s="";for(const n of i){if(n.isCollapsed){if(0===n.start.offset&&0===e){if(0===n.start.line)continue;{n.start.line-=1;const e=t.getLine(n.start.line);n.start.offset=e.length+1}}if(1===e){const e=t.getLine(n.start.line);n.end.offset===e.length&&n.end.line+1!==t.linesCount?(n.end.offset=0,n.end.line+=1):n.end.offset=n.end.offset+1}else n.start.offset=n.start.offset-1}const i=t.remove(n),o=i.split("\n");this._updateLinesTokens(n.start.line),this._updateLinesSearchResults(n.start.line),this._emitLinesCountChanged(n.end.line-n.start.line),this._updateSelctions(n.start.line,n.start.offset,1-o.length,-(n.end.offset-n.start.offset)),s+=i}return this._emitEditEvent(),s}removeWordBefore(){const e=this._currentDocument;for(const t of this._selections.getSelections()){if(!t.isCollapsed)continue;const i=e.getLine(t.start.line),s=(0,a.getWordBefore)(i,t.start.offset);t.start.offset-=s.length}return this.remove()}removeWordAfter(){const e=this._currentDocument;for(const t of this._selections.getSelections()){if(!t.isCollapsed)continue;const i=e.getLine(t.start.line),s=(0,a.getWordAfter)(i,t.start.offset);t.end.offset+=s.length}return this.remove(1)}cut(){const e=this.remove();navigator.clipboard.writeText(e)}copy(){const e=this._currentDocument,t=this._selections.getSelections();let i="";for(const s of t)s.isCollapsed||(i+=e.getText(s));navigator.clipboard.writeText(i)}addDocument(e,t=null,i="default"){if(null===t)do{t=(0,u.randomString)()}while(t in this._sessions);if(t in this._sessions)throw new Error("A session for file with the given name already exists.");const s=new _.default(e);return this._sessions[t]=s,this._currentSessionId=t,this._hasActiveSession=!0,this.setMode(i),this._tokenizeAfterEdit&&this.tokenize(),this.emit(d.EvDocument.Set,void 0),this._emitLinesCountChanged(1/0),this._currentSessionId}changeSession(e){if(!(e in this._sessions))throw new Error("Session with given id doesn't exist.");return this._currentSessionId=e,this._hasActiveSession=!0,this.emit(d.EvDocument.Set,void 0),this._emitLinesCountChanged(1/0),this._emitEditEvent(),this._emitSelectionChangedEvent(),this._currentSessionId}deleteSession(e){if(!(e in this._sessions))throw new Error("Session with given id doesn't exist.");const t={};return Object.keys(this._sessions).forEach((i=>{i!==e&&(t[i]=this._sessions[i])})),this._sessions=t,e!==this._currentSessionId||(0===Object.keys(t).length?(this._hasActiveSession=!1,this._currentSessionId=""):this._currentSessionId=Object.keys(t)[0]),this._currentSessionId}get hasActiveSession(){return this._hasActiveSession}getText(){return this._currentDocument.getText()}getTotalLinesCount(){return this._currentDocument.linesCount}getLines(e,t){const i=this._currentDocument,s=this._session.tokenizerData,n=this._session.searchResults,o=i.getLineNodes(e,t),r=[];for(const e of o)r.push({rawText:e.text,tokens:s.getLineTokens(e),lineBreaks:[],searchResults:n.getLineResutls(e).matches});return r}getFirstLine(){const e=this._currentDocument,t=this._session.tokenizerData,i=e.getFirstLineNode();return null===i?null:new n.Line(i.text,t.getLineTokens(i),[])}getLastLine(){const e=this._currentDocument,t=this._session.tokenizerData,i=e.getLastLineNode();return null===i?null:new n.Line(i.text,t.getLineTokens(i),[])}tokenize(){const e=this._currentDocument;this._tokenizer.tokenize(e,this._session.tokenizerData),this.emit(d.EvTokenizer.Finished,void 0)}search(e){const t=this._currentDocument;this._search.search(e,t,this._session.searchResults),this.emit(d.EvSearch.Finished,void 0)}getSelctions(){return this._selections.getSelections()}setSelection(e){this._selections.setSelection(e),this._emitSelectionChangedEvent()}addSelection(e){this._selections.addSelection(e),this._emitSelectionChangedEvent()}extendLastSelection(e){this._selections.extendLastSelection(e),this._emitSelectionChangedEvent()}selectAll(){this._selections.selectAll(),this._emitSelectionChangedEvent()}collapseSelectionToLeft(){this._selections.collapseSelectionToLeft(),this._emitSelectionChangedEvent()}collapseSelectionToRight(){this._selections.collapseSelectionToRight(),this._emitSelectionChangedEvent()}collapseSelectionToTop(){this._selections.collapseSelectionToTop(),this._emitSelectionChangedEvent()}collapseSelectionToBottom(){this._selections.collapseSelectionToBottom(),this._emitSelectionChangedEvent()}collapseSelectionToHome(){this._selections.collapseSelectionToHome(),this._emitSelectionChangedEvent()}collapseSelectionToEnd(){this._selections.collapseSelectionToEnd(),this._emitSelectionChangedEvent()}selectWordBefore(){this._selections.selectWordBefore(),this._emitSelectionChangedEvent()}selectWordAfter(){this._selections.selectWordAfter(),this._emitSelectionChangedEvent()}selectWordAt(e,t){this._selections.selectWordAt(e,t),this._emitSelectionChangedEvent()}selectStartOfTheLine(){this._selections.selectStartOfTheLine(),this._emitSelectionChangedEvent()}selectEndOfTheLine(){this._selections.selectEndOfTheLine(),this._emitSelectionChangedEvent()}moveSelectionWordBefore(){this._selections.moveSelectionWordBefore(),this._emitSelectionChangedEvent()}moveSelectionWordAfter(){this._selections.moveSelectionWordAfter(),this._emitSelectionChangedEvent()}swapLinesUp(){if(1!==this._selections.length)return;const e=this._currentDocument,t=this._selections.getSelections()[0];if(0===t.start.line)return;let i=t.start.line;for(;i<t.end.line+1;)e.swapLineWithPrevious(i),i++;this._updateLinesTokens(t.start.line-1),t.start.line-=1,t.end.line-=1,this._emitSelectionChangedEvent(),this._emitEditEvent()}swapLinesDown(){if(1!==this._selections.length)return;const e=this._currentDocument,t=this._selections.getSelections()[0];if(t.end.line===e.linesCount-1)return;let i=t.end.line;for(;i>t.start.line-1;)e.swapLineWithNext(i),i--;this._updateLinesTokens(t.start.line),t.start.line+=1,t.end.line+=1,this._emitSelectionChangedEvent(),this._emitEditEvent()}addView(e){this._views.push(e),e.on(c.EvView.Initialized,(()=>{this._emitInitEvents()}))}enableTokenization(){this._tokenizeAfterEdit=!0}disableTokenization(){this._tokenizeAfterEdit=!1}enableEditEvent(){this._shouldEmitEditEvent=!0}disableEditEvent(){this._shouldEmitEditEvent=!1}enableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!0}disableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!1}enableSelectionsUpdates(){this._selections.enableUpdatingSelections(),this._shouldUpdateSelections=!0}disableSelectionsUpdates(){this._selections.disableUpdatingSelections(),this._shouldUpdateSelections=!1}getActiveLinesNumbers(e=0,t=1/0){return this._selections.getActiveLinesNumbers(e,t)}getSelectedLinesCount(){return this._selections.getSelectedLinesCount()}indentSelectedLines(e="\t"){const t=this._currentDocument,i=this._selections.getActiveLinesNumbers();if(!(i.size<2)){for(const s of i)t.insert(e,s,0),this._updateLinesTokens(s),this._updateSelctions(s,0,0,1);this._emitEditEvent()}}removeIndentFromSelectedLines(e="\t"){const t=this._currentDocument,i=this._selections.getActiveLinesNumbers();for(const s of i)t.getLine(s).startsWith(e)&&(t.remove(new h.Range(s,0,s,e.length)),this._updateLinesTokens(s),this._updateSelctions(s,0,0,1));this._emitEditEvent()}extendRectangleSelection(e){this._selections.extendRectangleSelection(e),this._emitSelectionChangedEvent()}getSearchPhrase(){return this._session.searchResults.phrase}getSearchMatchCount(){return this._session.searchResults.matchCount}_updateSelctions(e,t,i,s){this._selections.update(e,t,i,s),this._emitSelectionChangedEvent()}_updateLinesTokens(e){if(this._tokenizeAfterEdit){const t=this._currentDocument,i=this._session.tokenizerData;this._tokenizer.updateTokens(t,i,e)}}_updateLinesSearchResults(e){if(this._searchAfterEdit){const t=this._currentDocument,i=this._session.searchResults;this._search.updateSearchResults(t,i,e)}}_emitEditEvent(){this._shouldEmitEditEvent&&this.emit(d.EvDocument.Edited,void 0)}_emitLinesCountChanged(e){if(this._shouldEmitLinesCountChangeEvent&&0!==e){const e=this._currentDocument;this.emit(d.EvDocument.LinesCount,{linesCount:e.linesCount})}}_emitSelectionChangedEvent(){this.emit(d.EvSelection.Changed,void 0)}_emitInitEvents(){const e=this._currentDocument;this.emit(d.EvSelection.Changed,void 0),this.emit(d.EvDocument.Set,void 0),this.emit(d.EvDocument.LinesCount,{linesCount:e.linesCount}),this.emit(d.EvTokenizer.Finished,void 0)}}t.default=f},2781:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.EvSearch=t.EvSelection=t.EvDocument=t.EvTokenizer=void 0,(t.EvTokenizer||(t.EvTokenizer={})).Finished="tokenizer.Tokenized",(i=t.EvDocument||(t.EvDocument={})).Set="editor.Document.Set",i.Edited="editor.Document.Edit",i.LinesCount="editor.Document.LinesCount",(t.EvSelection||(t.EvSelection={})).Changed="editor.Selection.Changed",(t.EvSearch||(t.EvSearch={})).Finished="editor.Search.Finished"},7708:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=void 0;const n=s(i(9144));t.Editor=n.default},2957:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;const s=i(7187);t.EventEmitter=class{constructor(){this._emitter=new s.EventEmitter}on(e,t){this._emitter.on(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}}},7183:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;const s=i(2957);Object.defineProperty(t,"EventEmitter",{enumerable:!0,get:function(){return s.EventEmitter}})},7683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this._tokenizer=e,this._highlighterSchema=t}get schema(){return this._highlighterSchema}get tokenizer(){return this._tokenizer}}},252:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSMode=t.JSTokenizer=void 0;const n=s(i(7683)),o=s(i(1638));t.JSTokenizer=o.default;const r=i(4841),l=new n.default(new o.default,r.JSHighlighterSchema);t.JSMode=l},1638:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6924),n=i(4841),o=i(9042),r=i(6165);class l extends o.Tokenizer{constructor(){super(...arguments),this.KEYWORDS=["abstract","await","break","case","catch","continue","debugger","default","do","else","enum","export","extends","finally","for","from","function","goto","if","implements","import","in","package","return","switch","throw","try","while","with","yield"],this.ACCESS_MODIFIRES=["public","private","protected","static"],this.LITERALS=["true","false","null","void","this","constructor","Infinity","super","NaN","undefined"],this.DEC_KEYWORDS=["let","const","var","type","interface","class","delete","new","interface","instanceof","typeof"],this.BASE_TYPES=["Array","Date","Math","Number","Object","String"]}tokenize(e,t){let i=e.getFirstLineNode(),s=1,n={scope:""};for(;null!==i;){const o=this._makeLineData(i,n);t.data.set(i,o),n=o.state,i=e.getLineNode(s),s++}}updateTokens(e,t,i){var s,n;let o,l,h,a,c=i;do{if(o=e.getLineNode(i-1),l=null===o?{scope:""}:null!==(n=null===(s=t.data.get(o))||void 0===s?void 0:s.state)&&void 0!==n?n:{scope:""},o=e.getLineNode(c),null===o)break;a=t.data.get(o),h=this._makeLineData(o,l),t.data.set(o,h),c++}while(!a||!(0,r.compareLineData)(a,h))}_makeLineData(e,t){if(0===e.text.length)return{tokens:[],state:Object.assign({},t),length:0};const i=[],o=(0,s.removeAccents)(e.text);let r=0;for(;r<o.length;){const e=r;for(;r<o.length&&(0,s.isWhiteSpaceChar)(o[r]);)r++;if(r!=e&&i.push({type:n.JSTokens.WHITE_SPACE,startIndex:e}),r===o.length)break;switch(o[r]){case"(":i.push({type:n.JSTokens.OPEN_BRACKET,startIndex:r}),r++;break;case")":i.push({type:n.JSTokens.CLOSE_BRACKET,startIndex:r}),r++;break;case"{":i.push({type:n.JSTokens.OPEN_BRACE,startIndex:r}),r++;break;case"}":i.push({type:n.JSTokens.CLOSE_BRACE,startIndex:r}),r++;break;case"[":i.push({type:n.JSTokens.OPEN_SQUARE_BRACKET,startIndex:r}),r++;break;case"]":i.push({type:n.JSTokens.CLOSE_SQUARE_BRACKET,startIndex:r}),r++;break;case":":i.push({type:n.JSTokens.COLON,startIndex:r}),r++;break;case";":i.push({type:n.JSTokens.SEMICOLON,startIndex:r}),r++;break;case".":i.push({type:n.JSTokens.DOT,startIndex:r}),r++;break;case",":i.push({type:n.JSTokens.COMMA,startIndex:r}),r++;break;case"+":case"-":case"*":case"=":case"!":case"&":case"|":case"<":case">":case"?":i.push({type:n.JSTokens.OPERATOR,startIndex:r}),r++;break;case"/":if(r+1<o.length&&"/"===o[r+1])return i.push({type:n.JSTokens.COMMENT,startIndex:r}),{tokens:i,state:{scope:""},length:o.length};i.push({type:n.JSTokens.OPERATOR,startIndex:r}),r++;break;case"'":{const e=r;for(r++;r<o.length&&"'"!==o[r];)r++;i.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}case'"':{const e=r;for(r++;r<o.length&&'"'!==o[r];)r++;i.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}case"`":{const e=r;for(r++;r<o.length&&"`"!==o[r];)r++;i.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}default:{let e="";if((0,s.isAlpha)(o[r])){const t=r;for(;r<o.length&&(0,s.isAlphaNumeric)(o[r]);)e+=o[r],r++;this._isWordInList(e,this.KEYWORDS)?i.push({type:n.JSTokens.KEYWORD,startIndex:t}):this._isWordInList(e,this.DEC_KEYWORDS)?i.push({type:n.JSTokens.DEC_KEYWORD,startIndex:t}):this._isWordInList(e,this.BASE_TYPES)?i.push({type:n.JSTokens.TYPE,startIndex:t}):this._isWordInList(e,this.LITERALS)?i.push({type:n.JSTokens.CONST_VALUE,startIndex:t}):this._isWordInList(e,this.ACCESS_MODIFIRES)?i.push({type:n.JSTokens.ACCESS_MODIFIER,startIndex:t}):i.push({type:n.JSTokens.IDENTIFIER,startIndex:t})}else if((0,s.isNumeric)(o[r]))for(i.push({type:n.JSTokens.NUMBER,startIndex:r});(0,s.isNumeric)(o[++r]););else i.push({type:n.JSTokens.UNKNOWN,startIndex:r}),r++}}}return{tokens:i,state:{scope:""},length:o.length}}_isWordInList(e,t){if(1===e.length)return!1;for(const i of t)if(i.includes(e)&&i.length===e.length)return!0;return!1}}t.default=l},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JSHighlighterSchema=t.JSTokens=void 0,t.JSTokens={BOOLEAN:0,OPERATOR:1,ARROW:2,COMMENT:3,COMMA:4,DOT:5,COLON:6,SEMICOLON:7,IDENTIFIER:8,OPEN_BRACE:9,CLOSE_BRACE:10,OPEN_BRACKET:11,CLOSE_BRACKET:12,OPEN_SQUARE_BRACKET:13,CLOSE_SQUARE_BRACKET:14,NUMBER:15,STRING_LITERAL:16,UNKNOWN:17,KEYWORD:18,TYPE:19,DEC_KEYWORD:20,WHITE_SPACE:21,CONST_VALUE:22,ACCESS_MODIFIER:23},t.JSHighlighterSchema={[t.JSTokens.BOOLEAN]:"nc-format__word",[t.JSTokens.OPERATOR]:"nc-format__operator",[t.JSTokens.ARROW]:"nc-format__arrow",[t.JSTokens.COMMENT]:"nc-format__comment",[t.JSTokens.COMMA]:"nc-format__comma",[t.JSTokens.DOT]:"nc-format__dot",[t.JSTokens.COLON]:"nc-format__colon",[t.JSTokens.SEMICOLON]:"nc-format__semicolon",[t.JSTokens.IDENTIFIER]:"nc-format__word",[t.JSTokens.OPEN_BRACE]:"nc-format__brace",[t.JSTokens.CLOSE_BRACE]:"nc-format__brace",[t.JSTokens.OPEN_BRACKET]:"nc-format__bracket",[t.JSTokens.CLOSE_BRACKET]:"nc-format__bracket",[t.JSTokens.OPEN_SQUARE_BRACKET]:"nc-format__bracket",[t.JSTokens.CLOSE_SQUARE_BRACKET]:"nc-format__bracket",[t.JSTokens.NUMBER]:"nc-format__number",[t.JSTokens.STRING_LITERAL]:"nc-format__string",[t.JSTokens.UNKNOWN]:"nc-format__unknown",[t.JSTokens.KEYWORD]:"nc-format__keyword",[t.JSTokens.TYPE]:"nc-format__type",[t.JSTokens.DEC_KEYWORD]:"nc-format__declaration",[t.JSTokens.WHITE_SPACE]:"nc-format__space",[t.JSTokens.CONST_VALUE]:"nc-format__const-value",[t.JSTokens.ACCESS_MODIFIER]:"nc-format__access-modifier"}},5520:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextMode=t.TextTokenizer=void 0;const n=s(i(7683)),o=s(i(5994));t.TextTokenizer=o.default;const r=i(2518),l=new n.default(new o.default,r.TextHighlighterSchema);t.TextMode=l},5994:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6924),n=i(2518),o=i(9042),r=i(6165);class l extends o.Tokenizer{tokenize(e,t){let i=e.getFirstLineNode(),s=1,n={scope:""};for(;null!==i;){const o=this._makeLineData(i,n);t.data.set(i,o),n=o.state,i=e.getLineNode(s),s++}}updateTokens(e,t,i){var s,n;let o,l,h,a,c=i;do{if(o=e.getLineNode(i-1),l=null===o?{scope:""}:null!==(n=null===(s=t.data.get(o))||void 0===s?void 0:s.state)&&void 0!==n?n:{scope:""},o=e.getLineNode(c),null===o)break;a=t.data.get(o),h=this._makeLineData(o,l),t.data.set(o,h),c++}while(!a||!(0,r.compareLineData)(a,h))}_makeLineData(e,t){if(0===e.text.length)return{tokens:[],state:Object.assign({},t),length:0};const i=[],o=(0,s.removeAccents)(e.text);let r=0;for(;r<o.length;){let e=r;for(;r<o.length&&this._isWhiteSpaceChar(o[r]);)r++;for(r!=e&&i.push({type:n.TextTokens.WHITE_SPACE,startIndex:e}),e=r;r<o.length&&!this._isWhiteSpaceChar(o[r]);)r++;r!=e&&i.push({type:n.TextTokens.WORD,startIndex:e})}return{tokens:i,state:{scope:""},length:o.length}}_isWhiteSpaceChar(e){return" "===e||"\t"===e}}t.default=l},2518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlighterSchema=t.TextTokens=void 0,t.TextTokens={WORD:0,WHITE_SPACE:1},t.TextHighlighterSchema={[t.TextTokens.WORD]:"nc-format__word",[t.TextTokens.WHITE_SPACE]:"nc-format__space"}},2197:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MODES=void 0;const s=i(252),n=i(5520);t.MODES={JavaScript:s.JSMode,Text:n.TextMode,default:n.TextMode}},4576:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NaiveSearch=t.SerachResults=t.Search=void 0;const n=s(i(9895));t.SerachResults=n.default;const o=i(9758);Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return o.Search}});const r=s(i(7297));t.NaiveSearch=r.default},7297:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(9758);class n extends s.Search{search(e,t,i){i.clearResults();let s=t.getFirstLineNode(),n=1,o=0;for(;null!==s;){const r=this._searchInLine(e,s.text);o+=r.count,i.results.set(s,r),s=t.getLineNode(n),n++}i.matchCount=o,i.phrase=e}updateSearchResults(e,t,i){const s=e.getLineNode(i);if(null===s)return;const n=t.results.get(s);n&&(t.matchCount-=n.count,t.results.delete(s));const o=this._searchInLine(t.phrase,s.text);t.matchCount+=o.count,t.results.set(s,o)}_searchInLine(e,t){if(e.length<1)return{matches:[],count:0};const i=[];let s=0,n=0;for(;(s=t.indexOf(e,n))>-1;)i.push(s),n=s+e.length;return{matches:i,count:i.length}}}t.default=n},9895:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._totalResults=0,this._searchPhrase="",this._results=new WeakMap}get results(){return this._results}get matchCount(){return this._totalResults}set matchCount(e){this._totalResults=e}getLineResutls(e){const t=this._results.get(e);return void 0!==t?t:{matches:[],count:0}}clearResults(){this._results=new WeakMap}get phrase(){return this._searchPhrase}set phrase(e){this._searchPhrase=e}}},9758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0,t.Search=class{}},6729:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=t.Range=t.Point=void 0;const n=s(i(1349));t.Point=n.default;const o=s(i(8739));t.Range=o.default;const r=s(i(6048));t.Selection=r.default},1349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.line=e,this.offset=t}}},8739:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(1349));t.default=class{constructor(e=0,t=0,i=0,s=0){this.start=new n.default(e,t),this.end=new n.default(i,s)}}},700:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(6924),h=r(i(1349)),a=o(i(6048)),c=i(1229);t.default=class{constructor(e=null){this._selections=[],this._document=null,this._shouldUpdateSelections=!0,this._rectSelectionStart=null,this._document=e,this._selections=[new a.default(0,0,0,0)]}get length(){return this._selections.length}getSelections(){return this._selections}enableUpdatingSelections(){this._shouldUpdateSelections=!0}disableUpdatingSelections(){this._shouldUpdateSelections=!1}update(e,t,i,s){if(!this._shouldUpdateSelections)return;let n=0;n=i<0||s<0?0:1;const o=new h.default(e,t),r=new h.default(e-i,t-s);for(const t of this._selections)for(const l of[t.start,t.end])n?2!==(0,c.pointCompare)(l,o)&&(l.line===e&&(i?l.offset=l.offset-o.offset+s:l.offset+=s),l.line+=i):l.line>=o.line&&l.line<=r.line&&l.offset>=r.offset-1&&(1!==(0,c.pointCompare)(l,r)?(l.offset=o.offset,l.line=o.line):(l.line=o.line,l.offset=o.offset+l.offset-r.offset));this._removeOverlappingSelections()}setSelection(e){this._selections=[e]}addSelection(e){this._selections.push(e),this._removeOverlappingSelections()}extendLastSelection(e){0!==this._selections.length&&(this._selections[this._selections.length-1].updateSelection(e),this._removeOverlappingSelections(),this._clearRectSelectionStart())}selectAll(){const e=new a.default(0,0,0,0);if(this._document){const t=this._document.linesCount,i=this._document.getLastLine();e.end.line=t-1,e.end.offset=i.length}this._selections=[e],this._clearRectSelectionStart()}selectWordAt(e,t=!1){if(null===this._document)return;const i=(0,l.removeAccents)(this._document.getLine(e.line)),s=(0,l.getWordBefore)(i,e.offset),n=(0,l.getWordAfter)(i,e.offset),o=new a.default(e.line,e.offset-s.length,e.line,e.offset+n.length);t?this._selections.push(o):this._selections=[o],this._removeOverlappingSelections(),this._clearRectSelectionStart()}selectWordBefore(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){if(0===e.start.line&&0===e.start.offset)return;if(0===e.start.offset){e.start.line-=1;const t=(0,l.removeAccents)(this._document.getLine(e.start.line)),i=(0,l.getWordBefore)(t,t.length);e.start.offset=t.length-i.length}else{const t=(0,l.removeAccents)(this._document.getLine(e.start.line)),i=(0,l.getWordBefore)(t,e.start.offset);e.start.offset-=i.length}e.type=a.SelectionType.L}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectWordAfter(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){const t=(0,l.removeAccents)(this._document.getLine(e.end.line));if(e.end.line===this._document.linesCount-1&&e.end.offset===t.length)return;if(e.end.offset===t.length){e.end.line+=1;const t=(0,l.removeAccents)(this._document.getLine(e.end.line)),i=(0,l.getWordAfter)(t,0);e.end.offset=i.length}else{const i=(0,l.getWordAfter)(t,e.end.offset);e.end.offset+=i.length}e.type=a.SelectionType.R}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectStartOfTheLine(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.type===a.SelectionType.R){const t=this._document.getLine(e.end.line),i=(0,l.readWhiteSpaceAfter)(t,0);if(e.end.offset===i?e.end.offset=0:e.end.offset=i,e.start.line===e.end.line){const t=e.start.offset;e.start.offset=e.end.offset,e.end.offset=t,e.type=a.SelectionType.L}}else{const t=this._document.getLine(e.start.line),i=(0,l.readWhiteSpaceAfter)(t,0);e.start.offset===i?e.start.offset=0:e.start.offset=i,e.type=a.SelectionType.L}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectEndOfTheLine(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.type===a.SelectionType.L){const t=this._document.getLine(e.start.line);if(e.start.offset=t.length,e.start.line===e.end.line){const t=e.start.offset;e.start.offset=e.end.offset,e.end.offset=t,e.type=a.SelectionType.R}}else{const t=this._document.getLine(e.end.line);e.end.offset=t.length,e.type=a.SelectionType.R}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}moveSelectionWordBefore(){if(null!==this._document){for(const e of this._selections)if(0!==e.start.line||0!==e.start.offset){if(0===e.start.offset){e.start.line-=1;const t=(0,l.removeAccents)(this._document.getLine(e.start.line));e.start.offset=t.length}else{const t=(0,l.removeAccents)(this._document.getLine(e.start.line)),i=(0,l.getWordBefore)(t,e.start.offset);e.start.offset-=i.length}e.end.offset=e.start.offset,e.end.line=e.start.line}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}moveSelectionWordAfter(){if(null!==this._document){for(const e of this._selections){const t=(0,l.removeAccents)(this._document.getLine(e.end.line));if(e.end.line!==this._document.linesCount-1||e.end.offset!==t.length){if(e.end.offset===t.length)e.end.line+=1,e.end.offset=0;else{const i=(0,l.getWordAfter)(t,e.end.offset);e.end.offset+=i.length}e.start.offset=e.end.offset,e.start.line=e.end.line}}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}extendRectangleSelection(e){if(null===this._document)return;if(null===this._rectSelectionStart){const e=this._selections[this._selections.length-1];e.type===a.SelectionType.L?this._rectSelectionStart=e.end:this._rectSelectionStart=e.start;const t=this._document.getLine(this._rectSelectionStart.line);this._rectSelectionStart.offset=(0,l.offsetToColumn)(t,this._rectSelectionStart.offset)}this._selections=[];const t=Math.min(e.line,this._rectSelectionStart.line),i=Math.max(e.line,this._rectSelectionStart.line),s=Math.min(e.offset,this._rectSelectionStart.offset),n=Math.max(e.offset,this._rectSelectionStart.offset);for(let e=t;e<i+1;e++){const t=this._document.getLine(e),i=(0,l.offsetToColumn)(t,t.length);if(s>i)continue;const o=(0,l.columnToOffset)(t,s),r=n<i?(0,l.columnToOffset)(t,n):t.length;this._selections.push(new a.default(e,o,e,r))}this._removeOverlappingSelections()}collapseSelectionToLeft(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.isCollapsed){if(0===e.start.line&&0===e.start.offset)continue;if(e.start.offset-=1,e.end.offset-=1,e.start.offset<0){const t=e.start.line-1,i=this._document.getLine(t).length;e.start.line=t,e.end.line=t,e.start.offset=i,e.end.offset=i}}else e.end.line=e.start.line,e.end.offset=e.start.offset;this._clearRectSelectionStart()}}collapseSelectionToRight(){if(this._selections.length<1||null===this._document)return;const e=this._document.linesCount-1,t=this._document.getLine(e).length;for(const i of this._selections)if(i.isCollapsed){if(i.start.line===e&&i.start.offset===t)continue;i.start.offset+=1,i.end.offset+=1;const s=this._document.getLine(i.start.line).length;if(i.start.offset>s){const e=i.start.line+1;i.start.line=e,i.end.line=e,i.start.offset=0,i.end.offset=0}}else i.start.line=i.end.line,i.start.offset=i.end.offset;this._clearRectSelectionStart()}collapseSelectionToTop(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){if(0===e.start.line){e.start.offset=0,e.end.offset=0,e.end.line=0;continue}const t=e.start.line-1,i=this._document.getLine(t).length,s=i<e.start.offset?i:e.start.offset;e.start.offset=s,e.end.offset=s,e.start.line=t,e.end.line=t}this._clearRectSelectionStart()}}collapseSelectionToBottom(){if(this._selections.length<1||null===this._document)return;const e=this._document.linesCount-1,t=this._document.getLine(e).length;for(const i of this._selections){if(i.end.line===e){i.start.offset=t,i.end.offset=t,i.start.line=e;continue}const s=i.start.line+1,n=this._document.getLine(s).length,o=n<i.end.offset?n:i.end.offset;i.start.offset=o,i.end.offset=o,i.start.line=s,i.end.line=s}this._clearRectSelectionStart()}collapseSelectionToHome(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){let t="",i=0;e.type===a.SelectionType.L?(t=this._document.getLine(e.start.line),e.end.line=e.start.line,i=e.start.offset):(t=this._document.getLine(e.end.line),e.start.line=e.end.line,i=e.end.offset);const s=(0,l.readWhiteSpaceAfter)(t,0);i===s?(e.start.offset=0,e.end.offset=0):(e.start.offset=s,e.end.offset=s)}this._clearRectSelectionStart(),this._removeOverlappingSelections()}}collapseSelectionToEnd(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){let t="";e.type===a.SelectionType.L?(t=this._document.getLine(e.start.line),e.end.line=e.start.line):(t=this._document.getLine(e.end.line),e.start.line=e.end.line);const i=t.length;e.start.offset=i,e.end.offset=i}this._clearRectSelectionStart(),this._removeOverlappingSelections()}}getActiveLinesNumbers(e=0,t=1/0){if(null===this._document||0===this._selections.length)return new Set;const i=new Set;for(const s of this._selections){const n=Math.max(e,s.start.line),o=Math.min(s.end.line+1,e+t);for(let e=n;e<o;e++)i.add(e)}return i}getSelectedLinesCount(){return this.getActiveLinesNumbers().size}_removeOverlappingSelections(){if(null===this._document||this._selections.length<2)return;const e=[];for(let t=0;t<this._selections.length;t++){const i=this._selections[t];for(let s=t+1;s<this._selections.length;s++){const n=this._selections[s];i.overlaps(n)&&e.push(t)}}let t=0;for(const i of e)this._selections.splice(i-t,1),t++}_clearRectSelectionStart(){this._rectSelectionStart=null}}},6048:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionType=void 0;const n=s(i(8739)),o=i(1229);var r;!function(e){e[e.N=0]="N",e[e.L=1]="L",e[e.R=2]="R"}(r=t.SelectionType||(t.SelectionType={}));class l extends n.default{constructor(){super(...arguments),this.type=r.N}get isCollapsed(){return(0,o.samePoint)(this.start,this.end)}updateSelection(e){this.type===r.L?1===(0,o.pointCompare)(this.end,e)?this.start=e:(this.type=r.R,this.start=this.end,this.end=e):this.type===r.R?2===(0,o.pointCompare)(this.start,e)?this.end=e:(this.type=r.L,this.end=this.start,this.start=e):2===(0,o.pointCompare)(this.start,e)?(this.type=r.R,this.end=e):(this.type=r.L,this.start=e)}toString(){return`{start: {l: ${this.start.line}, o:${this.start.offset}}, end: {l: ${this.end.line}, o:${this.end.offset}}}`}overlaps(e){return this.isCollapsed?2!==(0,o.pointCompare)(this.start,e.start)&&1!==(0,o.pointCompare)(this.start,e.end):2!==(0,o.pointCompare)(e.start,this.start)&&1!==(0,o.pointCompare)(e.start,this.end)||2!==(0,o.pointCompare)(e.end,this.start)&&1!==(0,o.pointCompare)(e.end,this.end)}}t.default=l},1229:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pointCompare=t.samePoint=void 0,t.samePoint=(e,t)=>e.line===t.line&&e.offset===t.offset,t.pointCompare=(e,t)=>e.line===t.line?e.offset<t.offset?2:e.offset===t.offset?0:1:e.line<t.line?2:1},5006:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CSSClasses=void 0,t.CSSClasses={EDITOR:"nc-editor",TEXT_LAYER:"nc-editor__text",GUTTER:"nc-editor__gutter",GUTTER_NUMBER:"nc-gutter__number",MAIN_INPUT:"nc-editor__input",CURSOR:"nc-selection__cursor",CURSOR_ANIMATED:"nc-selection__cursor--animated",MULTI_LINE:"nc-text__multi-line",MULTI_LINE_ACTIVE:"nc-text__multi-line--active",MULTI_LINE_HOVERED:"nc-text__multi-line--hovered",MULTI_LINE_CONTENT:"nc-text__multi-line_content",SELECTION_RANGE:"nc-selection__range",SELECTION_SEARCH:"nc-selection__search",SELECTION:"nc-editor__selection",SCROLL_BAR:"nc-editor__scroll-bar",SCROLL_INNER:"nc-scroll__scrollable",SEARCH:"nc-search",CLOSE_SEARCH:"nc-search__close",SEARCH_INPUT:"nc-search__input",SEARCH_RESULT:"nc-search__result"}},6924:(e,t)=>{function i(e){return" "===e||"\t"===e}function s(e){return/[_a-zA-Z]/.test(e)}function n(e){return/^[0-9]+$/i.test(e)}function o(e,t){return h(e,t,i)}function r(e,t){return h(e,t,s)}function l(e,t){return h(e,t,n)}function h(e,t,i){let s=t-1,n=e[s];for(;s>-1&&i(n);)s--,n=e[s];return t-s-1}function a(e,t){return _(e,t,i)}function c(e,t){return _(e,t,s)}function u(e,t){return _(e,t,n)}function _(e,t,i){let s=t,n=e[s];for(;s<e.length&&i(n);)s++,n=e[s];return s-t}Object.defineProperty(t,"__esModule",{value:!0}),t.readAfterUntil=t.readNumberAfter=t.readWordAfter=t.readWhiteSpaceAfter=t.readBeforeUntil=t.readNumberBefore=t.readWordBefore=t.readWhiteSpaceBefore=t.isAlphaNumeric=t.isNumeric=t.isAlpha=t.isWhiteSpaceChar=t.getWordAfter=t.getWordBefore=t.offsetToColumn=t.columnToOffset=t.removeAccents=void 0,t.removeAccents=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"l")},t.columnToOffset=function(e,t,i=8){let s=0,n=0;for(;s<e.length&&t>0;)if("\t"===e[s++]){const e=n%i;t-=i-e,n+=i-e}else t-=1,n+=1;return t>0?e.length:t<-i/2?s-1:s},t.offsetToColumn=function(e,t,i=8){let s=0;for(let n=0;n<t;n++)"\t"===e[n]?s+=i-s%i:s+=1;return s},t.getWordBefore=function(e,t){if(t>e.length&&(t=e.length),t<0)return"";const h=e[t-1];if(i(h)){const i=o(e,t);return e.substring(t-i,t)}if(s(h)){const i=r(e,t);return e.substring(t-i,t)}if(n(h)){const i=l(e,t);return e.substring(t-i,t)}return e.substring(t-1,t)},t.getWordAfter=function(e,t){if(t>e.length)return"";t<0&&(t=0);const o=e[t];if(i(o)){const i=a(e,t);return e.substring(t,t+i)}if(s(o)){const i=c(e,t);return e.substring(t,t+i)}if(n(o)){const i=u(e,t);return e.substring(t,t+i)}return e.substring(t,t+1)},t.isWhiteSpaceChar=i,t.isAlpha=s,t.isNumeric=n,t.isAlphaNumeric=function(e){return/^[_a-zA-Z0-9]+$/i.test(e)},t.readWhiteSpaceBefore=o,t.readWordBefore=r,t.readNumberBefore=l,t.readBeforeUntil=h,t.readWhiteSpaceAfter=a,t.readWordAfter=c,t.readNumberAfter=u,t.readAfterUntil=_},6165:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compareLineData=void 0,t.default=class{constructor(){this._data=new WeakMap}get data(){return this._data}getLineData(e){const t=this._data.get(e);return void 0!==t?t:{tokens:[],state:{scope:""},length:0}}getLineTokens(e){const t=this._data.get(e);return void 0!==t?t.tokens:[]}},t.compareLineData=function(e,t){if(e.state.scope!==t.state.scope)return!1;if(e.tokens.length!==t.tokens.length)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.tokens.length;i++){const s=e.tokens[i],n=t.tokens[i];if(s.startIndex!==n.startIndex)return!1;if(s.type!==n.type)return!1}return!0}},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0,t.Tokenizer=class{}},2914:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=t.EDITOR_FONT_FAMILY=t.EDITOR_INPUT_ID=void 0,t.EDITOR_INPUT_ID="editor-input",t.EDITOR_FONT_FAMILY="ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace",t.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=1e6},2555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.em=t.rem=t.px=t.isChildOf=t.createNodeFromTemplate=t.createDiv=t.createElement=t.createTextArea=void 0,t.createTextArea=(e="")=>{const i=(0,t.createElement)("textarea");return i.className=e,i},t.createElement=e=>document.createElement(e),t.createDiv=(e="")=>{const i=(0,t.createElement)("div");return i.className=e,i},t.createNodeFromTemplate=e=>{const i=(0,t.createElement)("template");return i.innerHTML=e,i.content.firstChild},t.isChildOf=(e,t)=>{let i=t;for(;i;){if(i===e)return!0;i=i.parentNode}return!1},t.px=e=>`${e}px`,t.rem=e=>`${e}rem`,t.em=e=>`${e}em`},8164:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(7183),o=i(2555),r=s(i(6209)),l=i(2528),h=i(2781),a=i(8593),c=i(5006);class u extends n.EventEmitter{constructor(e,t){super(),this._editor=null,this._view=null,this._mountPoint=null,this._textContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._visibleLines=[],this._activeLineNumber=0,this._hoveredLineNumber=0,this._lineHeight=20,this._letterWidth=0,this._highlighterSchema={},this._editor=e,this._view=t,this._mountPoint=t.getDOMElement(),this._createTextContainer(),this._initEventListeners(),this._measureLetterWidth()}_initEventListeners(){this._view&&this._view.on(l.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleLine),this.update()})),this._editor&&(this._editor.on(h.EvDocument.Edited,(()=>{this.update()})),this._editor.on(h.EvTokenizer.Finished,(()=>{this.update()})),this._editor.on(h.EvSelection.Changed,(()=>{this._updateActiveLines()})),this._editor.on(h.EvDocument.Set,(()=>{this._editor&&(this._highlighterSchema=this._editor.getHighlighterSchema(),this.update())})))}_createTextContainer(){null!==this._mountPoint&&(this._textContainer=(0,o.createDiv)(c.CSSClasses.TEXT_LAYER),this._mountPoint.appendChild(this._textContainer),this._textContainer.style.gridArea="1/2/2/3")}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}update(){this._renderLines()}measureLetterWidth(){return this._measureLetterWidth()}_updateActiveLines(){if(null===this._editor||null==this._textContainer)return;const e=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),t=this._editor.getActiveLinesNumbers(this._firstVisibleLine,this._visibleLinesCount);if(this._visibleLines.length!==e.length)return;let i=0;for(const e of this._visibleLines)e.setActive(t.has(this._firstVisibleLine+i)),i++}_measureLetterWidth(){if(null===this._textContainer)return;const e=(0,o.createDiv)("");e.style.padding="0",e.style.margin="0",e.style.width="fit-content",e.textContent="qwertyuiopASDFGHJKLX",this._textContainer.appendChild(e),this._letterWidth=e.offsetWidth/20,this._textContainer.removeChild(e),this.emit(l.EvFont.LetterWidth,{width:this._letterWidth})}_renderLines(){if(null===this._editor||null==this._textContainer)return;const e=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),t=this._editor.getActiveLinesNumbers(this._firstVisibleLine,this._visibleLinesCount);if(this._visibleLines.length===e.length){let i=0;for(const s of e)this._visibleLines[i].setSchema(this._highlighterSchema),this._visibleLines[i].setData(s),this._visibleLines[i].setActive(t.has(this._firstVisibleLine+i)),this._visibleLines[i].render(),i++}else{this._visibleLines=[];let i=0;for(const s of e)this._renderLine(this._visibleLines,s,this._firstVisibleLine+i),this._visibleLines[i].setActive(t.has(this._firstVisibleLine+i)),i++;const s=this._visibleLines.map((e=>e.getNode())).filter(a.notEmpty);this._textContainer.replaceChildren(...s)}}_renderLine(e,t,i){const s=new r.default(t,i===this._activeLineNumber,this._highlighterSchema);e.push(s)}}t.default=u},509:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(5006),n=i(2555);t.default=class{constructor(e,t){this._left=0,this._top=0,this._cursorElement=null,this._left=e,this._top=t,this._createDOMElement()}getDOMElment(){return this._cursorElement}_createDOMElement(){this._cursorElement=(0,n.createDiv)(s.CSSClasses.CURSOR+" "+s.CSSClasses.CURSOR_ANIMATED),this._cursorElement.style.top=(0,n.px)(this._top),this._cursorElement.style.left=(0,n.px)(this._left)}}},8285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(7183),n=i(2781),o=i(2555),r=i(2528),l=i(5006);class h extends s.EventEmitter{constructor(e,t){super(),this._editor=null,this._view=null,this._mountPoint=null,this._gutterContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._totalLinesCount=50,this._gutterWidth=50,this._editor=e,this._view=t,this._mountPoint=t.getDOMElement(),this._createGutterContainer(),this._initEventListeners()}update(){this._renderLinesNumbers()}setWidth(e){this._gutterWidth=e}setWidthForLinesCount(e){if(null===this._gutterContainer)return this._gutterWidth;const t=e.toString().length;let i=10*t;return i<50&&(i=50),this._gutterWidth!==i&&(this._gutterWidth=10*t,this._gutterWidth=i,this._gutterContainer.style.width=(0,o.px)(this._gutterWidth)),this.emit(r.EvGutter.Width,{width:this._gutterWidth}),this._gutterWidth}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}setTotalLinesCount(e){this._totalLinesCount=e}_initEventListeners(){null!==this._view&&(this._view.on(r.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleLine),this.update()})),null!==this._editor&&this._editor.on(n.EvDocument.LinesCount,(e=>{this.setTotalLinesCount(e.linesCount),this.setWidthForLinesCount(e.linesCount),this.update()})))}_createGutterContainer(){null!==this._mountPoint&&(this._gutterContainer=(0,o.createDiv)(l.CSSClasses.GUTTER),this._mountPoint.appendChild(this._gutterContainer),this._gutterContainer.style.gridArea="1/1/2/2")}_renderLinesNumbers(){if(null===this._gutterContainer)return;const e=[];for(let t=0;t<this._visibleLinesCount&&!(t+this._firstVisibleLine>this._totalLinesCount-1);t++){const i=(0,o.createDiv)(l.CSSClasses.GUTTER_NUMBER);i.innerText=`${t+this._firstVisibleLine+1}`,e.push(i)}this._gutterContainer.replaceChildren(...e)}}t.default=h},9805:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(2914),n=i(5006),o=i(2555),r=i(2528),l=i(2781);t.default=class{constructor(e,t){this._domElement=null,this._editor=null,this._view=null,this._editor=e,this._view=t,this._domElement=(0,o.createTextArea)(n.CSSClasses.MAIN_INPUT),this._domElement.id=s.EDITOR_INPUT_ID,this._domElement.autofocus=!0,this._domElement.autocapitalize="off",this._initEventListeners()}focus(){var e;null===(e=this._domElement)||void 0===e||e.focus()}render(e){this._domElement&&e.appendChild(this._domElement)}_initEventListeners(){var e;this._domElement&&this._domElement.addEventListener("input",(()=>this._onInput())),this._view&&(this._view.on(r.EvFocus.Changed,(e=>{e.focused&&this.focus()})),null===(e=this._editor)||void 0===e||e.on(l.EvDocument.Set,(()=>{this.focus()})))}_onInput(){null!==this._editor&&null!==this._domElement&&0!==this._domElement.value.length&&(this._editor.insert(this._domElement.value),this._domElement.value="")}}},6209:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(5006),n=i(2555);t.default=class{constructor(e,t=!1,i={}){this._text="",this._isActive=!1,this._isHovered=!1,this._domElement=null,this._tokens=[],this._text=e.rawText,this._tokens=e.tokens,this._highlighterSchema=i,this._domElement=(0,n.createNodeFromTemplate)(`<div class="${s.CSSClasses.MULTI_LINE}">\n\t\t\t<div class="${s.CSSClasses.MULTI_LINE_CONTENT}">\n\t\t\t  ${this._text||"<br />"}\n\t\t\t</div>\n\t\t</div>`),this._domElement.style.height=(0,n.px)(20),this.setActive(t),this._renderTokens()}getNode(){return this._domElement}setData(e){e.rawText===this._text&&this._tokens.length>0||(this._text=e.rawText,this._tokens=e.tokens)}render(){this._renderTokens()}setSchema(e){this._highlighterSchema=e}_renderTokens(){const e=this._domElement;if(null===e.firstElementChild)return;if(0===this._tokens.length)return void(e.firstElementChild.textContent=this._text);const t=[];for(let e=0;e<this._tokens.length;e++){const i=this._tokens[e],s=(0,n.createElement)("span");s.className=this._highlighterSchema[i.type];const o=i.startIndex,r=e+1<this._tokens.length?this._tokens[e+1].startIndex:this._text.length;s.textContent=this._text.substring(o,r),t.push(s)}e.firstElementChild.replaceChildren(...t)}setText(e){if(e===this._text)return;this._text=e;const t=this._domElement;null!==t.firstElementChild&&(t.firstElementChild.textContent=e)}setActive(e){if(e===this._isActive)return;this._isActive=e;const t=this._domElement;e?t.classList.add(s.CSSClasses.MULTI_LINE_ACTIVE):t.classList.remove(s.CSSClasses.MULTI_LINE_ACTIVE)}setHover(e){if(e===this._isHovered)return;this._isHovered=e;const t=this._domElement;e?t.classList.add(s.CSSClasses.MULTI_LINE_HOVERED):t.classList.remove(s.CSSClasses.MULTI_LINE_HOVERED)}}},168:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(2555),n=i(7183),o=i(2528),r=i(2781),l=i(2914),h=i(5006);class a extends n.EventEmitter{constructor(e,t){super(),this._editor=null,this._view=null,this._mountPoint=null,this._emitterName="scroll-bar",this._scrollBarContainer=null,this._scrollableDiv=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._totalLinesCount=50,this._maxLinesPadding=10,this._scale=20,this._onScroll=()=>{if(null===this._scrollBarContainer)return;const e=Math.ceil(this._scrollBarContainer.scrollTop/this._scale);this._firstVisibleLine=e,this.emit(o.EvScroll.Changed,{firstVisibleLine:e,emitterName:this._emitterName})},this._editor=e,this._view=t,this._mountPoint=t.getDOMElement(),this._createScrollContainer(),this._initEventListeners()}update(){this._updateScrollPosition()}setTotalLinesCount(e){if(this._totalLinesCount=e,this._updateScale(),this._scrollableDiv){let t=(e+this._maxLinesPadding)*this._scale;this._totalLinesCount>l.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE&&(t*=1.01),this._scrollableDiv.style.height=(0,s.px)(t)}}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}setMaxLinesPadding(e){this._maxLinesPadding=e}_createScrollContainer(){null!==this._mountPoint&&(this._scrollBarContainer=(0,s.createDiv)(h.CSSClasses.SCROLL_BAR),this._scrollableDiv=(0,s.createDiv)(h.CSSClasses.SCROLL_INNER),this._scrollBarContainer.appendChild(this._scrollableDiv),this._mountPoint.appendChild(this._scrollBarContainer),this._scrollBarContainer.style.gridArea="1/3/2/4")}_updateScrollPosition(){null!==this._scrollBarContainer&&(this._scrollBarContainer.scrollTop=Math.ceil(this._firstVisibleLine*this._scale))}_initEventListeners(){this._scrollBarContainer&&(this._scrollBarContainer.addEventListener("mousedown",(()=>{this._onMouseDown()})),this._scrollBarContainer.addEventListener("mouseup",(()=>{this._onMouseUp()}))),this._view&&this._view.on(o.EvScroll.Changed,(e=>{e.emitterName!==this._emitterName&&(this.setFirstVisibleLine(e.firstVisibleLine),this.update())})),this._editor&&this._editor.on(r.EvDocument.LinesCount,(e=>{this.setTotalLinesCount(e.linesCount)}))}_onMouseDown(){this._scrollBarContainer&&this._scrollBarContainer.addEventListener("scroll",this._onScroll)}_onMouseUp(){this._scrollBarContainer&&this._scrollBarContainer.removeEventListener("scroll",this._onScroll)}_updateScale(){this._totalLinesCount>l.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE?this._scale=.1:this._scale=20}}t.default=a},3421:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(7183),n=i(2781),o=i(2555),r=i(2528),l=i(5006);class h extends s.EventEmitter{constructor(e,t){super(),this._editor=null,this._view=null,this._mountPoint=null,this._searchContainer=null,this._closeButton=null,this._input=null,this._resultsContainer=null,this._isOpen=!1,this._seatchMatchesCount=0,this._searchPhrase="",this._editor=e,this._view=t,this._mountPoint=t.getDOMElement(),this._createSearchContainer(),this._initEventListeners()}update(){this._resultsContainer&&(this._resultsContainer.textContent=`Results: ${this._seatchMatchesCount}`)}show(){var e;this._isOpen=!0,this._searchContainer&&(this._searchContainer.style.display="flex"),null===(e=this._input)||void 0===e||e.focus()}hide(){this._isOpen=!1,this._searchContainer&&(this._searchContainer.style.display="none")}getDOMElement(){return this._searchContainer}_initEventListeners(){this._view&&this._view.on(r.EvSearchUi.Open,(()=>{this.show(),this.update()})),this._editor&&(this._editor.on(n.EvSearch.Finished,(()=>{this._editor&&(this._seatchMatchesCount=this._editor.getSearchMatchCount(),this.update())})),this._editor.on(n.EvDocument.Set,(()=>{this._editor&&(this._seatchMatchesCount=this._editor.getSearchMatchCount(),this._searchPhrase=this._editor.getSearchPhrase(),this._input&&(this._input.value=this._searchPhrase),this.update())}))),this._closeButton&&this._closeButton.addEventListener("click",(()=>{this.emit(r.EvSearchUi.Close,void 0),this.hide()})),this._input&&this._input.addEventListener("input",(()=>{this._input&&this._editor&&(this._searchPhrase=this._input.value,this._editor.search(this._searchPhrase))}))}_createSearchContainer(){null!==this._mountPoint&&(this._searchContainer=(0,o.createDiv)(l.CSSClasses.SEARCH),this._mountPoint.appendChild(this._searchContainer),this._closeButton=(0,o.createElement)("button"),this._closeButton.className=l.CSSClasses.CLOSE_SEARCH,this._closeButton.textContent="X",this._searchContainer.appendChild(this._closeButton),this._input=(0,o.createElement)("input"),this._input.className=l.CSSClasses.SEARCH_INPUT,this._input.autofocus=!0,this._searchContainer.appendChild(this._input),this._resultsContainer=(0,o.createElement)("p"),this._resultsContainer.className=l.CSSClasses.SEARCH_RESULT,this._searchContainer.appendChild(this._resultsContainer),this.hide())}}t.default=h},1757:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6924),n=i(5006),o=i(2555);t.default=class{constructor(e){this._domElements=[],this._selection=e}setSelection(e){this._selection=e}render(e,t,i,r){var l,h;if(this._selection.isCollapsed)return[];const a=i.map((e=>e.rawText.length)),c=Math.max(this._selection.start.line,e)-e,u=Math.min(this._selection.end.line+1,e+t)-e,_=u-c;_!==this._domElements.length&&(this._domElements=[]);for(let t=c;t<u;t++){const u=null!==(h=null===(l=i[t])||void 0===l?void 0:l.rawText)&&void 0!==h?h:"";let d=0,f=(0,s.offsetToColumn)(u,a[t]);t===this._selection.start.line-e&&(d=(0,s.offsetToColumn)(u,this._selection.start.offset)),t===this._selection.end.line-e&&(f=(0,s.offsetToColumn)(u,this._selection.end.offset));const m=(0,o.px)(d*r),p=(0,o.px)(20*t),g=(0,o.px)((f-d)*r||r),v=(0,o.px)(20);if(_===this._domElements.length){const e=t-c;this._domElements[e].style.left=m,this._domElements[e].style.top=p,this._domElements[e].style.width=g,this._domElements[e].style.height=v}else{const e=(0,o.createDiv)(n.CSSClasses.SELECTION_RANGE);e.style.left=m,e.style.top=p,e.style.width=g,e.style.height=v,this._domElements.push(e)}}return this._domElements}}},7551:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(2781),o=i(6729),r=i(6924),l=i(5006),h=i(2555),a=s(i(509)),c=s(i(1757)),u=i(2528),_=i(7183),d=i(6048);class f extends _.EventEmitter{constructor(e,t){super(),this._emitterName="selection-layer",this._editor=null,this._view=null,this._mountPoint=null,this._selectionContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._lineHeight=20,this._letterWidth=0,this._visibleSelections=[],this._isMouseHold=!1,this._isTouchHold=!1,this._isTouchSelecting=!1,this._isCtrlHold=!1,this._isShitHold=!1,this._isAltHold=!1,this._lastTouchTime=null,this._lastTouchPosition=new o.Point(0,0),this._showSearchResults=!1,this._editor=e,this._view=t,this._mountPoint=t.getDOMElement(),this._crateSelctionContainer(),this._initEventListeners()}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}update(){if(this._selectionContainer){const e=this._renderSelections(),t=this._renderCursors(),i=this._renderSearchResults();this._selectionContainer.replaceChildren(...e,...t,...i)}}_crateSelctionContainer(){null!==this._mountPoint&&(this._selectionContainer=(0,h.createDiv)(l.CSSClasses.SELECTION),this._mountPoint.appendChild(this._selectionContainer),this._selectionContainer.style.gridArea="1/2/2/3",this._selectionContainer.style.position="relative",this._selectionContainer.style.zIndex="4",this._selectionContainer.style.marginLeft=(0,h.em)(1))}_initEventListeners(){this._view&&(this._view.on(u.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleLine),this.update()})),this._view.on(u.EvFont.LetterWidth,(e=>{this._letterWidth=e.width,this.update()})),this._view.on(u.EvKey.CtrlDown,(()=>{this._isCtrlHold=!0})),this._view.on(u.EvKey.CtrlUp,(()=>{this._isCtrlHold=!1})),this._view.on(u.EvKey.ShiftDown,(()=>{this._isShitHold=!0})),this._view.on(u.EvKey.ShiftUp,(()=>{this._isShitHold=!1})),this._view.on(u.EvKey.AltDown,(()=>{this._isAltHold=!0})),this._view.on(u.EvKey.AltUp,(()=>{this._isAltHold=!1})),this._view.on(u.EvSearchUi.Open,(()=>{this._showSearchResults=!0,this.update()})),this._view.on(u.EvSearchUi.Close,(()=>{this._showSearchResults=!1,this.update()}))),this._editor&&(this._editor.on(n.EvSelection.Changed,(()=>{this.update()})),this._editor.on(n.EvSearch.Finished,(()=>{this.update()}))),this._selectionContainer&&(this._selectionContainer.addEventListener("mousedown",(e=>this._onMouseDown(e))),this._selectionContainer.addEventListener("mouseup",(()=>this._onMouseUp())),this._selectionContainer.addEventListener("mousemove",(e=>this._onMouseMove(e))),this._selectionContainer.addEventListener("dblclick",(e=>this._onDoubleClick(e))),this._selectionContainer.addEventListener("touchstart",(e=>this._onTouchStart(e))),this._selectionContainer.addEventListener("touchend",(()=>this._onTouchEnd())),this._selectionContainer.addEventListener("touchmove",(e=>this._onTouchMove(e))))}_renderSelections(){if(null===this._editor||null===this._selectionContainer)return[];const e=this._editor.getSelctions(),t=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),i=[];if(e.length===this._visibleSelections.length)for(let s=0;s<e.length;s++)this._visibleSelections[s].setSelection(e[s]),i.push(...this._visibleSelections[s].render(this._firstVisibleLine,this._visibleLinesCount,t,this._letterWidth));else{this._visibleSelections=[];for(let s=0;s<e.length;s++){const n=new c.default(e[s]);this._visibleSelections.push(n),i.push(...this._visibleSelections[s].render(this._firstVisibleLine,this._visibleLinesCount,t,this._letterWidth))}}return i}_renderCursors(){if(null===this._editor||null===this._selectionContainer)return[];const e=this._editor.getSelctions(),t=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),i=[];for(const s of e){let e=0,n=0;if(s.type===d.SelectionType.L?(e=s.start.line-this._firstVisibleLine,n=s.start.offset):(e=s.end.line-this._firstVisibleLine,n=s.end.offset),e>=t.length||e<0)continue;const o=t[e],l=(0,r.offsetToColumn)(o.rawText,n)*this._letterWidth,h=e*this._lineHeight,c=new a.default(l,h).getDOMElment();c&&i.push(c)}return i}_renderSearchResults(){if(null===this._editor||null===this._selectionContainer||!this._showSearchResults)return[];const e=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),t=this._editor.getSearchPhrase().length,i=[];let s=0;for(const n of e){for(const e of n.searchResults){const o=(0,h.createDiv)(l.CSSClasses.SELECTION_SEARCH),a=(0,r.offsetToColumn)(n.rawText,e)*this._letterWidth,c=(0,r.offsetToColumn)(n.rawText,e+t)*this._letterWidth,u=s*this._lineHeight;o.style.top=(0,h.px)(u),o.style.left=(0,h.px)(a),o.style.width=(0,h.px)(c-a),o.style.height=(0,h.px)(this._lineHeight),i.push(o)}s++}return i}_onMouseDown(e){if(this._isMouseHold=!0,null===this._editor)return;const[t,i]=m(e),[s,n]=this._getLineAndOffsetAtPosition(t,i),r=Math.round(t/this._letterWidth);this._isShitHold?this._isAltHold?this._editor.extendRectangleSelection(new o.Point(s,r)):this._editor.extendLastSelection(new o.Point(s,n)):this._isCtrlHold?this._editor.addSelection(new o.Selection(s,n,s,n)):this._editor.setSelection(new o.Selection(s,n,s,n))}_onMouseUp(){this._isMouseHold=!1}_onMouseMove(e){if(this._isMouseHold&&this._editor){const[t,i]=m(e),[s,n]=this._getLineAndOffsetAtPosition(t,i),r=Math.round(t/this._letterWidth);this._isShitHold&&this._isAltHold?this._editor.extendRectangleSelection(new o.Point(s,r)):this._editor.extendLastSelection(new o.Point(s,n))}}_onDoubleClick(e){if(null===this._editor)return;const[t,i]=m(e),[s,n]=this._getLineAndOffsetAtPosition(t,i);this._isShitHold||this._editor.selectWordAt(new o.Point(s,n),this._isCtrlHold)}_onTouchStart(e){if(this._isTouchHold=!0,null===this._editor)return;const[t,i]=p(e),[s,n]=this._getLineAndOffsetAtPosition(t,i),r=performance.now();null!==this._lastTouchTime&&r-this._lastTouchTime<200&&(this._isTouchSelecting=!0,this._editor.setSelection(new o.Selection(s,n,s,n))),this._lastTouchTime=r,this._lastTouchPosition.line=i,this._lastTouchPosition.offset=t,e.preventDefault(),e.stopPropagation()}_onTouchEnd(){this._isTouchHold=!1,this._isTouchSelecting=!1}_onTouchMove(e){if(this._isTouchHold&&this._editor){const[t,i]=p(e),[s,n]=this._getLineAndOffsetAtPosition(t,i);if(this._isTouchSelecting)this._editor.extendLastSelection(new o.Point(s,n));else{const e=this._lastTouchPosition.line-i,t=e>0?Math.min(Math.round(e/4),2):Math.max(Math.round(e/4),-2);this.emit(u.EvScroll.Changed,{firstVisibleLine:t+this._firstVisibleLine,emitterName:this._emitterName})}this._lastTouchPosition.line=i,this._lastTouchPosition.offset=t}}_getLineAndOffsetAtPosition(e,t){if(null===this._editor)return[0,0];let i=Math.floor(t/this._lineHeight)+this._firstVisibleLine,s=0;const n=this._editor.getLines(i,1);if(0===n.length){const e=this._editor.getLastLine();if(null===e)return[0,0];s=(0,r.columnToOffset)(e.rawText,1/0),i=this._editor.getTotalLinesCount()-1}else{const t=n[0],i=Math.round(e/this._letterWidth);s=(0,r.columnToOffset)(t.rawText,i)}return[i,s]}}function m(e){const t=e.target.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]}function p(e){const t=e.target.getBoundingClientRect();return[e.touches[0].clientX-t.left,e.touches[0].clientY-t.top]}t.default=f},2248:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(7183),o=s(i(8164)),r=s(i(8285)),l=s(i(168)),h=s(i(7551)),a=s(i(9805)),c=i(2555),u=i(1556),_=i(2528),d=i(2781),f=i(2914),m=i(5006),p=i(6048),g=s(i(3421));class v extends n.EventEmitter{constructor(e,t){super(),this._editor=null,this._mountPoint=null,this._editorContainer=null,this._emitterName="editor-view",this._textLayer=null,this._gutter=null,this._scrollBar=null,this._selectionLayer=null,this._input=null,this._search=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._scrollHeight=0,this._scrollWidth=0,this._scrollLeft=0,this._scrollbarWidth=15,this._gutterWidth=50,this._isFocused=!1,this._height=0,this._width=0,this._lineHeight=20,this._fontSize=12,this._fontFamily=f.EDITOR_FONT_FAMILY,this._letterWidth=8,this._hoverLineNumber=-1,this._activeLineNumber=-1,this._isCtrlHold=!1,this._isShitHold=!1,this._isLeftAltHold=!1,this._isRightAltHold=!1,this._theme=u.Theme.Default,this._editor=e,this.mount(t),this._editor.addView(this),this._textLayer=new o.default(e,this),this._selectionLayer=new h.default(e,this),this._gutter=new r.default(e,this),this._scrollBar=new l.default(e,this),this._input=new a.default(e,this),this._search=new g.default(e,this),this._scrollBarInitialConfig(),this._initEventListeners(),this._createInputElement(),this._scrollToLine(0,this._emitterName),this.setTheme(u.Theme.Default),this._textLayer.measureLetterWidth(),this._emitInitEvent()}mount(e){if("string"==typeof e){const t=document.getElementById(e);if(null===t)throw new Error(`Element with id="${e}" does not exist.`);this._mountPoint=t}else typeof e===HTMLElement.toString()&&(this._mountPoint=e);return this._createEditorContainer(),this._updateEditorSize(),this._createInputElement(),this.setTheme(u.DEFAULT_THEME),0}unmount(){this._mountPoint&&(this._mountPoint.textContent="")}setTheme(e){const t=e;let i=!1;for(const e of u.VALID_THEMES)if(e===t&&e.length===t.length){i=!0;break}if(!i)throw new Error("Invalid theme name");if(this._theme=t,null===this._editorContainer)return 1;for(const e of u.VALID_THEMES)this._editorContainer.classList.remove(u.BASE_THEME_CLASS+e);return this._editorContainer.classList.add(u.BASE_THEME_CLASS+t),this.emit(_.EvTheme.Changed,{theme:this._theme}),0}update(){this._updateEditorSize()}getDOMElement(){return this._editorContainer}_emitInitEvent(){this.emit(_.EvView.Initialized,void 0)}_scrollBarInitialConfig(){this._scrollBar&&this._scrollBar.setMaxLinesPadding(10)}_createEditorContainer(){null!==this._mountPoint&&(this._editorContainer=(0,c.createDiv)(m.CSSClasses.EDITOR),this._mountPoint.appendChild(this._editorContainer),this._editorContainer.style.fontFamily=this._fontFamily,this._editorContainer.style.fontSize=(0,c.px)(this._fontSize),this._editorContainer.style.lineHeight=(0,c.px)(this._lineHeight),this._updateGridLayout())}_updateGridLayout(){this._editorContainer&&(this._editorContainer.style.gridTemplate=`100% / ${(0,c.px)(this._gutterWidth)} 1fr ${(0,c.px)(this._scrollbarWidth)}`)}_createInputElement(){this._editorContainer&&this._input&&this._input.render(this._editorContainer)}_updateEditorSize(){null!==this._editorContainer&&(this._height=this._editorContainer.clientHeight,this._width=this._editorContainer.clientWidth,this._visibleLinesCount=Math.ceil(this._height/this._lineHeight),this._gutter&&this._gutter.setVisibleLinesCount(this._visibleLinesCount),this._textLayer&&this._textLayer.setVisibleLinesCount(this._visibleLinesCount),this._scrollBar&&this._scrollBar.setVisibleLinesCount(this._visibleLinesCount),this._selectionLayer&&this._selectionLayer.setVisibleLinesCount(this._visibleLinesCount))}_initEventListeners(){window.addEventListener("resize",(()=>this._onResize())),this._editorContainer&&(this._editorContainer.addEventListener("mousewheel",(e=>this._onMouseWheel(e))),this._editorContainer.addEventListener("click",(e=>this._onMouseDown(e))),this._editorContainer.addEventListener("blur",(()=>this._onBlur())),this._editorContainer.addEventListener("keydown",(e=>this._onKeyDown(e))),this._editorContainer.addEventListener("keyup",(e=>this._onKeyUp(e))),this._editorContainer.addEventListener("paste",(e=>this._onPaste(e)))),this._editor&&(this._editor.on(d.EvDocument.Edited,(()=>{if(this._editor){const e=this._editor.getSelctions(),t=e[e.length-1],i=t.type===p.SelectionType.L?t.start:t.end;this._isCursorVisible(i)||this._scrollToLine(i.line-Math.round(this._visibleLinesCount/2),"editor-view")}})),this._editor.on(d.EvDocument.Set,(()=>{this.update()})),this._editor.on(d.EvTokenizer.Finished,(()=>{this.update()}))),this._scrollBar&&this._scrollBar.on(_.EvScroll.Changed,(e=>{this._scrollToLine(e.firstVisibleLine,e.emitterName)})),this._textLayer&&this._textLayer.on(_.EvFont.LetterWidth,(e=>{this._letterWidth=e.width,this.emit(_.EvFont.LetterWidth,{width:e.width})})),this._gutter&&this._gutter.on(_.EvGutter.Width,(e=>{this._gutterWidth=e.width,this._updateGridLayout()})),this._selectionLayer&&this._selectionLayer.on(_.EvScroll.Changed,(e=>{this._scrollToLine(e.firstVisibleLine,e.emitterName)})),this._search&&this._search.on(_.EvSearchUi.Close,(()=>{this.emit(_.EvSearchUi.Close,void 0),this._setFocus(!0)}))}_onPaste(e){this._editor&&(e.clipboardData&&this._editor.insert(e.clipboardData.getData("text")),e.stopPropagation(),e.preventDefault())}_onResize(){this._updateEditorSize(),this.update()}_onMouseWheel(e){const t=Math.round(e.deltaY/Math.abs(e.deltaY)*3);this._scrollToLine(this._firstVisibleLine+t,this._emitterName),e.preventDefault(),e.stopPropagation()}_onMouseDown(e){this._search&&(0,c.isChildOf)(this._search.getDOMElement(),e.target)||this._setFocus(!0)}_onBlur(){this._setFocus(!1),this.update()}_onKeyDown(e){switch(e.code){case"ControlLeft":this._isCtrlHold=!0,this.emit(_.EvKey.CtrlDown,void 0);break;case"ShiftLeft":this._isShitHold=!0,this.emit(_.EvKey.ShiftDown,void 0);break;case"AltLeft":this._isLeftAltHold=!0,this.emit(_.EvKey.AltDown,void 0);break;case"AltRight":this._isRightAltHold=!0;break;case"KeyA":this._editor&&this._isCtrlHold&&!this._isRightAltHold&&this._editor.selectAll();break;case"ArrowUp":if(null===this._editor)return;this._isLeftAltHold?this._editor.swapLinesUp():this._editor.collapseSelectionToTop();break;case"ArrowDown":if(null===this._editor)return;this._isLeftAltHold?this._editor.swapLinesDown():this._editor.collapseSelectionToBottom();break;case"ArrowLeft":if(null===this._editor)return;this._isShitHold&&this._isCtrlHold?this._editor.selectWordBefore():this._isCtrlHold?this._editor.moveSelectionWordBefore():this._editor.collapseSelectionToLeft();break;case"ArrowRight":if(null===this._editor)return;this._isShitHold&&this._isCtrlHold?this._editor.selectWordAfter():this._isCtrlHold?this._editor.moveSelectionWordAfter():this._editor.collapseSelectionToRight();break;case"Home":if(null===this._editor)return;this._isShitHold?this._editor.selectStartOfTheLine():this._editor.collapseSelectionToHome();break;case"End":if(null===this._editor)return;this._isShitHold?this._editor.selectEndOfTheLine():this._editor.collapseSelectionToEnd();break;case"Backspace":if(!this._editor)return;this._isCtrlHold?this._editor.removeWordBefore():this._editor.remove();break;case"Delete":if(!this._editor)return;this._isCtrlHold?this._editor.removeWordAfter():this._editor.remove(1);break;case"Tab":if(!this._editor)return;this._isShitHold?this._editor.removeIndentFromSelectedLines():1===this._editor.getSelectedLinesCount()?this._editor.insert("\t"):this._editor.indentSelectedLines(),e.stopPropagation(),e.preventDefault();break;case"KeyX":if(!this._editor)return;this._isCtrlHold&&this._editor.cut();break;case"KeyC":if(!this._editor)return;this._isCtrlHold&&this._editor.copy();break;case"KeyF":if(!this._editor)return;this._isCtrlHold&&(this.emit(_.EvSearchUi.Open,void 0),e.preventDefault(),e.stopPropagation())}}_onKeyUp(e){switch(e.code){case"ControlLeft":this._isCtrlHold=!1,this.emit(_.EvKey.CtrlUp,void 0);break;case"ShiftLeft":this._isShitHold=!1,this.emit(_.EvKey.ShiftUp,void 0);break;case"AltLeft":this._isLeftAltHold=!1,this.emit(_.EvKey.AltUp,void 0);break;case"AltRight":this._isRightAltHold=!1}}_onDocumentClick(e){const t=e.target;(0,c.isChildOf)(this._editorContainer,t)?(this._setFocus(!0),this.update()):(this._setFocus(!1),this.update())}scrollToLine(e){this._scrollToLine(e,this._emitterName)}_setFocus(e){this._isFocused=e,this.emit(_.EvFocus.Changed,{focused:e})}_scrollToLine(e,t=this._emitterName){if(null===this._editor)return;let i=this._editor.getTotalLinesCount();i=i<0?0:i,e<0||i-this._visibleLinesCount<0?this._firstVisibleLine=0:e>i-this._visibleLinesCount+10?this._firstVisibleLine=i-this._visibleLinesCount+10:this._firstVisibleLine=e,this.emit(_.EvScroll.Changed,{firstVisibleLine:this._firstVisibleLine,emitterName:t}),this.update()}_isCursorVisible(e){return!(e.line<this._firstVisibleLine||e.line>this._firstVisibleLine+this._visibleLinesCount)}}t.default=v},2528:(e,t)=>{var i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.EvKey=t.EvSearchUi=t.EvGutter=t.EvFont=t.EvTheme=t.EvFocus=t.EvScroll=t.EvView=void 0,(t.EvView||(t.EvView={})).Initialized="view.Initialized",(t.EvScroll||(t.EvScroll={})).Changed="scroll.Changed",(t.EvFocus||(t.EvFocus={})).Changed="focus.Changed",(t.EvTheme||(t.EvTheme={})).Changed="theme.Changed",(t.EvFont||(t.EvFont={})).LetterWidth="font.LetterWidthChange",(t.EvGutter||(t.EvGutter={})).Width="gutter.WidthChanged",(s=t.EvSearchUi||(t.EvSearchUi={})).Open="search.Open",s.Close="search.CLose",(i=t.EvKey||(t.EvKey={})).CtrlDown="key.Ctrl.down",i.CtrlUp="key.Ctrl.up",i.ShiftDown="key.Shift.down",i.ShiftUp="key.Shift.up",i.AltDown="key.Alt.down",i.AltUp="key.Alt.up"},8637:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorView=void 0;const n=s(i(2248));t.EditorView=n.default},1556:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME=t.Theme=t.BASE_THEME_CLASS=t.VALID_THEMES=void 0,t.VALID_THEMES=["default","light","dark"],t.BASE_THEME_CLASS="nc-theme--",(i=t.Theme||(t.Theme={})).Default="default",i.Light="light",i.Dark="dark",t.DEFAULT_THEME="default"},8593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=t.notEmpty=void 0,t.notEmpty=function(e){return null!=e},t.randomString=function(e=6){let t="";const i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<e;s++)t+=i[Math.floor(Math.random()*i.length)];return t}}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0;var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=e.EditorView=e.Editor=e.Range=e.Document=void 0;const t=i(1117);Object.defineProperty(e,"Document",{enumerable:!0,get:function(){return t.Document}});const n=i(6729);Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return n.Range}}),Object.defineProperty(e,"Selection",{enumerable:!0,get:function(){return n.Selection}});const o=i(7708);Object.defineProperty(e,"Editor",{enumerable:!0,get:function(){return o.Editor}});const r=i(8637);Object.defineProperty(e,"EditorView",{enumerable:!0,get:function(){return r.EditorView}}),i(2545)})(),nc=s})();