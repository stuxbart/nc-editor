var nc;(()=>{"use strict";var e={1144:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(8081),n=s.n(i),o=s(3645),r=s.n(o)()(n());r.push([e.id,'.nc-theme--light .nc-editor__text{background-color:#fff}.nc-theme--light .nc-editor__gutter{border-right:1px solid #2e2e2e;background-color:#ccc;color:#161616}.nc-theme--light .nc-editor__scroll-bar{background-color:#fff}.nc-theme--light .nc-text__multi-line{background-color:#fff;border-top:1px solid #fff;border-bottom:1px solid #fff;color:#161616}.nc-theme--light .nc-text__multi-line--active{border-color:#e0e0e0}.nc-theme--light .nc-selection__cursor{background-color:#161616}.nc-theme--light .nc-selection__range{background-color:rgba(0,112,218,.432)}.nc-theme--light .nc-selection__search{background-color:rgba(197,197,197,.452);border:1px solid rgba(36,87,228,.644)}.nc-theme--light .nc-selection__search--active{background-color:rgba(31,245,42,.473)}.nc-theme--light .nc-search{border:1px solid #161616;background-color:#fff}.nc-theme--light .nc-search__close{color:#202020;background-color:#fff}.nc-theme--light .nc-search__input{border:1px solid #1d1d1d;background-color:#e0e0e0;color:#000}.nc-theme--light .nc-search__button{background-color:#fff;color:#000}.nc-theme--light .nc-search__button:hover{background-color:#e0e0e0}.nc-theme--light .nc-search__button--active{background-color:#e0e0e0}.nc-theme--light .nc-search__result{color:#000}.nc-theme--light .nc-gutter__number{background-color:#ccc;color:#161616}.nc-theme--light .nc-gutter__number--active{color:#a84949}.nc-theme--light .nc-format__word{color:#0a0a0a}.nc-theme--light .nc-format__bracket{color:#074ccc}.nc-theme--light .nc-format__square-bracket{color:#c527ca}.nc-theme--light .nc-format__brace{color:#bc06f3}.nc-theme--light .nc-format__comment{color:#008b07}.nc-theme--light .nc-format__keyword{color:#ac31d1}.nc-theme--light .nc-format__string{color:#ca4a18}.nc-theme--light .nc-format__semicolon,.nc-theme--light .nc-format__colon{color:#202020}.nc-theme--light .nc-format__operator{color:#353535}.nc-theme--light .nc-format__comma,.nc-theme--light .nc-format__dot{color:#222}.nc-theme--light .nc-format__number{color:#3abd7f}.nc-theme--light .nc-format__const-value,.nc-theme--light .nc-format__access-modifier,.nc-theme--light .nc-format__declaration{color:#396cca}.nc-theme--light .nc-format__type{color:#22ad78}.nc-theme--default .nc-editor__text,.nc-theme--dark .nc-editor__text{background-color:#242424}.nc-theme--default .nc-editor__gutter,.nc-theme--dark .nc-editor__gutter{border-right:1px solid #949494;background-color:#242424;color:#a7a7a7}.nc-theme--default .nc-editor__scroll-bar,.nc-theme--dark .nc-editor__scroll-bar{background-color:#242424}.nc-theme--default .nc-text__multi-line,.nc-theme--dark .nc-text__multi-line{background-color:#242424;border-top:1px solid #242424;border-bottom:1px solid #242424;color:#fff}.nc-theme--default .nc-text__multi-line--active,.nc-theme--dark .nc-text__multi-line--active{border-color:#535353;background-color:#313131}.nc-theme--default .nc-selection__cursor,.nc-theme--dark .nc-selection__cursor{background-color:#fff}.nc-theme--default .nc-selection__range,.nc-theme--dark .nc-selection__range{background-color:rgba(50,148,240,.2)}.nc-theme--default .nc-selection__search,.nc-theme--dark .nc-selection__search{border:1px solid rgba(228,199,36,.281);background-color:rgba(228,199,36,.295)}.nc-theme--default .nc-selection__search--active,.nc-theme--dark .nc-selection__search--active{background-color:rgba(36,228,46,.295)}.nc-theme--default .nc-search,.nc-theme--dark .nc-search{border-color:#949494;background-color:#242424}.nc-theme--default .nc-search__close,.nc-theme--dark .nc-search__close{color:#202020}.nc-theme--default .nc-search__input,.nc-theme--dark .nc-search__input{border:1px solid #949494;background-color:#363636;color:#fff}.nc-theme--default .nc-search__button,.nc-theme--dark .nc-search__button{background-color:#242424;color:#dbdbdb}.nc-theme--default .nc-search__button:hover,.nc-theme--dark .nc-search__button:hover{background-color:#363636}.nc-theme--default .nc-search__button--active,.nc-theme--dark .nc-search__button--active{background-color:#363636}.nc-theme--default .nc-search__result,.nc-theme--dark .nc-search__result{color:#dbdbdb}.nc-theme--default .nc-gutter__number,.nc-theme--dark .nc-gutter__number{background-color:#242424;color:#999}.nc-theme--default .nc-gutter__number--active,.nc-theme--dark .nc-gutter__number--active{background-color:#303030;color:#fff}.nc-theme--default .nc-format__word,.nc-theme--dark .nc-format__word{color:#88c4fd}.nc-theme--default .nc-format__bracket,.nc-theme--dark .nc-format__bracket{color:#074ccc}.nc-theme--default .nc-format__square-bracket,.nc-theme--dark .nc-format__square-bracket{color:#c527ca}.nc-theme--default .nc-format__brace,.nc-theme--dark .nc-format__brace{color:#bc06f3}.nc-theme--default .nc-format__comment,.nc-theme--dark .nc-format__comment{color:#008b07}.nc-theme--default .nc-format__keyword,.nc-theme--dark .nc-format__keyword{color:#ac31d1}.nc-theme--default .nc-format__string,.nc-theme--dark .nc-format__string{color:#ca4a18}.nc-theme--default .nc-format__semicolon,.nc-theme--default .nc-format__colon,.nc-theme--dark .nc-format__semicolon,.nc-theme--dark .nc-format__colon{color:#f0f0f0}.nc-theme--default .nc-format__operator,.nc-theme--dark .nc-format__operator{color:#f0f0f0}.nc-theme--default .nc-format__comma,.nc-theme--default .nc-format__dot,.nc-theme--dark .nc-format__comma,.nc-theme--dark .nc-format__dot{color:#f0f0f0}.nc-theme--default .nc-format__number,.nc-theme--dark .nc-format__number{color:#3abd7f}.nc-theme--default .nc-format__const-value,.nc-theme--default .nc-format__access-modifier,.nc-theme--default .nc-format__declaration,.nc-theme--dark .nc-format__const-value,.nc-theme--dark .nc-format__access-modifier,.nc-theme--dark .nc-format__declaration{color:#396cca}.nc-theme--default .nc-format__type,.nc-theme--dark .nc-format__type{color:#22ad78}*{margin:0;padding:0;box-sizing:border-box}@keyframes cursor-anim{0%{opacity:.7}100%{opacity:0}}.nc-editor{position:relative;display:grid;height:100%;max-height:100%;width:100%;max-width:100%}.nc-editor__text{position:relative;width:100%;height:100%;overflow:hidden;background-color:#242424;user-select:none}.nc-editor__gutter{grid-area:1/1/2/2;height:100%;width:100%;border-right:1px solid #949494;background-color:#242424;color:#a7a7a7;max-height:100%;overflow:hidden;user-select:none}.nc-editor__scroll-bar{overflow-y:scroll;overflow-x:hidden;background-color:#242424;height:100%;width:100%;max-height:100%}.nc-editor__selection{overflow:hidden;cursor:text}.nc-editortext__wrapper{position:relative;width:100%}.nc-editor__input{position:absolute;height:0px;width:0px;opacity:0;user-select:none;max-height:0px}.nc-scroll__scrollable{width:15px;content:"x"}.nc-selection__cursor{position:absolute;padding:0;margin:2px 0px;width:2px;height:18px;z-index:1;left:0;top:1px;opacity:1;background-color:#fff;pointer-events:none;user-select:none}.nc-selection__cursor--animated{animation-name:cursor-anim;animation-duration:1.2s;animation-iteration-count:infinite;animation-timing-function:steps(2, jump-none)}.nc-selection__range{position:absolute;padding:0;margin:0px;pointer-events:none;user-select:none;background-color:rgba(50,148,240,.2)}.nc-selection__search{position:absolute;padding:0;margin:0px;pointer-events:none;user-select:none;border:1px solid rgba(228,199,36,.281);background-color:rgba(228,199,36,.295)}.nc-selection__search--active{background-color:rgba(36,228,46,.295)}.nc-text__multi-line{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:0em 0em 0em 1em;margin:0;max-width:100%;border-top:1px solid #242424;border-bottom:1px solid #242424;background-color:#242424;cursor:text;color:#fff;white-space:pre;box-sizing:border-box}.nc-text__multi-line--active{border-color:#535353;background-color:#313131}.nc-gutter__number{display:flex;justify-content:center;align-items:center;background-color:#242424;color:#999}.nc-gutter__number--active{background-color:#303030;color:#fff}.nc-search{position:absolute;top:0px;right:15px;z-index:5;background-color:#000;min-width:400px;border:1px solid #949494;border-top:0px;background-color:#242424;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:1em}.nc-search__main{display:flex;flex-direction:row;justify-content:center;align-items:flex-start}.nc-search__inputs{display:flex;flex-direction:column;justify-content:center;align-items:center}.nc-search__input{height:50px;min-height:50px;width:250px;min-width:250px;margin:5px;border:1px solid #949494;background-color:#363636;color:#fff}.nc-search__controls{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:1em 1em;width:120px}.nc-search__controls-container{display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%}.nc-search__button{padding:.5em;background-color:#242424;color:#dbdbdb;border:0px;cursor:pointer;font-size:15px;margin:0em 2px}.nc-search__button:hover{background-color:#363636}.nc-search__button--active{background-color:#363636}.nc-search__nav{padding:0px 5px;width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.nc-search__result{display:flex;justify-content:center;min-width:150px;color:#dbdbdb}.nc-format__word,.nc-format__bracket,.nc-format__square-bracket,.nc-format__brace,.nc-format__comment,.nc-format__keyword,.nc-format__space,.nc-format__string,.nc-format__semicolon,.nc-format__colon,.nc-format__comma,.nc-format__dot,.nc-format__number,.nc-format__declartion,.nc-format__type,.nc-format__const-value,.nc-format__access-modifier{white-space:pre}',""]);const a=r},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",i=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),i&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),i&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,i,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var h=0;h<e.length;h++){var c=[].concat(e[h]);i&&r[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},8081:e=>{e.exports=function(e){return e[1]}},7187:e=>{var t,s="object"==typeof Reflect?Reflect:null,i=s&&"function"==typeof s.apply?s.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)};t=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(s,i){function n(s){e.removeListener(t,o),i(s)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),s([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,s){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,s,i){var n,o,r,h;if(a(s),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,s.listener?s.listener:s),o=e._events),r=o[t]),void 0===r)r=o[t]=s,++e._eventsCount;else if("function"==typeof r?r=o[t]=i?[s,r]:[r,s]:i?r.unshift(s):r.push(s),(n=l(e))>0&&r.length>n&&!r.warned){r.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=r.length,h=c,console&&console.warn&&console.warn(h)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,s){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:s},n=c.bind(i);return n.listener=s,i.wrapFn=n,n}function d(e,t,s){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?s?[n.listener||n]:[n]:s?function(e){for(var t=new Array(e.length),s=0;s<t.length;++s)t[s]=e[s].listener||e[s];return t}(n):f(n,n.length)}function _(e){var t=this._events;if(void 0!==t){var s=t[e];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function f(e,t){for(var s=new Array(t),i=0;i<t;++i)s[i]=e[i];return s}function g(e,t,s,i){if("function"==typeof e.on)i.once?e.once(t,s):e.on(t,s);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){i.once&&e.removeEventListener(t,n),s(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var h=l.length,c=f(l,h);for(s=0;s<h;++s)i(c[s],this,t)}return!0},o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var s,i,n,o,r;if(a(t),void 0===(i=this._events))return this;if(void 0===(s=i[e]))return this;if(s===t||s.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,s.listener||t));else if("function"!=typeof s){for(n=-1,o=s.length-1;o>=0;o--)if(s[o]===t||s[o].listener===t){r=s[o].listener,n=o;break}if(n<0)return this;0===n?s.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(s,n),1===s.length&&(i[e]=s[0]),void 0!==i.removeListener&&this.emit("removeListener",e,r||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,s,i;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[e]),this;if(0===arguments.length){var n,o=Object.keys(s);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=s[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},o.prototype.listenerCount=_,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2545:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var i=s(3379),n=s.n(i),o=s(7795),r=s.n(o),a=s(569),l=s.n(a),h=s(3565),c=s.n(h),u=s(9216),d=s.n(u),_=s(4589),f=s.n(_),g=s(1144),p={};p.styleTagTransform=f(),p.setAttributes=c(),p.insert=l().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=d(),n()(g.Z,p);const m=g.Z&&g.Z.locals?g.Z.locals:void 0},3379:e=>{var t=[];function s(e){for(var s=-1,i=0;i<t.length;i++)if(t[i].identifier===e){s=i;break}return s}function i(e,i){for(var o={},r=[],a=0;a<e.length;a++){var l=e[a],h=i.base?l[0]+i.base:l[0],c=o[h]||0,u="".concat(h," ").concat(c);o[h]=c+1;var d=s(u),_={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(_);else{var f=n(_,i);i.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}r.push(u)}return r}function n(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,n){var o=i(e=e||[],n=n||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var a=s(o[r]);t[a].references--}for(var l=i(e,n),h=0;h<o.length;h++){var c=s(o[h]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},569:e=>{var t={};e.exports=function(e,s){var i=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5387:function(e,t,s){var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,n)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(6729),l=o(s(1213)),h=r(s(5834));t.default=class{constructor(e){this._undo=[],this._redo=[],this._transaction=!1,this._documentSession=e}get _latestVersion(){return this._undo[this._undo.length-1]}inserted(e,t){const s=t.split(/\r?\n|\r/g),i=new a.Point(e.line+s.length-1,s.length>1?s[s.length-1].length:e.offset+s[0].length),n=new l.default(l.HisotryOperations.Insert,e,i,t);this._latestVersion.push(n)}deleted(e,t,s){const i=new l.default(l.HisotryOperations.Delete,e,t,s);this._latestVersion.push(i)}swappedLinesUp(e){const t=new l.default(l.HisotryOperations.SwapLines,new a.Point(e-1,0),new a.Point(e,0),"");this._latestVersion.push(t)}swappedLinesDown(e){const t=new l.default(l.HisotryOperations.SwapLines,new a.Point(e,0),new a.Point(e+1,0),"");this._latestVersion.push(t)}startTransaction(){this._transaction=!0,this._undo.push(new h.default),this.clearRedo()}closeTransaction(){this._transaction=!1}undo(){const e=this._undo.pop();void 0!==e&&(this._applyChanges(e.reverseOperations),this._redo.push(e))}redo(){const e=this._redo.pop();void 0!==e&&(this._applyChanges(e.operations),this._undo.push(e))}clear(){this._redo=[],this._undo=[new h.default]}clearRedo(){this._redo=[]}_applyChanges(e){for(const t of e)switch(t.type){case l.HisotryOperations.Insert:{const e=t.pos.line,s=t.pos.offset;this._documentSession.document.insert(t.text,e,s),this._documentSession.updateLinesTokens(e),this._documentSession.emitLinesCountChanged(1),this._documentSession.emitEditEvent();break}case l.HisotryOperations.Delete:this._documentSession.document.remove(new a.Range(t.pos.line,t.pos.offset,t.endPos.line,t.endPos.offset)),this._documentSession.updateLinesTokens(t.pos.line),this._documentSession.emitLinesCountChanged(1),this._documentSession.emitEditEvent();break;case l.HisotryOperations.SwapLines:this._documentSession.document.swapLineWithNext(t.pos.line),this._documentSession.updateLinesTokens(t.pos.line),this._documentSession.emitLinesCountChanged(1),this._documentSession.emitEditEvent();break;default:throw new Error("Invalid operation type.")}}}},1213:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.HisotryOperations=void 0,function(e){e[e.Insert=0]="Insert",e[e.Delete=1]="Delete",e[e.SwapLines=2]="SwapLines"}(s=t.HisotryOperations||(t.HisotryOperations={}));class i{constructor(e,t,s,i){this.type=e,this.pos=t,this.endPos=s,this.text=i||""}getReverse(){switch(this.type){case s.Insert:return new i(s.Delete,this.pos,this.endPos,this.text);case s.Delete:return new i(s.Insert,this.pos,this.endPos,this.text);case s.SwapLines:return new i(s.SwapLines,this.pos,this.endPos,"");default:throw new Error("Invalid operation type.")}}}t.default=i},5834:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._operations=[]}push(e){this._operations.push(e)}get reverseOperations(){return this._operations.map((e=>e.getReverse())).reverse()}get operations(){return this._operations}}},6270:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(2313)),o=i(s(3392)),r=i(s(5954));class a extends r.default{getLines(e,t){const s=this._document;if(e>=s.linesCount)return[];e+t>s.linesCount&&(t=s.linesCount-e);const i=this._documentSession.tokenizerData,n=this._editSession.searchResults,r=s.getLines(e,t),a=i.getLinesTokens(e,t),l=n.getLinesResutls(e,t),h=[];for(let s=0;s<t;s++){const t=e+s,i=[];for(const e of l){if(!(e.start.line<=t&&e.end.line>=t))continue;let n=0,a=r[s].length;t===e.start.line&&(n=e.start.offset),t===e.end.line&&(a=e.end.offset);const l=new o.default(t,n,t,a);l.isActive=e.isActive,i.push(l)}h.push({rawText:r[s],tokens:a[s],lineBreaks:[],searchResults:i})}return h}getRows(e,t){const s=this.getLines(e,t),i=[];let n=0;for(const t of s)i.push({line:e+n,ord:0,offset:0,text:t.rawText,tokens:t.tokens,searchResults:t.searchResults}),n++;return i}getFirstLine(){const e=this._document,t=this._documentSession.tokenizerData,s=e.getFirstLine();return new n.default(s,t.getLineTokens(0),[])}getLastLine(){const e=this._document,t=this._documentSession.tokenizerData,s=e.getLastLine();return new n.default(s,t.getLineTokens(e.linesCount-1),[])}getTotalLinesCount(){return this._document.linesCount}getTotalRowsCount(){return this._editSession.isWrapEnabled?this._editSession.wrapData.rowsCount:this._document.linesCount}getFirstRowForLine(e){return this._editSession.isWrapEnabled?this._editSession.wrapData.getFirstRowForLine(e):e}getSelectedText(){let e="";for(const t of this._editSession.selections.getSelections())e+=this._document.getText(t);return e}}t.default=a},5954:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this._documentSession=e,this._editSession=t}get _document(){return this._documentSession.document}}},8772:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(2313)),o=i(s(3392)),r=i(s(5954));class a extends r.default{getLines(e,t){const s=this._document;if(e>=s.linesCount)return[];e+t>=s.linesCount&&(t=s.linesCount-e);const i=this._documentSession.tokenizerData,n=this._editSession.searchResults,r=s.getLines(e,t),a=i.getLinesTokens(e,t),l=n.getLinesResutls(e,t),h=[];for(let s=0;s<t;s++){const t=e+s,i=[];for(const e of l){if(!(e.start.line<=t&&e.end.line>=t))continue;let n=0,a=r[s].length;t===e.start.line&&(n=e.start.offset),t===e.end.line&&(a=e.end.offset);const l=new o.default(t,n,t,a);l.isActive=e.isActive,i.push(l)}h.push({rawText:r[s],tokens:a[s],lineBreaks:[],searchResults:[]})}return h}getRows(e,t){const s=this._document,i=this._documentSession.tokenizerData,n=this._editSession.searchResults,r=this._editSession.wrapData;if(e>r.rowsCount)return[];e+t>r.rowsCount&&(t=r.rowsCount-e);const a=r.getRows(e,t),l=a.map((e=>e.line)),h=Math.min(...l),c=Math.max(...l)-h+1;let u=[];h<s.linesCount&&(u=h+c<s.linesCount?s.getLines(h,c):s.getLines(h,s.linesCount-h));const d=i.getLinesTokens(h,c),_=n.getLinesResutls(h,c),f=[];let g=0,p=-1;if(a.length>0&&0!==a[0].ord){const t=r.getRows(e-1,1)[0];g=t.offset,p=t.line}for(const e of a){const t=e.line-h,s=e.line;if(u.length<t)break;if(u.length<=t)break;p!==e.line&&(g=0),p=e.line;const i=u[t],n=d[t],r=[];for(let t=0;t<n.length;t++){const s=n[t];if(s.startIndex<g){if(t+1===n.length)continue;if(n[t+1].startIndex<=g)continue;r.push({startIndex:0,type:s.type})}else{if(!(s.startIndex<e.offset))break;r.push({startIndex:s.startIndex-g,type:s.type})}}const a=[];for(const e of _){if(!(e.start.line<=s&&e.end.line>=s))continue;let t=0,n=i.length;s===e.start.line&&(t=e.start.offset),s===e.end.line&&(n=e.end.offset);const r=new o.default(s,t,s,n);r.isActive=e.isActive,a.push(r)}const l=[];for(const t of a){if(t.start.offset<=g&&t.end.offset<=g||t.start.offset>=e.offset&&t.end.offset>=e.offset)continue;const i=Math.max(t.start.offset,g),n=Math.min(t.end.offset,e.offset),r=new o.default(s,i-g,s,n-g);r.isActive=t.isActive,l.push(r)}f.push({line:e.line,ord:e.ord,offset:g,text:i.slice(g,e.offset),tokens:r,searchResults:l}),g=e.offset}return f}getFirstLine(){const e=this._document,t=this._documentSession.tokenizerData,s=e.getFirstLine();return new n.default(s,t.getLineTokens(0),[])}getLastLine(){const e=this._document,t=this._documentSession.tokenizerData,s=e.getLastLine();return new n.default(s,t.getLineTokens(e.linesCount-1),[])}getTotalLinesCount(){return this._document.linesCount}getTotalRowsCount(){return this._editSession.isWrapEnabled?this._editSession.wrapData.rowsCount:this._document.linesCount}getFirstRowForLine(e){return this._editSession.isWrapEnabled?this._editSession.wrapData.getFirstRowForLine(e):e}getSelectedText(){let e="";for(const t of this._editSession.selections.getSelections())e+=this._document.getText(t);return e}}t.default=a},6656:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(5387)),o=s(7183),r=s(2197),a=s(6924),l=i(s(6165)),h=s(8593),c=s(6606),u=s(1547);class d extends o.EventEmitter{constructor(e,t=null,s=null){super(),this._updateTokensAfterEdit=!0,this._shouldEmitLinesCountChangeEvent=!0,this._shouldEmitEditEvent=!0,this._indentType=u.IndentType.TABS,this._indentSize=4,this._id=(0,h.randomId)(10),this._document=e,this._mode=t||r.MODES.default,this._tokenizerData=null===s?new l.default:s,this._documentHistory=new n.default(this),this._detectTextIndents()}get id(){return this._id}get document(){return this._document}get tokenizerData(){return this._tokenizerData}get mode(){return this._mode}set mode(e){this._mode=e}get modeName(){return this._mode.name}get history(){return this._documentHistory}get indentType(){return this._indentType}get indentSize(){return this._indentSize}updateLinesTokens(e){this._updateTokensAfterEdit&&(this._mode.tokenizer.updateTokens(this._document,this._tokenizerData,e),this._document.linesCount<e+1&&this._mode.tokenizer.updateTokens(this._document,this._tokenizerData,e+1))}setMode(e){const t=(0,r.getMode)(e);this._mode=t,this.tokenize()}emitLinesCountChanged(e){this._shouldEmitLinesCountChangeEvent&&0!==e&&this.emit(c.EvDocument.LinesCount,{linesCount:this._document.linesCount})}emitEditEvent(){this._shouldEmitEditEvent&&this.emit(c.EvDocument.Edited,void 0)}tokenize(){const e=this._document;this.mode.tokenizer.tokenize(e,this._tokenizerData),this.emit(c.EvTokenizer.Finished,void 0)}enableTokenization(){this._updateTokensAfterEdit=!0,this.tokenize()}disableTokenization(){this._tokenizerData.clear(),this._updateTokensAfterEdit=!1,this.emit(c.EvTokenizer.Finished,void 0)}enableEditEvent(){this._shouldEmitEditEvent=!0}disableEditEvent(){this._shouldEmitEditEvent=!1}enableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!0}disableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!1}emitInitEvents(){const e=this._document;this.emit(c.EvDocument.LinesCount,{linesCount:e.linesCount}),this.emit(c.EvTokenizer.Finished,void 0)}undo(){this._documentHistory.undo()}redo(){this._documentHistory.redo()}setIndentType(e){this._indentType=e}setIndentSize(e){this._indentSize=e}_detectTextIndents(){for(let e=0;e<this._document.linesCount;e++){const t=this._document.getLine(e),s=(0,a.getLineIndent)(t);if(!(s.length<1)){if(s.startsWith(" ")){this._indentSize=s.length,this._indentType=u.IndentType.SPACES;break}if(s.startsWith("\t")){this._indentSize=4,this._indentType=u.IndentType.TABS;break}}}}}t.default=d},6606:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.EvDocument=t.EvTokenizer=void 0,(t.EvTokenizer||(t.EvTokenizer={})).Finished="tokenizer.Tokenized",(s=t.EvDocument||(t.EvDocument={})).Edited="editor.Document.Edit",s.LinesCount="editor.Document.LinesCount",s.Set="editor.Document.Set"},1547:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.IndentType=void 0,(s=t.IndentType||(t.IndentType={}))[s.SPACES=0]="SPACES",s[s.TABS=1]="TABS"},5332:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IndentType=t.DocumentSession=void 0;const n=i(s(6656));t.DocumentSession=n.default;const o=s(1547);Object.defineProperty(t,"IndentType",{enumerable:!0,get:function(){return o.IndentType}})},8463:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(5332),n=s(4576),o=s(6729),r=s(6924);t.default=class{constructor(e,t){this._documentSession=e,this._editSession=t}get _document(){return this._documentSession.document}insert(e){const t=this._document,s=this._editSession,i=this._documentSession,n=s.selections.getSelections();i.history.startTransaction(),s.history.createSnapshot();for(const e of n){if(e.isCollapsed)continue;const n=t.remove(e);i.history.deleted(new o.Point(e.start.line,e.start.offset),new o.Point(e.end.line,e.end.offset),n);const r=n.split("\n");i.updateLinesTokens(e.start.line),s.wrapper.removeLines(e.start.line+1,r.length-1),s.wrapper.updateLines(e.start.line,r.length+1),r.length>0&&s.updateRemovedLinesSearchResults(e.start.line+1,r.length-1),i.emitLinesCountChanged(e.end.line-e.start.line),s.updateSelctions(e.start.line,e.start.offset,1-r.length,-(e.end.offset-e.start.offset))}for(const r of n){const n=r.start.line,a=r.start.offset,l=t.insert(e,n,a);i.history.inserted(new o.Point(r.start.line,r.start.offset),e),s.wrapper.insertNewLines(r.start.line+1,l[0]),s.wrapper.updateLines(r.start.line,l[0]+1),i.updateLinesTokens(n),l[0]>0&&s.updateNewLinesSearchResults(n+1,l[0]),s.updateLineSearchResults(n),s.updateSelctions(n,a,l[0],l[1])}i.history.closeTransaction(),i.emitLinesCountChanged(1),i.emitEditEvent()}remove(e=0){const t=this._document,s=this._editSession,i=this._documentSession,n=s.selections.getSelections();i.history.startTransaction(),s.history.createSnapshot();let r="";for(const a of n){if(a.isCollapsed){if(0===a.start.offset&&0===e){if(0===a.start.line)continue;{a.start.line-=1;const e=t.getLine(a.start.line);a.start.offset=e.length+1}}if(1===e){const e=t.getLine(a.start.line);a.end.offset===e.length&&a.end.line+1!==t.linesCount?(a.end.offset=0,a.end.line+=1):a.end.offset=a.end.offset+1}else a.start.offset=a.start.offset-1}const n=t.remove(a);i.history.deleted(new o.Point(a.start.line,a.start.offset),new o.Point(a.end.line,a.end.offset),n);const l=n.split("\n");i.updateLinesTokens(a.start.line),s.wrapper.removeLines(a.start.line+1,l.length-1),s.wrapper.updateLines(a.start.line,l.length+1),l.length>0&&s.updateRemovedLinesSearchResults(a.start.line+1,l.length-1),s.updateLineSearchResults(a.start.line),i.emitLinesCountChanged(a.end.line-a.start.line),s.updateSelctions(a.start.line,a.start.offset,1-l.length,-(a.end.offset-a.start.offset)),r+=n}return i.history.closeTransaction(),i.emitEditEvent(),r}removeWordBefore(){const e=this._document,t=this._editSession.selections.getSelections();for(const s of t){if(!s.isCollapsed)continue;const t=(0,r.removeAccents)(e.getLine(s.start.line)),i=(0,r.getWordBefore)(t,s.start.offset);s.start.offset-=i.length}return this.remove()}removeWordAfter(){const e=this._document,t=this._editSession.selections.getSelections();for(const s of t){if(!s.isCollapsed)continue;const t=(0,r.removeAccents)(e.getLine(s.start.line)),i=(0,r.getWordAfter)(t,s.start.offset);s.end.offset+=i.length}return this.remove(1)}cut(){const e=this.remove();navigator.clipboard.writeText(e)}copy(){const e=this._document,t=this._editSession.selections.getSelections();let s="";for(const i of t)i.isCollapsed||(s+=e.getText(i));navigator.clipboard.writeText(s)}swapLinesUp(){const e=this._document,t=this._editSession,s=this._documentSession,i=t.selections.getSelections();if(s.history.startTransaction(),t.history.createSnapshot(),1!==i.length)return;const n=i[0];if(0===n.start.line)return;let o=n.start.line;for(;o<n.end.line+1;)e.swapLineWithPrevious(o),s.history.swappedLinesUp(o),o++;t.wrapper.updateLines(n.start.line-1,2),s.updateLinesTokens(n.start.line-1),n.start.line-=1,n.end.line-=1,s.history.closeTransaction(),t.emitSelectionChangedEvent(),s.emitEditEvent()}swapLinesDown(){const e=this._document,t=this._editSession,s=this._documentSession,i=t.selections.getSelections();if(s.history.startTransaction(),t.history.createSnapshot(),1!==i.length)return;const n=i[0];if(n.end.line===e.linesCount-1)return;let o=n.end.line;for(;o>n.start.line-1;)e.swapLineWithNext(o),s.history.swappedLinesDown(o),o--;t.wrapper.updateLines(n.start.line,2),s.updateLinesTokens(n.start.line),n.start.line+=1,n.end.line+=1,s.history.closeTransaction(),t.emitSelectionChangedEvent(),s.emitEditEvent()}indentSelectedLines(e="\t"){const t=this._document,s=this._editSession,i=this._documentSession,n=s.getActiveLinesNumbers();if(i.history.startTransaction(),s.history.createSnapshot(),!(n.size<2)){for(const r of n)t.insert(e,r,0),i.history.inserted(new o.Point(r,0),e),i.updateLinesTokens(r),s.wrapper.updateLines(r,1),s.updateSelctions(r,0,0,1);i.history.closeTransaction(),i.emitEditEvent()}}removeIndentFromSelectedLines(e="\t"){const t=this._document,s=this._editSession,i=this._documentSession,n=s.getActiveLinesNumbers();i.history.startTransaction(),s.history.createSnapshot();for(const r of n)t.getLine(r).startsWith(e)&&(t.remove(new o.Range(r,0,r,e.length)),i.history.deleted(new o.Point(r,0),new o.Point(r,e.length),e),i.updateLinesTokens(r),s.wrapper.updateLines(r,1),s.updateSelctions(r,0,0,1));i.history.closeTransaction(),i.emitEditEvent()}replaceSearchResult(e){const t=this._editSession.searchResults;if(0===t.matchCount)return;const s=t.getActiveSearchResPosition(),i=new o.Selection(s.start.line,s.start.offset,s.end.line,s.end.offset);this._editSession.setSelection(i),this.insert(e)}replaceAllSearchResult(e){this._editSession.selections.clear();const t=this._document,s=this._editSession,i=this._documentSession,n=this._editSession.searchResults;let r;i.history.startTransaction(),s.history.createSnapshot();const a=new o.Point(0,0);for(;null!==(r=this._editSession.findNextOccurnece(a.line,a.offset));){const s=new o.Selection(r.start.line,r.start.offset,r.end.line,r.end.offset),n=t.remove(s);i.history.deleted(new o.Point(s.start.line,s.start.offset),new o.Point(s.end.line,s.end.offset),n);const l=t.insert(e,s.start.line,s.start.offset);i.history.inserted(new o.Point(s.start.line,s.start.offset),e),i.updateLinesTokens(s.start.line),a.line=s.start.line+l[0],l[0]>0?a.offset=l[1]:a.offset=s.start.offset+l[1]}s.wrapper.wrap(),s.search(n.phrase),i.emitLinesCountChanged(1),i.history.closeTransaction(),i.emitEditEvent(),this._editSession.onlyLastSelection()}changeIndentToTabs(){const e=this._documentSession;this._changeIndent(((t,s)=>{if(t===i.IndentType.SPACES){const t=Math.round(s/e.indentSize);return"\t".repeat(t)}return"\t".repeat(s)}),i.IndentType.TABS,1)}changeIndentToSpaces(e=4){const t=this._documentSession;this._changeIndent(((s,n)=>{if(s===i.IndentType.SPACES){const s=Math.round(n/t.indentSize)*e;return" ".repeat(s)}return" ".repeat(n*e)}),i.IndentType.SPACES,e)}changeIndentSize(e){this.changeIndentToSpaces(e)}_changeIndent(e,t,s){const r=this._documentSession,a=this._editSession,l=new n.RegExpSearch,h=this._document,c=new n.SerachResults;let u="";u=r.indentType===i.IndentType.SPACES?"^  *":"^\t\t*",l.search(u,h,c),r.history.startTransaction(),a.history.createSnapshot();for(let t=0;t<h.linesCount;t++){const s=c.getLineResutls(t);if(s.length<1)continue;const i=s[0],n=i.end.offset,a=h.remove(i);r.history.deleted(new o.Point(i.start.line,i.start.offset),new o.Point(i.end.line,i.end.offset),a);const l=e(r.indentType,n);h.insert(l,i.start.line,i.start.offset),r.history.inserted(new o.Point(i.start.line,i.start.offset),l),r.updateLinesTokens(i.start.line)}r.setIndentType(t),r.setIndentSize(s),a.wrapper.wrap(),a.search(a.searchResults.phrase),r.history.closeTransaction(),r.emitEditEvent(),this._editSession.onlyLastSelection()}}},6907:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(6729),o=i(s(7992));t.default=class{constructor(e){this._tree=new o.default,this.insert(e,0,0)}insert(e,t,s){if(0===e.length&&!this._tree.isEmpty)return[0,0];this._tree.isEmpty&&this._tree.insert("",0);const i=this._tree.getNode(t);if(null===i)return[0,0];const n=e.split(/\r?\n|\r/g);if(1===n.length)i.data=i.data.slice(0,s)+e+i.data.slice(s);else{const e=i.data.slice(s);i.data=i.data.slice(0,s)+n[0];let o=null;for(let e=1;e<n.length;e++){const s=n[e];o=this._tree.insert(s,t+e)}null!==o&&(o.data+=e)}return[n.length-1,n[n.length-1].length]}remove(e){const t=this._tree.getNode(e.start.line);if(null===t)return"";if(e.start.line===e.end.line){const s=t.data.slice(e.start.offset,e.end.offset);return t.data=t.data.slice(0,e.start.offset)+t.data.slice(e.end.offset),s}let s=t.data.slice(e.start.offset);t.data=t.data.slice(0,e.start.offset);const i=e.end.line-e.start.line-1;for(let t=0;t<i;t++){const t=this._tree.getNode(e.start.line+1);if(null===t)return s;s+="\n"+t.data,this._tree.removeNode(e.start.line+1)}const n=this._tree.getNode(e.start.line+1);return null===n||(s+="\n"+n.data.slice(0,e.end.offset),t.data+=n.data.slice(e.end.offset),this._tree.removeNode(e.start.line+1)),s}get linesCount(){return this._tree.nodesCount}get text(){return this.getText(new n.Range(0,0,1/0,1/0))}getText(e){const t=this._tree.getNode(e.start.line);if(null===t)return"";if(e.start.line===e.end.line)return t.data.substring(e.start.offset,e.end.offset);let s=t.data.substring(e.start.offset);const i=e.end.line-e.start.line,n=this._tree.getNodesData(e.start.line+1,i);for(let e=0;e<i-1;e++)s+="\n"+n[e];return s+="\n"+n[n.length-1].substring(0,e.end.offset),s}getLines(e,t){return this._tree.getNodesData(e,t)}getLine(e){return this._tree.getData(e)}getFirstLine(){var e;return null!==(e=this._tree.getFirstNodeData())&&void 0!==e?e:""}getLastLine(){var e;return null!==(e=this._tree.getLastNodeData())&&void 0!==e?e:""}removeLine(e){this._tree.removeNode(e)}insertLineAfter(e,t){this._tree.insert(e,t+1)}insertLineBefore(e,t){this._tree.insert(e,t)}swapLineWithNext(e){this._tree.swapNodeWithNext(e)}swapLineWithPrevious(e){return this._tree.swapNodeWithNext(e-1)}}},1117:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Line=t.Document=void 0;const n=i(s(6907));t.Document=n.default;const o=i(s(2313));t.Line=o.default},2313:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Row=void 0,t.default=class{constructor(e,t,s,i=[]){this.rawText="",this.tokens=[],this.lineBreaks=[],this.searchResults=[],this.rawText=e,this.tokens=t,this.lineBreaks=s,this.searchResults=i}},t.Row=class{constructor(e,t,s,i,n,o){this.line=e,this.ord=t,this.offset=s,this.text=i,this.tokens=n,this.searchResults=o}}},2308:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(6270)),o=i(s(8772)),r=i(s(8463)),a=s(7183),l=s(2197),h=s(4576),c=i(s(1859)),u=i(s(700)),d=s(2528),_=s(8593),f=i(s(7285)),g=i(s(77)),p=s(4938);class m extends a.EventEmitter{constructor(e){super(),this._useRegExp=!1,this._searchAfterEdit=!1,this._shouldUpdateSelections=!0,this._useWrapData=!1,this._visibleColumnsCount=150,this.letterWidth=0,this._id=(0,_.randomId)(10),this._documentSession=e,this._highlightingSchema=(0,l.getMode)(e.modeName).schema,this._selectionManager=new u.default(this._document),this._selectionHistory=new c.default(this),this._searchResults=new h.SerachResults,this._reader=new n.default(this._documentSession,this),this._writer=new r.default(this._documentSession,this),this._wrapper=new g.default(this),this._wrapData=new f.default,this._search=new h.NaiveSearch}get id(){return this._id}get reader(){return this._reader}get writer(){return this._writer}get selections(){return this._selectionManager}get history(){return this._selectionHistory}get searchResults(){return this._searchResults}get documentSession(){return this._documentSession}get highlightingSchema(){return this._highlightingSchema}get wrapper(){return this._wrapper}get wrapData(){return this._wrapData}get isWrapEnabled(){return this._useWrapData}get visibleColumnsCount(){return this._visibleColumnsCount}get _document(){return this._documentSession.document}get caseSensitiveSearch(){return this._searchResults.caseSensitive}get selectionSearch(){return this._searchResults.searchInSelection}get regexpSearch(){return this._useRegExp}enableSearchAfterEdit(){this._searchAfterEdit=!0}disableSearchAfterEdit(){this._searchAfterEdit=!1}updateLineSearchResults(e){this._searchAfterEdit&&(this._search.updateLineSearchResults(this._document,this._searchResults,e),this.emit(p.EvSearch.Finished,void 0))}updateLinesSearchResults(e,t){this._searchAfterEdit&&(this._search.updateLinesSearchResults(this._document,this._searchResults,e,t),this.emit(p.EvSearch.Finished,void 0))}updateNewLinesSearchResults(e,t){this._searchAfterEdit&&(this._search.updateNewLinesSearchResults(this._document,this._searchResults,e,t),this.emit(p.EvSearch.Finished,void 0))}updateRemovedLinesSearchResults(e,t){this._searchAfterEdit&&(this._search.updateRemovedLinesSearchResults(this._document,this._searchResults,e,t),this.emit(p.EvSearch.Finished,void 0))}findNextOccurnece(e,t){return this._search.findNextOccurence(this._document,this._searchResults,e,t)}updateSelctions(e,t,s,i){this._selectionManager.update(e,t,s,i),this._emitSelectionChangedEvent()}search(e){const t=this._document;this._searchResults.searchInSelection?this._search.searchInLines(e,t,this.searchResults,this._selectionManager.getActiveLinesNumbers()):this._search.search(e,t,this.searchResults),this.emit(p.EvSearch.Finished,void 0)}getSelctions(){return this._selectionManager.getSelections()}setSelection(e){this._selectionManager.setSelection(e),this._emitSelectionChangedEvent()}addSelection(e){this._selectionManager.addSelection(e),this._emitSelectionChangedEvent()}extendLastSelection(e){this._selectionManager.extendLastSelection(e),this._emitSelectionChangedEvent()}selectAll(){this._selectionManager.selectAll(),this._emitSelectionChangedEvent()}collapseSelectionToLeft(){this._selectionManager.collapseSelectionToLeft(),this._emitSelectionChangedEvent()}collapseSelectionToRight(){this._selectionManager.collapseSelectionToRight(),this._emitSelectionChangedEvent()}collapseSelectionToTop(){this._selectionManager.collapseSelectionToTop(),this._emitSelectionChangedEvent()}collapseSelectionToBottom(){this._selectionManager.collapseSelectionToBottom(),this._emitSelectionChangedEvent()}collapseSelectionToHome(){this._selectionManager.collapseSelectionToHome(),this._emitSelectionChangedEvent()}collapseSelectionToEnd(){this._selectionManager.collapseSelectionToEnd(),this._emitSelectionChangedEvent()}selectWordBefore(){this._selectionManager.selectWordBefore(),this._emitSelectionChangedEvent()}selectWordAfter(){this._selectionManager.selectWordAfter(),this._emitSelectionChangedEvent()}selectWordAt(e,t){this._selectionManager.selectWordAt(e,t),this._emitSelectionChangedEvent()}selectStartOfTheLine(){this._selectionManager.selectStartOfTheLine(),this._emitSelectionChangedEvent()}selectEndOfTheLine(){this._selectionManager.selectEndOfTheLine(),this._emitSelectionChangedEvent()}moveSelectionWordBefore(){this._selectionManager.moveSelectionWordBefore(),this._emitSelectionChangedEvent()}moveSelectionWordAfter(){this._selectionManager.moveSelectionWordAfter(),this._emitSelectionChangedEvent()}onlyLastSelection(){this._selectionManager.onlyLastSelection(),this._emitSelectionChangedEvent()}selectLine(e){this._selectionManager.selectLine(e),this._emitSelectionChangedEvent()}emitSelectionChangedEvent(){this._emitSelectionChangedEvent()}enableSelectionsUpdates(){this._selectionManager.enableUpdatingSelections(),this._shouldUpdateSelections=!0}disableSelectionsUpdates(){this._selectionManager.disableUpdatingSelections(),this._shouldUpdateSelections=!1}getActiveLinesNumbers(e=0,t=1/0){return this._selectionManager.getActiveLinesNumbers(e,t)}getActiveRowsNumbers(e=0,t=1/0){if(!this._useWrapData){const s=this._selectionManager.getCursorsPositions().filter((({line:s})=>e<=s&&s<=e+t)),i=new Set;for(const e of s)i.add(e.line);return i}const s=this._wrapData.getRows(e,t);if(0===s.length)return new Set;const i=s[0].line,n=s[s.length-1].line,o=this._selectionManager.getCursorsPositions().filter((({line:e})=>i<=e&&e<=n)),r=new Set;let a=-1,l=-1;for(let t=0;t<s.length;t++){const i=s[t];i.line!==l&&(a=-1);for(const s of o)if(s.line===i.line&&a<s.offset&&s.offset<=i.offset){r.add(e+t);break}a=i.offset,l=i.line}return r}getSelectedLinesCount(){return this._selectionManager.getSelectedLinesCount()}extendRectangleSelection(e){this._selectionManager.extendRectangleSelection(e),this._emitSelectionChangedEvent()}getSearchPhrase(){return this._searchResults.phrase}getSearchMatchCount(){return this._searchResults.matchCount}_emitSelectionChangedEvent(){this.emit(p.EvSelection.Changed,void 0)}undo(){this._documentSession.undo(),this._wrapper.wrap(),this._selectionHistory.undo(),this._documentSession.emitEditEvent(),this.emitSelectionChangedEvent()}redo(){this._documentSession.redo(),this._wrapper.wrap(),this._selectionHistory.redo(),this._documentSession.emitEditEvent(),this.emitSelectionChangedEvent()}enableWrap(){this._useWrapData=!0,this._reader=new o.default(this.documentSession,this),this._wrap()||this.emit(d.EvWrap.Changed,{enabled:!0})}disableWrap(){this._useWrapData=!1,this._reader=new n.default(this.documentSession,this),this.emit(d.EvWrap.Changed,{enabled:!1})}setVisibleColumnsCount(e){this._visibleColumnsCount=e,this._wrap()}_wrap(){return!(!this._useWrapData||this._wrapData.maxRowLength===this._visibleColumnsCount||(this._wrapData.maxRowLength=this._visibleColumnsCount,this._wrapper.wrap(),this.emit(d.EvWrap.Changed,{enabled:!0}),0))}nextSearchResult(){this._searchResults.nextResult(),this.emit(p.EvSearch.Finished,void 0)}prevSearchResult(){this._searchResults.prevResult(),this.emit(p.EvSearch.Finished,void 0)}setCaseSensitiveSearch(e){e?this.enableCaseSensitiveSearch():this.disableCaseSensitiveSearch()}enableCaseSensitiveSearch(){return this._searchResults.caseSensitive=!0,this.search(this._searchResults.phrase),this._searchResults.caseSensitive}disableCaseSensitiveSearch(){return this._searchResults.caseSensitive=!1,this.search(this._searchResults.phrase),this._searchResults.caseSensitive}toggleCaseSensitiveSearch(){return this._searchResults.caseSensitive=!this._searchResults.caseSensitive,this.search(this._searchResults.phrase),this._searchResults.caseSensitive}setSelectionSearch(e){e?this.enableSelectionSearch():this.disableSelectionSearch()}enableSelectionSearch(){return this._searchResults.searchInSelection=!0,this.search(this._searchResults.phrase),this._searchResults.caseSensitive}disableSelectionSearch(){return this._searchResults.searchInSelection=!1,this.search(this._searchResults.phrase),this._searchResults.caseSensitive}toggleSelectionSearch(){return this._searchResults.searchInSelection=!this._searchResults.searchInSelection,this.search(this._searchResults.phrase),this._searchResults.searchInSelection}setRegExpSearch(e){e?this.enableRegExpSearch():this.disableRegExpSearch()}enableRegExpSearch(){return this._useRegExp=!0,this._search=new h.RegExpSearch,this.search(this._searchResults.phrase),this._searchResults.caseSensitive}disableRegExpSearch(){return this._useRegExp=!1,this._search=new h.NaiveSearch,this.search(this._searchResults.phrase),this._searchResults.caseSensitive}toggleRegExpSearch(){return this._useRegExp=!this._useRegExp,this._useRegExp?this._search=new h.RegExpSearch:this._search=new h.NaiveSearch,this.search(this._searchResults.phrase),this._useRegExp}}t.default=m},4938:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EvSearch=t.EvSelection=void 0,(t.EvSelection||(t.EvSelection={})).Changed="editor.Selection.Changed",(t.EvSearch||(t.EvSearch={})).Finished="editor.Search.Finished"},9144:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(6656)),o=i(s(2308)),r=s(7183),a=s(2197),l=s(2781);class h extends r.EventEmitter{constructor(){super(...arguments),this._documentSessions=new Map,this._editSessions=new Map,this._latestDocId=null}setDocumentMode(e,t){if(!(e in a.MODES))throw new Error("Mode with given name doesn't exist.");const s=this.getDocumentSession(t);s.mode=a.MODES[e],s.tokenize()}addDocument(e,t=null,s="default"){null===t&&(t="");const i=new n.default(e);return i.setMode(s),this._documentSessions.set(i.id,i),this._latestDocId=i.id,this.emit(l.EvDocument.Set,void 0),i.emitLinesCountChanged(1/0),i.id}getDocumentSession(e){const t=this._documentSessions.get(e);if(!t)throw new Error("Document with given id doesn't exist.");return t}getLatestDocumentId(){return this._latestDocId}deleteDocument(e){if(!(e in this._documentSessions))throw new Error("Document with given id doesn't exist.");throw new Error("Not implemented")}createSession(e){const t=this._documentSessions.get(e);if(!t)throw new Error("Document with given id doesn't exist.");const s=new o.default(t);return this._editSessions.set(s.id,s),s.id}getSession(e){const t=this._editSessions.get(e);if(!t)throw new Error("Document with given id doesn't exist.");return t}getEditSessionForDocument(e){let t;if(this._editSessions.forEach((s=>{s.documentSession.id===e&&(t=s)})),t)return t;const s=this.createSession(e);if(t=this._editSessions.get(s),!t)throw new Error("?");return t}deleteSession(e){if(!(e in this._editSessions))throw new Error("Session with given id doesn't exist.");this._editSessions.delete(e)}}t.default=h},2781:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.EvSearch=t.EvSelection=t.EvDocument=t.EvTokenizer=void 0,(t.EvTokenizer||(t.EvTokenizer={})).Finished="tokenizer.Tokenized",(s=t.EvDocument||(t.EvDocument={})).Set="editor.Document.Set",s.Edited="editor.Document.Edit",s.LinesCount="editor.Document.LinesCount",(t.EvSelection||(t.EvSelection={})).Changed="editor.Selection.Changed",(t.EvSearch||(t.EvSearch={})).Finished="editor.Search.Finished"},7708:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=void 0;const n=i(s(9144));t.Editor=n.default},2957:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;const i=s(7187);t.EventEmitter=class{constructor(){this._emitter=new i.EventEmitter}on(e,t){this._emitter.on(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}}},7183:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;const i=s(2957);Object.defineProperty(t,"EventEmitter",{enumerable:!0,get:function(){return i.EventEmitter}})},7683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,s){this._tokenizer=e,this._highlighterSchema=t,this._name=s}get schema(){return this._highlighterSchema}get tokenizer(){return this._tokenizer}get name(){return this._name}}},252:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSMode=t.JSTokenizer=void 0;const n=i(s(7683)),o=i(s(1638));t.JSTokenizer=o.default;const r=s(4841),a=new n.default(new o.default,r.JSHighlighterSchema,"javascript");t.JSMode=a},1638:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(6924),n=s(4841),o=s(9042),r=s(1608);class a extends o.Tokenizer{constructor(){super(...arguments),this.KEYWORDS=["abstract","await","break","case","catch","continue","debugger","default","do","else","enum","export","extends","finally","for","from","function","goto","if","implements","import","in","package","return","switch","throw","try","while","with","yield"],this.ACCESS_MODIFIRES=["public","private","protected","static"],this.LITERALS=["true","false","null","void","this","constructor","Infinity","super","NaN","undefined"],this.DEC_KEYWORDS=["let","const","var","type","interface","class","delete","new","interface","instanceof","typeof"],this.BASE_TYPES=["Array","Date","Math","Number","Object","String"]}tokenize(e,t){t.clear();let s={scope:""};for(let i=0;i<e.linesCount;i++){const n=e.getLine(i),o=this._makeLineData(n,s);t.insertLine(o,i),s=o.state}}updateTokens(e,t,s){if(e.linesCount!==t.linesCount){const i=e.linesCount-t.linesCount;for(let e=0;e<i;e++)t.insertLine({tokens:[],state:{scope:""},length:0},s+e)}let i,n,o,a=s,l=t.getLineData(a-1).state;do{i=e.getLine(a),o=t.getLineData(a),n=this._makeLineData(i,l),t.setLineData(a,n),l={scope:""},a++}while(a<e.linesCount&&!(0,r.compareLineData)(o,n))}_makeLineData(e,t){if(0===e.length)return{tokens:[],state:Object.assign({},t),length:0};const s=[],o=(0,i.removeAccents)(e);let r=0;for(;r<o.length;){const e=r;for(;r<o.length&&(0,i.isWhiteSpaceChar)(o[r]);)r++;if(r!=e&&s.push({type:n.JSTokens.WHITE_SPACE,startIndex:e}),r===o.length)break;switch(o[r]){case"(":s.push({type:n.JSTokens.OPEN_BRACKET,startIndex:r}),r++;break;case")":s.push({type:n.JSTokens.CLOSE_BRACKET,startIndex:r}),r++;break;case"{":s.push({type:n.JSTokens.OPEN_BRACE,startIndex:r}),r++;break;case"}":s.push({type:n.JSTokens.CLOSE_BRACE,startIndex:r}),r++;break;case"[":s.push({type:n.JSTokens.OPEN_SQUARE_BRACKET,startIndex:r}),r++;break;case"]":s.push({type:n.JSTokens.CLOSE_SQUARE_BRACKET,startIndex:r}),r++;break;case":":s.push({type:n.JSTokens.COLON,startIndex:r}),r++;break;case";":s.push({type:n.JSTokens.SEMICOLON,startIndex:r}),r++;break;case".":s.push({type:n.JSTokens.DOT,startIndex:r}),r++;break;case",":s.push({type:n.JSTokens.COMMA,startIndex:r}),r++;break;case"+":case"-":case"*":case"=":case"!":case"&":case"|":case"<":case">":case"?":s.push({type:n.JSTokens.OPERATOR,startIndex:r}),r++;break;case"/":if(r+1<o.length&&"/"===o[r+1])return s.push({type:n.JSTokens.COMMENT,startIndex:r}),{tokens:s,state:{scope:""},length:o.length};s.push({type:n.JSTokens.OPERATOR,startIndex:r}),r++;break;case"'":{const e=r;for(r++;r<o.length&&"'"!==o[r];)r++;s.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}case'"':{const e=r;for(r++;r<o.length&&'"'!==o[r];)r++;s.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}case"`":{const e=r;for(r++;r<o.length&&"`"!==o[r];)r++;s.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}default:{let e="";if((0,i.isAlpha)(o[r])){const t=r;for(;r<o.length&&(0,i.isAlphaNumeric)(o[r]);)e+=o[r],r++;this._isWordInList(e,this.KEYWORDS)?s.push({type:n.JSTokens.KEYWORD,startIndex:t}):this._isWordInList(e,this.DEC_KEYWORDS)?s.push({type:n.JSTokens.DEC_KEYWORD,startIndex:t}):this._isWordInList(e,this.BASE_TYPES)?s.push({type:n.JSTokens.TYPE,startIndex:t}):this._isWordInList(e,this.LITERALS)?s.push({type:n.JSTokens.CONST_VALUE,startIndex:t}):this._isWordInList(e,this.ACCESS_MODIFIRES)?s.push({type:n.JSTokens.ACCESS_MODIFIER,startIndex:t}):s.push({type:n.JSTokens.IDENTIFIER,startIndex:t})}else if((0,i.isNumeric)(o[r]))for(s.push({type:n.JSTokens.NUMBER,startIndex:r});(0,i.isNumeric)(o[++r]););else s.push({type:n.JSTokens.UNKNOWN,startIndex:r}),r++}}}return{tokens:s,state:{scope:""},length:o.length}}_isWordInList(e,t){if(1===e.length)return!1;for(const s of t)if(s.includes(e)&&s.length===e.length)return!0;return!1}}t.default=a},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JSHighlighterSchema=t.JSTokens=void 0,t.JSTokens={BOOLEAN:0,OPERATOR:1,ARROW:2,COMMENT:3,COMMA:4,DOT:5,COLON:6,SEMICOLON:7,IDENTIFIER:8,OPEN_BRACE:9,CLOSE_BRACE:10,OPEN_BRACKET:11,CLOSE_BRACKET:12,OPEN_SQUARE_BRACKET:13,CLOSE_SQUARE_BRACKET:14,NUMBER:15,STRING_LITERAL:16,UNKNOWN:17,KEYWORD:18,TYPE:19,DEC_KEYWORD:20,WHITE_SPACE:21,CONST_VALUE:22,ACCESS_MODIFIER:23},t.JSHighlighterSchema={[t.JSTokens.BOOLEAN]:"nc-format__word",[t.JSTokens.OPERATOR]:"nc-format__operator",[t.JSTokens.ARROW]:"nc-format__arrow",[t.JSTokens.COMMENT]:"nc-format__comment",[t.JSTokens.COMMA]:"nc-format__comma",[t.JSTokens.DOT]:"nc-format__dot",[t.JSTokens.COLON]:"nc-format__colon",[t.JSTokens.SEMICOLON]:"nc-format__semicolon",[t.JSTokens.IDENTIFIER]:"nc-format__word",[t.JSTokens.OPEN_BRACE]:"nc-format__brace",[t.JSTokens.CLOSE_BRACE]:"nc-format__brace",[t.JSTokens.OPEN_BRACKET]:"nc-format__bracket",[t.JSTokens.CLOSE_BRACKET]:"nc-format__bracket",[t.JSTokens.OPEN_SQUARE_BRACKET]:"nc-format__bracket",[t.JSTokens.CLOSE_SQUARE_BRACKET]:"nc-format__bracket",[t.JSTokens.NUMBER]:"nc-format__number",[t.JSTokens.STRING_LITERAL]:"nc-format__string",[t.JSTokens.UNKNOWN]:"nc-format__unknown",[t.JSTokens.KEYWORD]:"nc-format__keyword",[t.JSTokens.TYPE]:"nc-format__type",[t.JSTokens.DEC_KEYWORD]:"nc-format__declaration",[t.JSTokens.WHITE_SPACE]:"nc-format__space",[t.JSTokens.CONST_VALUE]:"nc-format__const-value",[t.JSTokens.ACCESS_MODIFIER]:"nc-format__access-modifier"}},226:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LaTeXMode=t.LaTeXTokenizer=void 0;const n=i(s(7683)),o=i(s(5537));t.LaTeXTokenizer=o.default;const r=s(8177),a=new n.default(new o.default,r.LaTeXHighlighterSchema,"latex");t.LaTeXMode=a},5537:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(6924),n=s(8177),o=s(9042),r=s(1608);class a extends o.Tokenizer{tokenize(e,t){t.clear();let s={scope:""};for(let i=0;i<e.linesCount;i++){const n=e.getLine(i),o=this._makeLineData(n,s);t.insertLine(o,i),s=o.state}}updateTokens(e,t,s){if(e.linesCount!==t.linesCount){const i=e.linesCount-t.linesCount;for(let e=0;e<i;e++)t.insertLine({tokens:[],state:{scope:""},length:0},s+e)}let i,n,o,a=s,l=t.getLineData(a-1).state;do{i=e.getLine(a),o=t.getLineData(a),n=this._makeLineData(i,l),t.setLineData(a,n),l={scope:""},a++}while(!(0,r.compareLineData)(o,n))}_makeLineData(e,t){if(0===e.length)return{tokens:[],state:Object.assign({},t),length:0};const s=[],o=(0,i.removeAccents)(e);let r=0;for(;r<o.length;){const e=r;for(;r<o.length&&(0,i.isWhiteSpaceChar)(o[r]);)r++;if(r!=e&&s.push({type:n.LaTeXTokens.WHITE_SPACE,startIndex:e}),r===o.length)break;switch(o[r]){case"(":s.push({type:n.LaTeXTokens.OPEN_BRACKET,startIndex:r}),r++;break;case")":s.push({type:n.LaTeXTokens.CLOSE_BRACKET,startIndex:r}),r++;break;case"{":s.push({type:n.LaTeXTokens.OPEN_BRACE,startIndex:r}),r++;break;case"}":s.push({type:n.LaTeXTokens.CLOSE_BRACE,startIndex:r}),r++;break;case"[":s.push({type:n.LaTeXTokens.OPEN_SQUARE_BRACKET,startIndex:r}),r++;break;case"]":s.push({type:n.LaTeXTokens.CLOSE_SQUARE_BRACKET,startIndex:r}),r++;break;case"%":return s.push({type:n.LaTeXTokens.COMMENT,startIndex:r}),{tokens:s,state:{scope:""},length:o.length};case"$":{const e=r;for(r++;r<o.length&&"$"!==o[r];)r++;s.push({type:n.LaTeXTokens.EQUATION,startIndex:e}),r++;break}case"\\":{const e=r;for(r++;r<o.length&&(0,i.isAlpha)(o[r]);)r++;s.push({type:n.LaTeXTokens.COMMAND,startIndex:e});break}default:{const e=r;if((0,i.isAlphaNumeric)(o[r])){for(;r<o.length&&(0,i.isAlphaNumeric)(o[r]);)console.log(r,o[r]),r++;s.push({type:n.LaTeXTokens.WORD,startIndex:e})}else s.push({type:n.LaTeXTokens.UNKNOWN,startIndex:r}),r++}}}return{tokens:s,state:{scope:""},length:o.length}}}t.default=a},8177:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LaTeXHighlighterSchema=t.LaTeXTokens=void 0,t.LaTeXTokens={COMMENT:0,COMMA:1,COMMAND:2,OPEN_BRACE:3,CLOSE_BRACE:4,OPEN_BRACKET:5,CLOSE_BRACKET:6,OPEN_SQUARE_BRACKET:7,CLOSE_SQUARE_BRACKET:8,WORD:9,UNKNOWN:10,WHITE_SPACE:11,EQUATION:12},t.LaTeXHighlighterSchema={[t.LaTeXTokens.COMMENT]:"nc-format__comment",[t.LaTeXTokens.COMMA]:"nc-format__comma",[t.LaTeXTokens.COMMAND]:"nc-format__keyword",[t.LaTeXTokens.OPEN_BRACE]:"nc-format__bracket",[t.LaTeXTokens.CLOSE_BRACE]:"nc-format__bracket",[t.LaTeXTokens.OPEN_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.CLOSE_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.OPEN_SQUARE_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.CLOSE_SQUARE_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.UNKNOWN]:"nc-format__unknown",[t.LaTeXTokens.WORD]:"nc-format__word",[t.LaTeXTokens.WHITE_SPACE]:"nc-format__whitespace",[t.LaTeXTokens.EQUATION]:"nc-format__string"}},5520:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextMode=t.TextTokenizer=void 0;const n=i(s(7683)),o=i(s(5994));t.TextTokenizer=o.default;const r=s(2518),a=new n.default(new o.default,r.TextHighlighterSchema,"text");t.TextMode=a},5994:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(6924),n=s(2518),o=s(9042),r=s(1608);class a extends o.Tokenizer{tokenize(e,t){t.clear();let s={scope:""};for(let i=0;i<e.linesCount;i++){const n=e.getLine(i),o=this._makeLineData(n,s);t.insertLine(o,i),s=o.state}}updateTokens(e,t,s){if(e.linesCount!==t.linesCount){const i=e.linesCount-t.linesCount;for(let e=0;e<i;e++)t.insertLine({tokens:[],state:{scope:""},length:0},s+e)}let i,n,o,a=s,l=t.getLineData(a-1).state;do{i=e.getLine(a),o=t.getLineData(a),n=this._makeLineData(i,l),t.setLineData(a,n),l={scope:""},a++}while(a<e.linesCount&&!(0,r.compareLineData)(o,n))}_makeLineData(e,t){if(0===e.length)return{tokens:[],state:Object.assign({},t),length:0};const s=[],o=(0,i.removeAccents)(e);let r=0;for(;r<o.length;){let e=r;for(;r<o.length&&this._isWhiteSpaceChar(o[r]);)r++;for(r!=e&&s.push({type:n.TextTokens.WHITE_SPACE,startIndex:e}),e=r;r<o.length&&!this._isWhiteSpaceChar(o[r]);)r++;r!=e&&s.push({type:n.TextTokens.WORD,startIndex:e})}return{tokens:s,state:{scope:""},length:o.length}}_isWhiteSpaceChar(e){return" "===e||"\t"===e}}t.default=a},2518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlighterSchema=t.TextTokens=void 0,t.TextTokens={WORD:0,WHITE_SPACE:1},t.TextHighlighterSchema={[t.TextTokens.WORD]:"nc-format__word",[t.TextTokens.WHITE_SPACE]:"nc-format__space"}},2197:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMode=t.MODES=void 0;const i=s(252),n=s(226),o=s(5520);t.MODES={JavaScript:i.JSMode,Text:o.TextMode,LaTeX:n.LaTeXMode,default:o.TextMode},t.getMode=function(e){switch(e=e.toLowerCase()){case"javascript":return t.MODES.JavaScript;case"text":return t.MODES.Text;case"latex":return t.MODES.LaTeX;default:return t.MODES.default}}},5463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_SEARCH_RESULTS=void 0,t.MAX_SEARCH_RESULTS=2e4},4576:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RegExpSearch=t.NaiveSearch=t.SerachResults=t.Search=void 0;const n=i(s(9895));t.SerachResults=n.default;const o=s(9758);Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return o.Search}});const r=i(s(7297));t.NaiveSearch=r.default;const a=i(s(5668));t.RegExpSearch=a.default},7297:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(6729),o=s(9758),r=i(s(3392));class a extends o.Search{search(e,t,s){s.clearResults(),s.phrase=e,s.caseSensitive||(e=e.toLowerCase());for(let i=0;i<t.linesCount;i++){let n=t.getLine(i);s.caseSensitive||(n=n.toLowerCase());const o=this._searchInLine(e,n,i);if(s.addResults(o)!==o.length)break}}searchInLines(e,t,s,i){s.clearResults(),s.phrase=e,s.caseSensitive||(e=e.toLowerCase());for(let n=0;n<t.linesCount;n++){if(!i.has(n))continue;let o=t.getLine(n);s.caseSensitive||(o=o.toLowerCase());const r=this._searchInLine(e,o,n);if(s.addResults(r)!==r.length)break}}updateLineSearchResults(e,t,s){let i="",n=t.phrase;try{i=e.getLine(s)}catch(e){return}t.caseSensitive||(i=i.toLowerCase(),n=t.phrase.toLowerCase()),t.clearLineResults(s);const o=this._searchInLine(n,i,s);t.addResults(o)}updateLinesSearchResults(e,t,s,i){t.clearLinesResults(s,i);for(let n=0;n<i;n++){const i=s+n;let o;try{o=e.getLine(i)}catch(e){return}const r=this._searchInLine(t.phrase,o,i);if(t.addResults(r)!==r.length)break}}updateNewLinesSearchResults(e,t,s,i){t.applyLinesDelta(s,i),this.updateLinesSearchResults(e,t,s,i)}updateRemovedLinesSearchResults(e,t,s,i){t.applyLinesDelta(s,-i),this.updateLinesSearchResults(e,t,s,i)}findNextOccurence(e,t,s,i){let n=t.phrase;t.caseSensitive||(n=n.toLowerCase());let o=null;for(let a=s;a<e.linesCount;a++){let l=e.getLine(a);a===s&&(l=l.substring(i)),t.caseSensitive||(l=l.toLowerCase());const h=this._findNextInLine(n,l,a);if(h){let e=0;h.start.line===s&&(e=i),o=new r.default(h.start.line,h.start.offset+e,h.end.line,h.end.offset+e);break}}return o}_searchInLine(e,t,s){if(e.length<1)return[];const i=[];let o=0,r=0;for(;(o=t.indexOf(e,r))>-1;)i.push(new n.Range(s,o,s,o+e.length)),r=o+e.length;return i}_findNextInLine(e,t,s){if(e.length<1)return null;const i=t.indexOf(e);return-1===i?null:new n.Range(s,i,s,i+e.length)}}t.default=a},5668:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(6729),o=s(9758),r=i(s(3392));class a extends o.Search{search(e,t,s){if(s.clearResults(),s.phrase=e,0===e.length)return;const i=this._compileRegExp(s);if(null!==i)for(let e=0;e<t.linesCount;e++){const n=t.getLine(e),o=this._searchInLine(i,n,e);if(s.addResults(o)!==o.length)break}}searchInLines(e,t,s,i){if(s.clearResults(),s.phrase=e,0===e.length)return;const n=this._compileRegExp(s);if(null!==n)for(let e=0;e<t.linesCount;e++){if(!i.has(e))continue;const o=t.getLine(e),r=this._searchInLine(n,o,e);if(s.addResults(r)!==r.length)break}}updateLineSearchResults(e,t,s){if(0===t.phrase.length)return;let i="";try{i=e.getLine(s)}catch(e){return}const n=this._compileRegExp(t);if(null===n)return;t.clearLineResults(s);const o=this._searchInLine(n,i,s);t.addResults(o)}updateLinesSearchResults(e,t,s,i){if(0===t.phrase.length)return;const n=this._compileRegExp(t);if(null!==n)for(let o=0;o<i;o++){const i=s+o;let r;try{r=e.getLine(i)}catch(e){return}t.clearLineResults(i);const a=this._searchInLine(n,r,i);if(t.addResults(a)!==a.length)break}}updateNewLinesSearchResults(e,t,s,i){t.applyLinesDelta(s,i),this.updateLinesSearchResults(e,t,s,i)}updateRemovedLinesSearchResults(e,t,s,i){t.applyLinesDelta(s,i),this.updateLinesSearchResults(e,t,s,i)}findNextOccurence(e,t,s,i){const n=this._compileRegExp(t);if(null===n)return null;let o=null;for(let t=s;t<e.linesCount;t++){let a=e.getLine(t);t===s&&(a=a.substring(i));const l=this._findNextInLine(n,a,t);if(l){let e=0;l.start.line===s&&(e=i),o=new r.default(l.start.line,l.start.offset+e,l.end.line,l.end.offset+e);break}}return o}_searchInLine(e,t,s){const i=[],o=t.matchAll(e);for(const e of o){if(void 0===e.index)break;0!==e[0].length&&i.push(new n.Range(s,e.index,s,e.index+e[0].length))}return i}_findNextInLine(e,t,s){let i;for(;null!==(i=e.exec(t));){if(0!==i[0].length)return new n.Range(s,i.index,s,e.lastIndex);e.lastIndex++}return null}_compileRegExp(e){try{let t="g";return e.caseSensitive||(t+="i"),new RegExp(e.phrase,t)}catch(e){return null}}}t.default=a},3392:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(6729);class n extends i.Range{constructor(){super(...arguments),this.isActive=!1}}t.default=n},9895:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1229),o=s(5463),r=i(s(3392));t.default=class{constructor(){this._results=[],this._searchPhrase="",this._activeSearchRes=0,this.caseSensitive=!1,this.searchInSelection=!1,this.maxResultsCount=o.MAX_SEARCH_RESULTS}get _totalResults(){return this._results.length}get results(){return this._results}get matchCount(){return this._totalResults}get activeSearchResultNumber(){return this._activeSearchRes}set activeSearchResultNumber(e){this._activeSearchRes=e}nextResult(){return this._totalResults<1?-1:(this._activeSearchRes++,this._activeSearchRes<this._results.length||(this._activeSearchRes=0),this._activeSearchRes)}prevResult(){return this._totalResults<1?-1:(this._activeSearchRes--,this._activeSearchRes<0&&(this._activeSearchRes=this._results.length-1),this._activeSearchRes)}getLineResutls(e){const t=[];for(let s=0;s<this._results.length;s++){const i=this._results[s];i.start.line<=e&&i.end.line>=e&&t.push(Object.assign(Object.assign({},i),{isActive:s===this._activeSearchRes}))}return t}getLinesResutls(e,t){const s=e,i=e+t,n=[];for(let e=0;e<this._results.length;e++){const t=this._results[e];(t.start.line>=s&&t.start.line<=i||t.end.line>=s&&t.end.line<=i)&&n.push(Object.assign(Object.assign({},t),{isActive:e===this._activeSearchRes}))}return n}clearLineResults(e){let t=this._results.length;for(;t--;){const s=this._results[t];s.start.line<=e&&s.end.line>=e&&this._results.splice(t,1)}}clearLinesResults(e,t){const s=e,i=e+t-1;let n=this._results.length;for(;n--;){const e=this._results[n];(e.start.line>=s&&e.start.line<=i||e.end.line>=s&&e.end.line<=i)&&this._results.splice(n,1)}}addResult(e){if(this._results.length+1>this.maxResultsCount)return 0;let t=0;for(t=0;t<this._results.length;t++){const s=this._results[t];if(2===(0,n.pointCompare)(e.start,s.start))break}return this._results.splice(t,0,e),1}addResults(e){let t=e.length;this._results.length+e.length>this.maxResultsCount&&(t=this.maxResultsCount-this._results.length);for(const s of e.slice(0,t))this.addResult(s);return t}getActiveSearchResPosition(){const e=this._results[this._activeSearchRes],t=new r.default(e.start.line,e.start.offset,e.end.line,e.end.offset);return t.isActive=!0,t}clearResults(){this._searchPhrase="",this._results=[],this._activeSearchRes=0}get phrase(){return this._searchPhrase}set phrase(e){this._searchPhrase=e}applyLinesDelta(e,t){for(const s of this._results)s.start.line>=e&&(s.start.line+=t),s.end.line>=e&&(s.end.line+=t)}}},9758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0,t.Search=class{}},6729:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=t.Range=t.Point=void 0;const n=i(s(1349));t.Point=n.default;const o=i(s(8739));t.Range=o.default;const r=i(s(6048));t.Selection=r.default},1349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.line=e,this.offset=t}}},8739:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(1349));t.default=class{constructor(e=0,t=0,s=0,i=0){this.start=new n.default(e,t),this.end=new n.default(s,i)}}},1859:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(6048));t.default=class{constructor(e){this._undo=[],this._redo=[],this._editSession=e}createSnapshot(){const e=this._editSession.selections.getSelections().map((e=>new n.default(e.start.line,e.start.offset,e.end.line,e.end.offset)));this._undo.push(e)}undo(){const e=this._undo.pop();void 0!==e&&(this._applyChanges(e),this._redo.push(e))}redo(){const e=this._redo.pop();void 0!==e&&(this._applyChanges(e),this._undo.push(e))}clear(){this._redo=[],this._undo=[]}clearRedo(){this._redo=[]}_applyChanges(e){this._editSession.selections.setSelections(e),this._editSession.emitSelectionChangedEvent()}}},700:function(e,t,s){var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,n)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(6924),l=r(s(1349)),h=o(s(6048)),c=s(1229);t.default=class{constructor(e=null){this._selections=[],this._document=null,this._shouldUpdateSelections=!0,this._rectSelectionStart=null,this._document=e,this._selections=[new h.default(0,0,0,0)]}get length(){return this._selections.length}getSelections(){return this._selections}getCursorsPositions(){return this._selections.map((e=>e.type===h.SelectionType.L?e.start:e.end))}enableUpdatingSelections(){this._shouldUpdateSelections=!0}disableUpdatingSelections(){this._shouldUpdateSelections=!1}update(e,t,s,i){if(!this._shouldUpdateSelections)return;let n=0;n=s<0||i<0?0:1;const o=new l.default(e,t),r=new l.default(e-s,t-i);for(const t of this._selections)for(const a of[t.start,t.end])n?2!==(0,c.pointCompare)(a,o)&&(a.line===e&&(s?a.offset=a.offset-o.offset+i:a.offset+=i),a.line+=s):a.line>=o.line&&a.line<=r.line&&a.offset>=r.offset-1&&(1!==(0,c.pointCompare)(a,r)?(a.offset=o.offset,a.line=o.line):(a.line=o.line,a.offset=o.offset+a.offset-r.offset));this._removeOverlappingSelections()}clear(){this._selections=[]}setSelection(e){this._selections=[e]}setSelections(e){this._selections=e}addSelection(e){this._selections.push(e),this._removeOverlappingSelections()}extendLastSelection(e){0!==this._selections.length&&(this._selections[this._selections.length-1].updateSelection(e),this._removeOverlappingSelections(),this._clearRectSelectionStart())}selectAll(){const e=new h.default(0,0,0,0);if(this._document){const t=this._document.linesCount,s=this._document.getLastLine();e.end.line=t-1,e.end.offset=s.length}this._selections=[e],this._clearRectSelectionStart()}selectWordAt(e,t=!1){if(null===this._document)return;const s=(0,a.removeAccents)(this._document.getLine(e.line)),i=(0,a.getWordBefore)(s,e.offset),n=(0,a.getWordAfter)(s,e.offset),o=new h.default(e.line,e.offset-i.length,e.line,e.offset+n.length);t?this._selections.push(o):this._selections=[o],this._removeOverlappingSelections(),this._clearRectSelectionStart()}selectWordBefore(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){if(0===e.start.line&&0===e.start.offset)return;if(0===e.start.offset){e.start.line-=1;const t=(0,a.removeAccents)(this._document.getLine(e.start.line)),s=(0,a.getWordBefore)(t,t.length);e.start.offset=t.length-s.length}else{const t=(0,a.removeAccents)(this._document.getLine(e.start.line)),s=(0,a.getWordBefore)(t,e.start.offset);e.start.offset-=s.length}e.type=h.SelectionType.L}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectWordAfter(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){const t=(0,a.removeAccents)(this._document.getLine(e.end.line));if(e.end.line===this._document.linesCount-1&&e.end.offset===t.length)return;if(e.end.offset===t.length){e.end.line+=1;const t=(0,a.removeAccents)(this._document.getLine(e.end.line)),s=(0,a.getWordAfter)(t,0);e.end.offset=s.length}else{const s=(0,a.getWordAfter)(t,e.end.offset);e.end.offset+=s.length}e.type=h.SelectionType.R}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectStartOfTheLine(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.type===h.SelectionType.R){const t=this._document.getLine(e.end.line),s=(0,a.readWhiteSpaceAfter)(t,0);if(e.end.offset===s?e.end.offset=0:e.end.offset=s,e.start.line===e.end.line){const t=e.start.offset;e.start.offset=e.end.offset,e.end.offset=t,e.type=h.SelectionType.L}}else{const t=this._document.getLine(e.start.line),s=(0,a.readWhiteSpaceAfter)(t,0);e.start.offset===s?e.start.offset=0:e.start.offset=s,e.type=h.SelectionType.L}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectEndOfTheLine(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.type===h.SelectionType.L){const t=this._document.getLine(e.start.line);if(e.start.offset=t.length,e.start.line===e.end.line){const t=e.start.offset;e.start.offset=e.end.offset,e.end.offset=t,e.type=h.SelectionType.R}}else{const t=this._document.getLine(e.end.line);e.end.offset=t.length,e.type=h.SelectionType.R}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}moveSelectionWordBefore(){if(null!==this._document){for(const e of this._selections)if(0!==e.start.line||0!==e.start.offset){if(0===e.start.offset){e.start.line-=1;const t=(0,a.removeAccents)(this._document.getLine(e.start.line));e.start.offset=t.length}else{const t=(0,a.removeAccents)(this._document.getLine(e.start.line)),s=(0,a.getWordBefore)(t,e.start.offset);e.start.offset-=s.length}e.end.offset=e.start.offset,e.end.line=e.start.line}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}moveSelectionWordAfter(){if(null!==this._document){for(const e of this._selections){const t=(0,a.removeAccents)(this._document.getLine(e.end.line));if(e.end.line!==this._document.linesCount-1||e.end.offset!==t.length){if(e.end.offset===t.length)e.end.line+=1,e.end.offset=0;else{const s=(0,a.getWordAfter)(t,e.end.offset);e.end.offset+=s.length}e.start.offset=e.end.offset,e.start.line=e.end.line}}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}extendRectangleSelection(e){if(null===this._document)return;if(null===this._rectSelectionStart){const e=this._selections[this._selections.length-1];e.type===h.SelectionType.L?this._rectSelectionStart=e.end:this._rectSelectionStart=e.start;const t=this._document.getLine(this._rectSelectionStart.line);this._rectSelectionStart.offset=(0,a.offsetToColumn)(t,this._rectSelectionStart.offset)}this._selections=[];const t=Math.min(e.line,this._rectSelectionStart.line),s=Math.max(e.line,this._rectSelectionStart.line),i=Math.min(e.offset,this._rectSelectionStart.offset),n=Math.max(e.offset,this._rectSelectionStart.offset);for(let e=t;e<s+1;e++){const t=this._document.getLine(e),s=(0,a.offsetToColumn)(t,t.length);if(i>s)continue;const o=(0,a.columnToOffset)(t,i),r=n<s?(0,a.columnToOffset)(t,n):t.length;this._selections.push(new h.default(e,o,e,r))}this._removeOverlappingSelections()}collapseSelectionToLeft(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.isCollapsed){if(0===e.start.line&&0===e.start.offset)continue;if(e.start.offset-=1,e.end.offset-=1,e.start.offset<0){const t=e.start.line-1,s=this._document.getLine(t).length;e.start.line=t,e.end.line=t,e.start.offset=s,e.end.offset=s}}else e.end.line=e.start.line,e.end.offset=e.start.offset;this._clearRectSelectionStart()}}collapseSelectionToRight(){if(this._selections.length<1||null===this._document)return;const e=this._document.linesCount-1,t=this._document.getLine(e).length;for(const s of this._selections)if(s.isCollapsed){if(s.start.line===e&&s.start.offset===t)continue;s.start.offset+=1,s.end.offset+=1;const i=this._document.getLine(s.start.line).length;if(s.start.offset>i){const e=s.start.line+1;s.start.line=e,s.end.line=e,s.start.offset=0,s.end.offset=0}}else s.start.line=s.end.line,s.start.offset=s.end.offset;this._clearRectSelectionStart()}collapseSelectionToTop(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){if(0===e.start.line){e.start.offset=0,e.end.offset=0,e.end.line=0;continue}const t=e.start.line-1,s=this._document.getLine(t).length,i=s<e.start.offset?s:e.start.offset;e.start.offset=i,e.end.offset=i,e.start.line=t,e.end.line=t}this._clearRectSelectionStart()}}collapseSelectionToBottom(){if(this._selections.length<1||null===this._document)return;const e=this._document.linesCount-1,t=this._document.getLine(e).length;for(const s of this._selections){if(s.end.line===e){s.start.offset=t,s.end.offset=t,s.start.line=e;continue}const i=s.start.line+1,n=this._document.getLine(i).length,o=n<s.end.offset?n:s.end.offset;s.start.offset=o,s.end.offset=o,s.start.line=i,s.end.line=i}this._clearRectSelectionStart()}collapseSelectionToHome(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){let t="",s=0;e.type===h.SelectionType.L?(t=this._document.getLine(e.start.line),e.end.line=e.start.line,s=e.start.offset):(t=this._document.getLine(e.end.line),e.start.line=e.end.line,s=e.end.offset);const i=(0,a.readWhiteSpaceAfter)(t,0);s===i?(e.start.offset=0,e.end.offset=0):(e.start.offset=i,e.end.offset=i)}this._clearRectSelectionStart(),this._removeOverlappingSelections()}}collapseSelectionToEnd(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){let t="";e.type===h.SelectionType.L?(t=this._document.getLine(e.start.line),e.end.line=e.start.line):(t=this._document.getLine(e.end.line),e.start.line=e.end.line);const s=t.length;e.start.offset=s,e.end.offset=s}this._clearRectSelectionStart(),this._removeOverlappingSelections()}}getActiveLinesNumbers(e=0,t=1/0){if(null===this._document||0===this._selections.length)return new Set;const s=new Set;for(const i of this._selections){const n=Math.max(e,i.start.line),o=Math.min(i.end.line+1,e+t);for(let e=n;e<o;e++)s.add(e)}return s}getSelectedLinesCount(){return this.getActiveLinesNumbers().size}onlyLastSelection(){0!==this._selections.length&&(this._selections=[this._selections[this._selections.length-1]])}selectLine(e){if(this._document&&!(e>=this._document.linesCount))if(e+1===this._document.linesCount){const t=this._document.getLine(e),s=new h.default(e,0,e,t.length);s.type=h.SelectionType.R,this._selections=[s]}else{const t=new h.default(e,0,e+1,0);t.type=h.SelectionType.R,this._selections=[t]}}_removeOverlappingSelections(){if(null===this._document||this._selections.length<2)return;const e=[];for(let t=0;t<this._selections.length;t++){const s=this._selections[t];for(let i=t+1;i<this._selections.length;i++){const n=this._selections[i];s.overlaps(n)&&e.push(t)}}let t=0;for(const s of e)this._selections.splice(s-t,1),t++}_clearRectSelectionStart(){this._rectSelectionStart=null}}},6048:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionType=void 0;const n=i(s(8739)),o=s(1229);var r;!function(e){e[e.N=0]="N",e[e.L=1]="L",e[e.R=2]="R"}(r=t.SelectionType||(t.SelectionType={}));class a extends n.default{constructor(){super(...arguments),this.type=r.N}get isCollapsed(){return(0,o.samePoint)(this.start,this.end)}updateSelection(e){this.type===r.L?1===(0,o.pointCompare)(this.end,e)?this.start=e:(this.type=r.R,this.start=this.end,this.end=e):this.type===r.R?2===(0,o.pointCompare)(this.start,e)?this.end=e:(this.type=r.L,this.end=this.start,this.start=e):2===(0,o.pointCompare)(this.start,e)?(this.type=r.R,this.end=e):(this.type=r.L,this.start=e)}toString(){return`{start: {l: ${this.start.line}, o:${this.start.offset}}, end: {l: ${this.end.line}, o:${this.end.offset}}}`}overlaps(e){return this.isCollapsed?2!==(0,o.pointCompare)(this.start,e.start)&&1!==(0,o.pointCompare)(this.start,e.end):2!==(0,o.pointCompare)(e.start,this.start)&&1!==(0,o.pointCompare)(e.start,this.end)||2!==(0,o.pointCompare)(e.end,this.start)&&1!==(0,o.pointCompare)(e.end,this.end)}}t.default=a},1229:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pointCompare=t.samePoint=void 0,t.samePoint=(e,t)=>e.line===t.line&&e.offset===t.offset,t.pointCompare=(e,t)=>e.line===t.line?e.offset<t.offset?2:e.offset===t.offset?0:1:e.line<t.line?2:1},5006:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CSSClasses=void 0,t.CSSClasses={EDITOR:"nc-editor",TEXT_LAYER:"nc-editor__text",GUTTER:"nc-editor__gutter",GUTTER_NUMBER:"nc-gutter__number",GUTTER_NUMBER_ACTIVE:"nc-gutter__number--active",MAIN_INPUT:"nc-editor__input",CURSOR:"nc-selection__cursor",CURSOR_ANIMATED:"nc-selection__cursor--animated",MULTI_LINE:"nc-text__multi-line",MULTI_LINE_ACTIVE:"nc-text__multi-line--active",MULTI_LINE_HOVERED:"nc-text__multi-line--hovered",MULTI_LINE_CONTENT:"nc-text__multi-line_content",SELECTION_RANGE:"nc-selection__range",SELECTION_SEARCH:"nc-selection__search",SELECTION_SEARCH_ACTIVE:"nc-selection__search--active",SELECTION:"nc-editor__selection",SCROLL_BAR:"nc-editor__scroll-bar",SCROLL_INNER:"nc-scroll__scrollable",SEARCH:"nc-search",CLOSE_SEARCH:"nc-search__close",SEARCH_INPUT:"nc-search__input",SEARCH_RESULT:"nc-search__result"}},6924:(e,t)=>{function s(e){return" "===e||"\t"===e}function i(e){return/[_a-zA-Z]/.test(e)}function n(e){return/^[0-9]+$/i.test(e)}function o(e,t){return l(e,t,s)}function r(e,t){return l(e,t,i)}function a(e,t){return l(e,t,n)}function l(e,t,s){let i=t-1,n=e[i];for(;i>-1&&s(n);)i--,n=e[i];return t-i-1}function h(e,t){return d(e,t,s)}function c(e,t){return d(e,t,i)}function u(e,t){return d(e,t,n)}function d(e,t,s){let i=t,n=e[i];for(;i<e.length&&s(n);)i++,n=e[i];return i-t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLineIndent=t.readAfterUntil=t.readNumberAfter=t.readWordAfter=t.readWhiteSpaceAfter=t.readBeforeUntil=t.readNumberBefore=t.readWordBefore=t.readWhiteSpaceBefore=t.isAlphaNumeric=t.isNumeric=t.isAlpha=t.isWhiteSpaceChar=t.getWordAfter=t.getWordBefore=t.offsetToColumn=t.columnToOffset=t.removeAccents=void 0,t.removeAccents=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"l")},t.columnToOffset=function(e,t,s=8){let i=0,n=0;for(;i<e.length&&t>0;)if("\t"===e[i++]){const e=n%s;t-=s-e,n+=s-e}else t-=1,n+=1;return t>0?e.length:t<-s/2?i-1:i},t.offsetToColumn=function(e,t,s=8){let i=0;for(let n=0;n<t;n++)"\t"===e[n]?i+=s-i%s:i+=1;return i},t.getWordBefore=function(e,t){if(t>e.length&&(t=e.length),t<0)return"";const l=e[t-1];if(s(l)){const s=o(e,t);return e.substring(t-s,t)}if(i(l)){const s=r(e,t);return e.substring(t-s,t)}if(n(l)){const s=a(e,t);return e.substring(t-s,t)}return e.substring(t-1,t)},t.getWordAfter=function(e,t){if(t>e.length)return"";t<0&&(t=0);const o=e[t];if(s(o)){const s=h(e,t);return e.substring(t,t+s)}if(i(o)){const s=c(e,t);return e.substring(t,t+s)}if(n(o)){const s=u(e,t);return e.substring(t,t+s)}return e.substring(t,t+1)},t.isWhiteSpaceChar=s,t.isAlpha=i,t.isNumeric=n,t.isAlphaNumeric=function(e){return/^[_a-zA-Z0-9]+$/i.test(e)},t.readWhiteSpaceBefore=o,t.readWordBefore=r,t.readNumberBefore=a,t.readBeforeUntil=l,t.readWhiteSpaceAfter=h,t.readWordAfter=c,t.readNumberAfter=u,t.readAfterUntil=d,t.getLineIndent=function(e){if(e.length<1)return"";if(e.startsWith(" ")){const t=d(e,0,(e=>" "===e));return e.substring(0,t)}if(e.startsWith("\t")){const t=d(e,0,(e=>"\t"===e));return e.substring(0,t)}return""}},6165:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(7992));t.default=class{constructor(){this._tree=new n.default}get linesCount(){return this._tree.nodesCount}getLineData(e){try{return this._tree.getData(e)}catch(e){return{tokens:[],state:{scope:""},length:0}}}getLinesData(e,t){let s=[];try{s=this._tree.getNodesData(e,t)}catch(e){s=[]}finally{const e=t-s.length;for(let t=0;t<e;t++)s.push({tokens:[],state:{scope:""},length:0})}return s}setLineData(e,t){const s=this._tree.getNode(e);null!==s&&(s.data=t)}getLineTokens(e){try{return this._tree.getData(e).tokens}catch(e){return[]}}getLinesTokens(e,t){return this.getLinesData(e,t).map((e=>e.tokens))}clear(){this._tree.clear()}insertLine(e,t){this._tree.insert(e,t)}}},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0,t.Tokenizer=class{}},1608:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compareLineData=void 0,t.compareLineData=function(e,t){if(e.state.scope!==t.state.scope)return!1;if(e.tokens.length!==t.tokens.length)return!1;if(e.length!==t.length)return!1;for(let s=0;s<e.tokens.length;s++){const i=e.tokens[s],n=t.tokens[s];if(i.startIndex!==n.startIndex)return!1;if(i.type!==n.type)return!1}return!0}},816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.left=null,this.right=null,this.parent=null,this.leftSubTreeSize=0,this.height=1,this.data=e}}},7992:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(s(816)),o=s(730);t.default=class{constructor(){this._rootNode=null,this._nodesCount=0}get nodesCount(){return this._nodesCount}get isEmpty(){return null===this._rootNode}clear(){this._nodesCount=0,this._rootNode=null}getNodesData(e,t){const s=[];return this._getNodesData(this._rootNode,e,t,s),s}getNodes(e,t){const s=[];let i=this._getNodeByNumber(this._rootNode,e);for(;null!==i&&s.length<t;)s.push(i),i=this._getNextNode(i);return s}getNode(e){return this._getNodeByNumber(this._rootNode,e)}getData(e){return this._getNodeByNumber(this._rootNode,e).data}getFirstNodeData(){var e,t;return null!==(t=null===(e=this._getFirstNodeNumber(this._rootNode))||void 0===e?void 0:e.data)&&void 0!==t?t:null}getLastNodeData(){var e,t;return null!==(t=null===(e=this._getLastNode(this._rootNode))||void 0===e?void 0:e.data)&&void 0!==t?t:null}getFirstNode(){return this._getFirstNodeNumber(this._rootNode)}getLastNode(){return this._getLastNode(this._rootNode)}removeNode(e){this._rootNode=this._removeNode(this._rootNode,e)}insert(e,t){const s=new n.default(e);return this._rootNode=this._insertNode(this._rootNode,s,t),s}swapNodeWithNext(e){const t=this._getNodeByNumber(this._rootNode,e),s=this._getNextNode(t);if(null===s)return;const i=s.data;s.data=t.data,t.data=i}swapNodeWithPrevious(e){return this.swapNodeWithNext(e-1)}_removeNode(e,t){if(null===e)return e;if(t<e.leftSubTreeSize)e.left=this._removeNode(e.left,t),e.leftSubTreeSize-=1;else if(t>e.leftSubTreeSize)e.right=this._removeNode(e.right,t-e.leftSubTreeSize-1);else if(null===e.left||null===e.right){let t=null;t=t===e.left?e.right:e.left,null===t?(t=e,e=null):(t.parent=e.parent,e=t),this._nodesCount-=1}else{const t=this._getFirstNodeNumber(e.right);if(!t)throw new Error("Tree error");e.data=t.data,e.right=this._removeNode(e.right,t.leftSubTreeSize)}if(null===e)return e;e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1;const s=this._getBalanceFactor(e);return s>1&&this._getBalanceFactor(e.left)>=0?this._rotateRight(e):s>1&&this._getBalanceFactor(e.left)<0?(e.left&&(e.left=this._rotateLeft(e.left)),this._rotateRight(e)):s<-1&&this._getBalanceFactor(e.right)<=0?this._rotateLeft(e):s<-1&&this._getBalanceFactor(e.right)>0?(e.right&&(e.right=this._rotateRight(e.right)),this._rotateLeft(e)):e}_getNodesData(e,t,s,i){if(null===e)return;let n=this._getNodeByNumber(e,t);for(;null!==n&&i.length<s;)i.push(n.data),n=this._getNextNode(n)}_getNextNode(e){if(null!=e.right)return this._getFirstNodeNumber(e.right);let t=e.parent;for(;null!==t&&e===t.right;)e=t,t=t.parent;return t}_getFirstNodeNumber(e){if(null===e)return null;let t=e;for(;null!==t.left;)t=t.left;return t}_getLastNode(e){if(null===e)return null;let t=e;for(;null!=t.right;)t=t.right;return t}_getNodeByNumber(e,t){if(null===e)throw new Error("Node with given number doesn't exist.");return t===e.leftSubTreeSize?e:t<e.leftSubTreeSize?this._getNodeByNumber(e.left,t):this._getNodeByNumber(e.right,t-e.leftSubTreeSize-1)}_insertNode(e,t,s){var i,n,r,a;if(null===e)return this._nodesCount+=1,t;s<=e.leftSubTreeSize?(e.left=this._insertNode(e.left,t,s),e.left.parent=e,e.leftSubTreeSize+=1):(e.right=this._insertNode(e.right,t,s-e.leftSubTreeSize-1),e.right.parent=e),e.height=1+Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right));const l=this._getBalanceFactor(e);return l>1&&s<(null!==(n=null===(i=e.left)||void 0===i?void 0:i.leftSubTreeSize)&&void 0!==n?n:0)?this._rotateRight(e):l<-1&&s-e.leftSubTreeSize-1>(null!==(a=null===(r=e.right)||void 0===r?void 0:r.leftSubTreeSize)&&void 0!==a?a:0)?this._rotateLeft(e):l>1&&e.left&&s>e.left.leftSubTreeSize?(e.left=this._rotateLeft(e.left),this._rotateRight(e)):l<-1&&e.right&&s-e.leftSubTreeSize-1<e.right.leftSubTreeSize?(e.right=this._rotateRight(e.right),this._rotateLeft(e)):e}_getBalanceFactor(e){return null===e?0:(0,o.nodeHeight)(e.left)-(0,o.nodeHeight)(e.right)}_rotateLeft(e){const t=e.right;if(null===t)return e;const s=t.left;return t.left=e,e.right=s,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,t.leftSubTreeSize=t.leftSubTreeSize+e.leftSubTreeSize+1,t.parent=e.parent,e.parent=t,null!==s&&(s.parent=e),t}_rotateRight(e){const t=e.left;if(null===t)return e;const s=t.right;return t.right=e,e.left=s,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,e.leftSubTreeSize=e.leftSubTreeSize-t.leftSubTreeSize-1,t.parent=e.parent,e.parent=t,null!==s&&(s.parent=e),t}}},730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHeight=void 0,t.nodeHeight=e=>null===e?0:e.height},2914:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=t.EDITOR_FONT_FAMILY=t.EDITOR_INPUT_ID=void 0,t.EDITOR_INPUT_ID="editor-input",t.EDITOR_FONT_FAMILY="ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace",t.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=1e6},2555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.em=t.rem=t.px=t.isChildOf=t.createNodeFromTemplate=t.createDiv=t.createElement=t.createTextArea=void 0,t.createTextArea=(e="")=>{const s=(0,t.createElement)("textarea");return s.className=e,s},t.createElement=e=>document.createElement(e),t.createDiv=(e="")=>{const s=(0,t.createElement)("div");return s.className=e,s},t.createNodeFromTemplate=e=>{const s=(0,t.createElement)("template");return s.innerHTML=e,s.content.firstChild},t.isChildOf=(e,t)=>{let s=t;for(;s;){if(s===e)return!0;s=s.parentNode}return!1},t.px=e=>`${e}px`,t.rem=e=>`${e}rem`,t.em=e=>`${e}em`},8285:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(7183),n=s(2555),o=s(2528),r=s(5006),a=s(6606),l=s(6729),h=s(4938);class c extends i.EventEmitter{constructor(e){super(),this._mountPoint=null,this._gutterContainer=null,this._firstVisibleRow=0,this._visibleRowsCount=0,this._totalRowsCount=50,this._gutterWidth=50,this._isMouseHold=!1,this._lineHeight=20,this._view=e,this._mountPoint=e.getDOMElement(),this._createGutterContainer(),this._initEventListeners(),this._totalRowsCount=this._session.reader.getTotalRowsCount(),this._visibleRowsCount=this._view.visibleRowsCount,this.update()}get _session(){return this._view.session}update(){this._renderLinesNumbers()}setWidth(e){this._gutterWidth=e}setWidthForRowsCount(e){if(null===this._gutterContainer)return this._gutterWidth;const t=e.toString().length;let s=10*t;return s<50&&(s=50),this._gutterWidth!==s&&(this._gutterWidth=10*t,this._gutterWidth=s,this._gutterContainer.style.width=(0,n.px)(this._gutterWidth)),this.emit(o.EvGutter.Width,{width:this._gutterWidth}),this._gutterWidth}setFirstVisibleRow(e){this._firstVisibleRow=e}setVisibleRowsCount(e){this._visibleRowsCount=e}setTotalRowsCount(e){this._totalRowsCount=e}_initEventListeners(){this._view.on(o.EvScroll.Changed,(e=>{this.setFirstVisibleRow(e.firstVisibleRow),this.update()})),this._view.on(a.EvDocument.Edited,(()=>{const e=this._session.reader.getTotalRowsCount();this.setTotalRowsCount(e),this.setWidthForRowsCount(e),this.update()})),this._view.on(a.EvDocument.LinesCount,(()=>{const e=this._session.reader.getTotalRowsCount();this.setTotalRowsCount(e),this.setWidthForRowsCount(e),this.update()})),this._view.on(a.EvDocument.Set,(()=>{const e=this._session.reader.getTotalRowsCount();this.setTotalRowsCount(e),this.setWidthForRowsCount(e),this.update()})),this._view.on(h.EvSelection.Changed,(()=>{this.update()})),this._gutterContainer&&(this._gutterContainer.addEventListener("mousedown",(e=>this._onMouseDown(e))),this._gutterContainer.addEventListener("mouseup",(()=>this._onMouseUp())),this._gutterContainer.addEventListener("mousemove",(e=>this._onMouseMove(e))))}_createGutterContainer(){null!==this._mountPoint&&(this._gutterContainer=(0,n.createDiv)(r.CSSClasses.GUTTER),this._mountPoint.appendChild(this._gutterContainer),this._gutterContainer.style.gridArea="1/1/2/2")}_renderLinesNumbers(){if(null===this._gutterContainer)return;const e=this._session.reader.getRows(this._firstVisibleRow,this._visibleRowsCount),t=e.map((e=>e.line)),s=Math.min(...t),i=Math.max(...t),o=this._session.getActiveLinesNumbers(s,i-s+1),a=[];for(const t of e){const e=(0,n.createDiv)(r.CSSClasses.GUTTER_NUMBER);a.push(e),0===t.ord||0===a.length?e.innerText=`${t.line+1}`:e.innerHTML="&nbsp;",o.has(t.line)&&e.classList.add(r.CSSClasses.GUTTER_NUMBER_ACTIVE)}this._gutterContainer.replaceChildren(...a)}_onMouseDown(e){this._isMouseHold=!0;const t=e.target;if(!t.parentElement)return;const s=t.parentElement.getBoundingClientRect(),i=e.clientY-s.top,n=this._getRowAtPosition(i);this._session.selectLine(n)}_onMouseUp(){this._isMouseHold=!1}_onMouseMove(e){if(!this._isMouseHold)return;const t=e.target;if(!t.parentElement)return;const s=t.parentElement.getBoundingClientRect(),i=e.clientY-s.top,n=this._getRowAtPosition(i);this._session.extendLastSelection(new l.Point(n,0))}_getRowAtPosition(e){const t=Math.floor(e/this._lineHeight)+this._firstVisibleRow;let s=0;try{s=this._session.reader.getRows(t,1)[0].line}catch(e){s=this._session.reader.getTotalLinesCount()-1}return s}}t.default=c},9805:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(2914),n=s(5006),o=s(2555),r=s(2528),a=s(6606);t.default=class{constructor(e){this._domElement=null,this._isFocused=!1,this._view=e,this._domElement=(0,o.createTextArea)(n.CSSClasses.MAIN_INPUT),this._domElement.id=i.EDITOR_INPUT_ID,this._domElement.autofocus=!0,this._domElement.autocapitalize="off",this._initEventListeners()}get isFocused(){return this._isFocused}focus(){var e;null===(e=this._domElement)||void 0===e||e.focus()}render(e){this._domElement&&e.appendChild(this._domElement)}_initEventListeners(){this._domElement&&(this._domElement.addEventListener("input",(()=>this._onInput())),this._domElement.addEventListener("focus",(()=>this._isFocused=!0)),this._domElement.addEventListener("blur",(()=>this._isFocused=!1))),this._view.on(r.EvFocus.Changed,(e=>{e.focused&&this.focus()})),this._view.on(a.EvDocument.Set,(()=>{this.focus()}))}_onInput(){null!==this._domElement&&0!==this._domElement.value.length&&(this._view.writer.insert(this._domElement.value),this._domElement.value="")}}},6209:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(5006),n=s(2555);t.default=class{constructor(e,t=!1,s={}){this._line=0,this._text="",this._isActive=!1,this._isHovered=!1,this._domElement=null,this._tokens=[],this._line=e.line,this._text=e.text,this._tokens=e.tokens,this._highlighterSchema=s,this._domElement=(0,n.createNodeFromTemplate)(`<div class="${i.CSSClasses.MULTI_LINE}">\n\t\t\t<div class="${i.CSSClasses.MULTI_LINE_CONTENT}">\n\t\t\t  ${this._text||"<br />"}\n\t\t\t</div>\n\t\t</div>`),this._domElement.style.height=(0,n.px)(20),this.setActive(t),this._renderTokens()}get line(){return this._line}getNode(){return this._domElement}setData(e){e.text===this._text&&this._tokens.length>0||(this._text=e.text,this._tokens=e.tokens)}render(){this._renderTokens()}setSchema(e){this._highlighterSchema=e}_renderTokens(){const e=this._domElement;if(null===e.firstElementChild)return;if(0===this._tokens.length)return void(e.firstElementChild.textContent=this._text);const t=[];for(let e=0;e<this._tokens.length;e++){const s=this._tokens[e],i=(0,n.createElement)("span");i.className=this._highlighterSchema[s.type];const o=s.startIndex,r=e+1<this._tokens.length?this._tokens[e+1].startIndex:this._text.length;i.textContent=this._text.substring(o,r),t.push(i)}e.firstElementChild.replaceChildren(...t)}setText(e){if(e===this._text)return;this._text=e;const t=this._domElement;null!==t.firstElementChild&&(t.firstElementChild.textContent=e)}setActive(e){if(e===this._isActive)return;this._isActive=e;const t=this._domElement;e?t.classList.add(i.CSSClasses.MULTI_LINE_ACTIVE):t.classList.remove(i.CSSClasses.MULTI_LINE_ACTIVE)}setHover(e){if(e===this._isHovered)return;this._isHovered=e;const t=this._domElement;e?t.classList.add(i.CSSClasses.MULTI_LINE_HOVERED):t.classList.remove(i.CSSClasses.MULTI_LINE_HOVERED)}}},168:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(2555),n=s(7183),o=s(2528),r=s(2914),a=s(5006),l=s(6606);class h extends n.EventEmitter{constructor(e){super(),this._mountPoint=null,this._emitterName="scroll-bar",this._scrollBarContainer=null,this._scrollableDiv=null,this._firstVisibleRow=0,this._visibleRowsCount=0,this._totalRowsCount=50,this._maxRowsPadding=10,this._scale=20,this._onScroll=()=>{if(null===this._scrollBarContainer)return;const e=Math.ceil(this._scrollBarContainer.scrollTop/this._scale);this._firstVisibleRow=e,this.emit(o.EvScroll.Changed,{firstVisibleRow:e,emitterName:this._emitterName})},this._view=e,this._mountPoint=e.getDOMElement(),this._createScrollContainer(),this._initEventListeners()}get _session(){return this._view.session}update(){this._updateScrollPosition()}setTotalRowsCount(e){if(this._totalRowsCount=e,this._updateScale(),this._scrollableDiv){let t=(e+this._maxRowsPadding)*this._scale;this._totalRowsCount>r.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE&&(t*=1.01),this._scrollableDiv.style.height=(0,i.px)(t)}}setFirstVisibleRow(e){this._firstVisibleRow=e}setVisibleRowsCount(e){this._visibleRowsCount=e}setMaxRowsPadding(e){this._maxRowsPadding=e}_createScrollContainer(){null!==this._mountPoint&&(this._scrollBarContainer=(0,i.createDiv)(a.CSSClasses.SCROLL_BAR),this._scrollableDiv=(0,i.createDiv)(a.CSSClasses.SCROLL_INNER),this._scrollBarContainer.appendChild(this._scrollableDiv),this._mountPoint.appendChild(this._scrollBarContainer),this._scrollBarContainer.style.gridArea="1/3/2/4")}_updateScrollPosition(){null!==this._scrollBarContainer&&(this._scrollBarContainer.scrollTop=Math.ceil(this._firstVisibleRow*this._scale))}_initEventListeners(){this._scrollBarContainer&&(this._scrollBarContainer.addEventListener("mousedown",(()=>{this._onMouseDown()})),this._scrollBarContainer.addEventListener("mouseup",(()=>{this._onMouseUp()}))),this._view.on(o.EvScroll.Changed,(e=>{e.emitterName!==this._emitterName&&(this.setFirstVisibleRow(e.firstVisibleRow),this.update())})),this._view.on(l.EvDocument.Edited,(()=>{const e=this._session.reader.getTotalRowsCount();this.setTotalRowsCount(e)})),this._view.on(l.EvDocument.LinesCount,(()=>{const e=this._session.reader.getTotalRowsCount();this.setTotalRowsCount(e)})),this._view.on(l.EvDocument.Set,(()=>{const e=this._session.reader.getTotalRowsCount();this.setTotalRowsCount(e)})),this._view.on(o.EvWrap.Changed,(()=>{const e=this._session.reader.getTotalRowsCount();this.setTotalRowsCount(e)}))}_onMouseDown(){this._scrollBarContainer&&this._scrollBarContainer.addEventListener("scroll",this._onScroll)}_onMouseUp(){this._scrollBarContainer&&this._scrollBarContainer.removeEventListener("scroll",this._onScroll)}_updateScale(){this._totalRowsCount>r.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE?this._scale=.1:this._scale=20}}t.default=h},3421:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(7183),n=s(2555),o=s(2528),r=s(5006),a=s(4938),l=s(6606),h=s(8593);class c extends i.EventEmitter{constructor(e){super(),this._mountPoint=null,this._searchContainer=null,this._closeButton=null,this._nextResultButton=null,this._prevResultButton=null,this._caseSensitiveToggleButton=null,this._regexToggleButton=null,this._selectionSearchToggleButton=null,this._replaceButton=null,this._replaceAllButton=null,this._input=null,this._replaceInput=null,this._resultsContainer=null,this._isOpen=!1,this._seatchMatchesCount=0,this._searchPhrase="",this._regexpSearch=!1,this._caseSensitiveSearch=!1,this._selectionSearch=!1,this._view=e,this._mountPoint=e.getDOMElement(),this._createSearchContainer(),this._initEventListeners(),this._search=(0,h.debounce)(this._search.bind(this),300)}get _session(){return this._view.session}update(){if(this._resultsContainer){const e=this._session.searchResults.activeSearchResultNumber;e>-1&&this._seatchMatchesCount>0?this._resultsContainer.textContent=`${e+1} of ${this._seatchMatchesCount}`:this._resultsContainer.textContent="No results"}this._input&&this._input.value!==this._searchPhrase&&(this._input.value=this._searchPhrase)}show(){var e,t;this._isOpen=!0,this._searchContainer&&(this._searchContainer.style.display="flex"),null===(e=this._input)||void 0===e||e.focus(),null===(t=this._input)||void 0===t||t.select(),this._session.enableSearchAfterEdit()}hide(){this._isOpen=!1,this._searchContainer&&(this._searchContainer.style.display="none"),this._session.disableSearchAfterEdit()}getDOMElement(){return this._searchContainer}_search(){this._session.search(this._searchPhrase)}_initEventListeners(){this._view.on(o.EvSearchUi.Open,(({phrase:e})=>{if(null!==e){if(!this._input)return;this._searchPhrase=e,this._session.search(this._searchPhrase)}this.show(),this.update()})),this._view.on(a.EvSearch.Finished,(()=>{this._seatchMatchesCount=this._session.getSearchMatchCount(),this.update()})),this._view.on(l.EvDocument.Set,(()=>{this._isOpen?(this._session.enableSearchAfterEdit(),this._session.setCaseSensitiveSearch(this._caseSensitiveSearch),this._session.setSelectionSearch(this._selectionSearch),this._session.setRegExpSearch(this._regexpSearch)):(this._session.disableSearchAfterEdit(),this._setCaseSensitiveSearch(this._session.caseSensitiveSearch),this._setSelectionSearch(this._session.selectionSearch),this._setRegExpSearch(this._session.regexpSearch)),this._input&&this._searchPhrase&&this._isOpen&&this._session.search(this._searchPhrase)})),this._closeButton&&this._closeButton.addEventListener("click",(()=>{this.emit(o.EvSearchUi.Close,void 0),this.hide()})),this._input&&this._input.addEventListener("input",(()=>{this._input&&(this._searchPhrase=this._input.value,this._search())})),this._nextResultButton&&this._nextResultButton.addEventListener("click",(()=>{this._session.nextSearchResult()})),this._prevResultButton&&this._prevResultButton.addEventListener("click",(()=>{this._session.prevSearchResult()})),this._caseSensitiveToggleButton&&this._caseSensitiveToggleButton.addEventListener("click",(()=>{const e=this._session.toggleCaseSensitiveSearch();this._setCaseSensitiveSearch(e)})),this._selectionSearchToggleButton&&this._selectionSearchToggleButton.addEventListener("click",(()=>{const e=this._session.toggleSelectionSearch();this._setSelectionSearch(e)})),this._regexToggleButton&&this._regexToggleButton.addEventListener("click",(()=>{const e=this._session.toggleRegExpSearch();this._setRegExpSearch(e)})),this._replaceButton&&this._replaceButton.addEventListener("click",(()=>{this._replaceInput&&this._session.writer.replaceSearchResult(this._replaceInput.value)})),this._replaceAllButton&&this._replaceAllButton.addEventListener("click",(()=>{this._replaceInput&&this._session.writer.replaceAllSearchResult(this._replaceInput.value)}))}_setCaseSensitiveSearch(e){var t,s;e?null===(t=this._caseSensitiveToggleButton)||void 0===t||t.classList.add("nc-search__button--active"):null===(s=this._caseSensitiveToggleButton)||void 0===s||s.classList.remove("nc-search__button--active"),this._caseSensitiveSearch=e}_setSelectionSearch(e){var t,s;e?null===(t=this._selectionSearchToggleButton)||void 0===t||t.classList.add("nc-search__button--active"):null===(s=this._selectionSearchToggleButton)||void 0===s||s.classList.remove("nc-search__button--active"),this._selectionSearch=e}_setRegExpSearch(e){var t,s;e?null===(t=this._regexToggleButton)||void 0===t||t.classList.add("nc-search__button--active"):null===(s=this._regexToggleButton)||void 0===s||s.classList.remove("nc-search__button--active"),this._regexpSearch=e}_createSearchContainer(){if(null===this._mountPoint)return;const e=(0,n.createDiv)(r.CSSClasses.SEARCH);this._searchContainer=e,this._searchContainer.innerHTML='\n\t\t<div class="nc-search__main">\n\t\t\t<div class="nc-search__inputs">\n\t\t\t\t<textarea class="nc-search__input" autofocus="" placeholder="Search..."></textarea>\n\t\t\t\t<textarea class="nc-search__input" placeholder="Repalce..."></textarea>\n\t\t\t</div>\n\t\t\t<div class="nc-search__controls">\n\t\t\t\t<div class="nc-search__controls-container">\n\t\t\t\t\t<button class="nc-search__button">Aa</button>\n\t\t\t\t\t<button class="nc-search__button">.*</button>\n\t\t\t\t\t<button class="nc-search__button">S</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="nc-search__controls-container">\n\t\t\t\t\t<button class="nc-search__button">Replace</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="nc-search__controls-container">\n\t\t\t\t\t<button class="nc-search__button">Replace All</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="nc-search__close">\n\t\t\t\t<button class="nc-search__button">X</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="nc-search__nav">\n\t\t\t<div class="nc-search__result">\n\t\t\t\t0 of 0\n\t\t\t</div>\n\t\t\t<div class="nc-search__controls">\n\t\t\t\t<div class="nc-search__controls-container">\n\t\t\t\t\t<button class="nc-search__button"></button>\n\t\t\t\t\t<button class="nc-search__button"></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>',this._mountPoint.appendChild(this._searchContainer),this._input=e.querySelectorAll("textarea")[0],this._replaceInput=e.querySelectorAll("textarea")[1],this._closeButton=e.querySelector(".nc-search__close > .nc-search__button"),this._resultsContainer=e.querySelector(".nc-search__result"),this._prevResultButton=e.querySelectorAll(".nc-search__nav button")[0],this._nextResultButton=e.querySelectorAll(".nc-search__nav button")[1],this._caseSensitiveToggleButton=e.querySelectorAll(".nc-search__main button")[0],this._regexToggleButton=e.querySelectorAll(".nc-search__main button")[1],this._selectionSearchToggleButton=e.querySelectorAll(".nc-search__main button")[2],this._replaceButton=e.querySelectorAll(".nc-search__main button")[3],this._replaceAllButton=e.querySelectorAll(".nc-search__main button")[4],this.hide()}}t.default=c},1757:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(6924),n=s(5006),o=s(2555);t.default=class{constructor(e){this._selection=e}setSelection(e){this._selection=e}render(e,t){const s=this._selection;if(s.isCollapsed||0===e.length)return"";const r=e[0],a=e[e.length-1];if(r.line>s.end.line)return"";if(a.line<s.start.line)return"";if(r.line===s.end.line&&r.offset>s.end.offset)return"";if(a.line===s.start.line&&a.offset+a.text.length<s.start.offset)return"";let l=0,h=0;if(s.start.line>=r.line)for(let t=0;t<e.length;t++){const i=e[t];if(i.line===s.start.line&&i.offset+i.text.length>=s.start.offset){l=t,h=s.start.offset-e[t].offset;break}}let c=e.length-1,u=a.text.length;if(s.end.line<=a.line)for(let t=l;t<e.length;t++){const i=e[t];if(i.line===s.end.line&&i.offset+i.text.length>=s.end.offset){c=t,u=s.end.offset-i.offset;break}}const d=e.map((e=>e.text.length));let _="";for(let s=l;s<c+1;s++){const r=e[s].text;let a=0,f=(0,i.offsetToColumn)(r,d[s]);s===l&&(a=(0,i.offsetToColumn)(r,h)),s===c&&(f=(0,i.offsetToColumn)(r,u));const g=(0,o.px)(a*t),p=(0,o.px)(20*s),m=(0,o.px)((f-a)*t||t),S=(0,o.px)(20);_+=`<div class="${n.CSSClasses.SELECTION_RANGE}" style="top: ${p}; left: ${g}; width: ${m}; height: ${S}"></div>`}return _}}},7551:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(6729),o=s(6924),r=s(5006),a=s(2555),l=i(s(1757)),h=s(2528),c=s(7183),u=s(6048),d=s(4938),_=s(6606),f=s(9683);class g extends c.EventEmitter{constructor(e){super(),this._emitterName="selection-layer",this._mountPoint=null,this._selectionContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._lineHeight=20,this._letterWidth=0,this._visibleSelections=[],this._isMouseHold=!1,this._isTouchHold=!1,this._isTouchSelecting=!1,this._isCtrlHold=!1,this._isShitHold=!1,this._isAltHold=!1,this._lastTouchTime=null,this._lastTouchPosition=new n.Point(0,0),this._showSearchResults=!1,this._view=e,this._mountPoint=e.getDOMElement(),this._crateSelctionContainer(),this._initEventListeners()}get _session(){return this._view.session}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}update(){if(this._selectionContainer){const e=this._renderSelections(),t=this._renderCursors(),s=this._renderSearchResults();this._selectionContainer.innerHTML=e+t+s}}_crateSelctionContainer(){null!==this._mountPoint&&(this._selectionContainer=(0,a.createDiv)(r.CSSClasses.SELECTION),this._mountPoint.appendChild(this._selectionContainer),this._selectionContainer.style.gridArea="1/2/2/3",this._selectionContainer.style.position="relative",this._selectionContainer.style.zIndex="4",this._selectionContainer.style.marginLeft=(0,a.em)(1))}_initEventListeners(){this._view.on(h.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleRow),this.update()})),this._view.on(h.EvFont.LetterWidth,(e=>{this._letterWidth=e.width,this.update()})),this._view.on(h.EvKey.CtrlDown,(()=>{this._isCtrlHold=!0})),this._view.on(h.EvKey.CtrlUp,(()=>{this._isCtrlHold=!1})),this._view.on(h.EvKey.ShiftDown,(()=>{this._isShitHold=!0})),this._view.on(h.EvKey.ShiftUp,(()=>{this._isShitHold=!1})),this._view.on(h.EvKey.AltDown,(()=>{this._isAltHold=!0})),this._view.on(h.EvKey.AltUp,(()=>{this._isAltHold=!1})),this._view.on(h.EvSearchUi.Open,(()=>{this._showSearchResults=!0,this.update()})),this._view.on(h.EvSearchUi.Close,(()=>{this._showSearchResults=!1,this.update()})),this._view.on(d.EvSelection.Changed,(()=>{this.update()})),this._view.on(d.EvSearch.Finished,(()=>{this.update()})),this._view.on(_.EvDocument.Set,(()=>{this.update()})),this._selectionContainer&&(this._selectionContainer.addEventListener("mousedown",(e=>this._onMouseDown(e))),this._selectionContainer.addEventListener("mouseup",(()=>this._onMouseUp())),this._selectionContainer.addEventListener("mousemove",(e=>this._onMouseMove(e))),this._selectionContainer.addEventListener("dblclick",(e=>this._onDoubleClick(e))),this._selectionContainer.addEventListener("touchstart",(e=>this._onTouchStart(e))),this._selectionContainer.addEventListener("touchend",(()=>this._onTouchEnd())),this._selectionContainer.addEventListener("touchmove",(e=>this._onTouchMove(e))))}_renderSelections(){if(null===this._selectionContainer)return"";const e=this._session.getSelctions(),t=this._session.reader.getRows(this._firstVisibleLine,this._visibleLinesCount);let s="";if(0===t.length)return"";if(e.length===this._visibleSelections.length)for(let i=0;i<e.length;i++)this._visibleSelections[i].setSelection(e[i]),s+=this._visibleSelections[i].render(t,this._letterWidth);else{this._visibleSelections=[];for(let i=0;i<e.length;i++){const n=new l.default(e[i]);this._visibleSelections.push(n),s+=this._visibleSelections[i].render(t,this._letterWidth)}}return s}_renderCursors(){if(null===this._selectionContainer)return"";const e=this._session.getSelctions(),t=this._session.reader.getRows(this._firstVisibleLine,this._visibleLinesCount);if(0===t.length)return"";let s="";const i=t[0].line,a=t[t.length-1].line;for(const l of e){let e=new n.Point(0,0);if(e=l.type===u.SelectionType.L?l.start:l.end,e.line<i)continue;if(e.line===i&&e.offset<t[0].offset)continue;if(e.line>a)continue;if(e.line===a&&e.offset>t[t.length-1].offset+t[t.length-1].text.length)continue;let h=-1,c=-1;for(h=0;h<t.length;h++){const s=t[h];if(s.line===e.line&&s.offset<=e.offset&&s.offset+s.text.length>=e.offset){c=e.offset-s.offset;break}}if(h===t.length)continue;const d=(0,o.offsetToColumn)(t[h].text,c)*this._letterWidth,_=h*this._lineHeight;s+=`<div class="${r.CSSClasses.CURSOR+" "+r.CSSClasses.CURSOR_ANIMATED}" style="top: ${_}px; left: ${d}px"></div>`}return s}_renderSearchResults(){if(null===this._selectionContainer||!this._showSearchResults)return"";const e=this._session.reader.getRows(this._firstVisibleLine,this._visibleLinesCount);let t="";for(let s=0;s<e.length;s++){const i=e[s],n=s*this._lineHeight;for(const e of i.searchResults){const s=(0,o.offsetToColumn)(i.text,e.start.offset),l=((0,o.offsetToColumn)(i.text,e.end.offset)-s)*this._letterWidth,h=e.isActive?" "+r.CSSClasses.SELECTION_SEARCH_ACTIVE:"";t+=`<div class="${r.CSSClasses.SELECTION_SEARCH+h}" style="top: ${(0,a.px)(n)}; left: ${(0,a.px)(s*this._letterWidth)}; width: ${(0,a.px)(l)}; height: ${(0,a.px)(this._lineHeight)}"></div>`}}return t}_onMouseDown(e){this._isMouseHold=!0;const[t,s]=(0,f.getRelativePositionOfMouseEvent)(e),[i,o]=this._getLineAndOffsetAtPosition(t,s),r=Math.round(t/this._letterWidth);this._isShitHold?this._isAltHold?this._session.extendRectangleSelection(new n.Point(i,r)):this._session.extendLastSelection(new n.Point(i,o)):this._isCtrlHold?this._session.addSelection(new n.Selection(i,o,i,o)):this._session.setSelection(new n.Selection(i,o,i,o))}_onMouseUp(){this._isMouseHold=!1}_onMouseMove(e){if(this._isMouseHold){const[t,s]=(0,f.getRelativePositionOfMouseEvent)(e),[i,o]=this._getLineAndOffsetAtPosition(t,s),r=Math.round(t/this._letterWidth);this._isShitHold&&this._isAltHold?this._session.extendRectangleSelection(new n.Point(i,r)):this._session.extendLastSelection(new n.Point(i,o))}}_onDoubleClick(e){const[t,s]=(0,f.getRelativePositionOfMouseEvent)(e),[i,o]=this._getLineAndOffsetAtPosition(t,s);this._isShitHold||this._session.selectWordAt(new n.Point(i,o),this._isCtrlHold)}_onTouchStart(e){this._isTouchHold=!0;const[t,s]=(0,f.getRelativePositionOfTouchEvent)(e),[i,o]=this._getLineAndOffsetAtPosition(t,s),r=performance.now();null!==this._lastTouchTime&&r-this._lastTouchTime<200&&(this._isTouchSelecting=!0,this._session.setSelection(new n.Selection(i,o,i,o))),this._lastTouchTime=r,this._lastTouchPosition.line=s,this._lastTouchPosition.offset=t,e.preventDefault(),e.stopPropagation()}_onTouchEnd(){this._isTouchHold=!1,this._isTouchSelecting=!1}_onTouchMove(e){if(this._isTouchHold){const[t,s]=(0,f.getRelativePositionOfTouchEvent)(e),[i,o]=this._getLineAndOffsetAtPosition(t,s);if(this._isTouchSelecting)this._session.extendLastSelection(new n.Point(i,o));else{const e=this._lastTouchPosition.line-s,t=e>0?Math.min(Math.round(e/4),2):Math.max(Math.round(e/4),-2);this.emit(h.EvScroll.Changed,{firstVisibleRow:t+this._firstVisibleLine,emitterName:this._emitterName})}this._lastTouchPosition.line=s,this._lastTouchPosition.offset=t}}_getLineAndOffsetAtPosition(e,t){const s=Math.floor(t/this._lineHeight)+this._firstVisibleLine;let i=0,n=0;try{const t=this._session.reader.getRows(s,1)[0],r=Math.round(e/this._letterWidth);i=(0,o.columnToOffset)(t.text,r),i+=t.offset,n=t.line}catch(e){const t=this._session.reader.getLastLine();if(null===t)return[0,0];i=(0,o.columnToOffset)(t.rawText,1/0),n=this._session.reader.getTotalLinesCount()-1}return[n,i]}}t.default=g},1681:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(7183),o=s(2555),r=i(s(6209)),a=s(2528),l=s(8593),h=s(5006),c=s(6606),u=s(4938);class d extends n.EventEmitter{constructor(e){super(),this._mountPoint=null,this._textContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._visibleRows=[],this._activeLineNumber=0,this._hoveredLineNumber=0,this._lineHeight=20,this._letterWidth=0,this._rightPadding=20,this._view=e,this._mountPoint=e.getDOMElement(),this._createTextContainer(),this._initEventListeners(),this._measureLetterWidth()}get _session(){return this._view.session}get _highlighterSchema(){return this._session.highlightingSchema}updateSessionRowWidth(){if(null===this._textContainer)return;const e=this._textContainer.getBoundingClientRect(),t=this._rightPadding,s=Math.floor((e.width-t)/this._letterWidth);this._session.setVisibleColumnsCount(s)}_initEventListeners(){this._view.on(a.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleRow),this.update()})),this._view.on(c.EvDocument.Edited,(()=>{this.update()})),this._view.on(c.EvTokenizer.Finished,(()=>{this.update()})),this._view.on(u.EvSelection.Changed,(()=>{this._updateActiveRows()})),this._view.on(c.EvDocument.Set,(()=>{this.update()}))}_createTextContainer(){null!==this._mountPoint&&(this._textContainer=(0,o.createDiv)(h.CSSClasses.TEXT_LAYER),this._mountPoint.appendChild(this._textContainer),this._textContainer.style.gridArea="1/2/2/3")}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}update(){this._renderRows()}measureLetterWidth(){return this._measureLetterWidth()}_updateActiveRows(){if(null==this._textContainer)return;const e=this._session.getActiveRowsNumbers(this._firstVisibleLine,this._visibleLinesCount);for(let t=0;t<this._visibleRows.length;t++)this._visibleRows[t].setActive(e.has(this._firstVisibleLine+t))}_measureLetterWidth(){if(null===this._textContainer)return;const e=(0,o.createDiv)("");e.style.padding="0",e.style.margin="0",e.style.width="fit-content",e.textContent="qwertyuiopASDFGHJKLX",this._textContainer.appendChild(e),this._letterWidth=e.offsetWidth/20,this._textContainer.removeChild(e),this._session.letterWidth=this._letterWidth,this.emit(a.EvFont.LetterWidth,{width:this._letterWidth})}_renderRows(){if(null===this._textContainer)return;const e=this._session.getActiveRowsNumbers(this._firstVisibleLine,this._visibleLinesCount),t=this._session.reader.getRows(this._firstVisibleLine,this._visibleLinesCount);this._visibleRows=[];for(let s=0;s<t.length;s++){const i=t[s];this._renderRow(this._visibleRows,i,i.line===this._activeLineNumber),this._visibleRows[s].setActive(e.has(this._firstVisibleLine+s))}const s=this._visibleRows.map((e=>e.getNode())).filter(l.notEmpty);this._textContainer.replaceChildren(...s)}_renderRow(e,t,s){const i=new r.default(t,s,this._highlighterSchema);e.push(i)}}t.default=d},2248:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(7183),o=i(s(1681)),r=i(s(8285)),a=i(s(168)),l=i(s(7551)),h=i(s(9805)),c=s(2555),u=s(1556),d=s(2528),_=s(2914),f=s(5006),g=s(6048),p=i(s(3421)),m=s(1117),S=s(6606),v=s(4938),E=s(8593);class C extends n.EventEmitter{constructor(e,t){super(),this._mountPoint=null,this._editorContainer=null,this._emitterName="editor-view",this._textLayer=null,this._gutter=null,this._scrollBar=null,this._selectionLayer=null,this._input=null,this._search=null,this._firstVisibleRow=0,this._visibleRowsCount=0,this._scrollHeight=0,this._scrollWidth=0,this._scrollLeft=0,this._scrollbarWidth=15,this._gutterWidth=50,this._isFocused=!1,this._height=0,this._width=0,this._lineHeight=20,this._fontSize=12,this._fontFamily=_.EDITOR_FONT_FAMILY,this._letterWidth=8,this._hoverLineNumber=-1,this._activeLineNumber=-1,this._isCtrlHold=!1,this._isShitHold=!1,this._isLeftAltHold=!1,this._isRightAltHold=!1,this._theme=u.Theme.Default,this._resizeObserver=new ResizeObserver((()=>{})),this._onDocumentEdit=this._onDocumentEdit.bind(this),this._onTokenizerFinished=this._onTokenizerFinished.bind(this),this._onSelectionChanged=this._onSelectionChanged.bind(this),this._onLinesCountChanged=this._onLinesCountChanged.bind(this),this._onSearchFinished=this._onSearchFinished.bind(this),this._onWrapChanged=this._onWrapChanged.bind(this),this._editor=e;let s=e.getLatestDocumentId();if(!s){const t=new m.Document("doc");s=e.addDocument(t)}this._sessionId=e.createSession(s),this._session=e.getSession(this._sessionId),this._session.wrapper.wrap(),this._docSession=e.getDocumentSession(s),this.mount(t),this._textLayer=new o.default(this),this._selectionLayer=new l.default(this),this._gutter=new r.default(this),this._scrollBar=new a.default(this),this._input=new h.default(this),this._search=new p.default(this),this._scrollBarInitialConfig(),this._initEventListeners(),this._createInputElement(),this._scrollToLine(0,this._emitterName),this.setTheme(u.Theme.Default),this._textLayer.measureLetterWidth(),this._emitInitEvent(),this._createResizeObserver()}get session(){return this._session}get reader(){return this._session.reader}get writer(){return this._session.writer}get visibleRowsCount(){return this._visibleRowsCount}mount(e){if("string"==typeof e){const t=document.getElementById(e);if(null===t)throw new Error(`Element with id="${e}" does not exist.`);this._mountPoint=t}else typeof e===HTMLElement.toString()&&(this._mountPoint=e);return this._createEditorContainer(),this._updateEditorSize(),this._createInputElement(),this.setTheme(u.DEFAULT_THEME),0}unmount(){this._mountPoint&&(this._mountPoint.textContent="")}setTheme(e){const t=e;let s=!1;for(const e of u.VALID_THEMES)if(e===t&&e.length===t.length){s=!0;break}if(!s)throw new Error("Invalid theme name");if(this._theme=t,null===this._editorContainer)return 1;for(const e of u.VALID_THEMES)this._editorContainer.classList.remove(u.BASE_THEME_CLASS+e);return this._editorContainer.classList.add(u.BASE_THEME_CLASS+t),this.emit(d.EvTheme.Changed,{theme:this._theme}),0}setSession(e){this._session=this._editor.getSession(e),this._docSession=this._session.documentSession,this._sessionId=e,this._clearSessionEventListeners(),this._initSessionEventListeners(),this.emit(S.EvDocument.Set,void 0),this.scrollTolastSelection()}setDocument(e,t=!1){t?(this._sessionId=this._editor.createSession(e),this._session=this._editor.getSession(this._sessionId),this._docSession=this._editor.getDocumentSession(e)):(this._session=this._editor.getEditSessionForDocument(e),this._docSession=this._session.documentSession,this._sessionId=this._session.id),this._clearSessionEventListeners(),this._initSessionEventListeners(),this.emit(S.EvDocument.Set,void 0),this.scrollTolastSelection()}update(){this._updateEditorSize()}getDOMElement(){return this._editorContainer}_emitInitEvent(){this.emit(d.EvView.Initialized,void 0)}_scrollBarInitialConfig(){this._scrollBar&&this._scrollBar.setMaxRowsPadding(10)}_createEditorContainer(){null!==this._mountPoint&&(this._editorContainer=(0,c.createDiv)(f.CSSClasses.EDITOR),this._mountPoint.appendChild(this._editorContainer),this._editorContainer.style.fontFamily=this._fontFamily,this._editorContainer.style.fontSize=(0,c.px)(this._fontSize),this._editorContainer.style.lineHeight=(0,c.px)(this._lineHeight),this._updateGridLayout())}_createResizeObserver(){const e=(0,E.debounce)((()=>{var e;const t=this.reader.getRows(this._firstVisibleRow,1);null===(e=this._textLayer)||void 0===e||e.updateSessionRowWidth(),t.length>0?this.scrollToLine(t[0].line):this.scrollTolastSelection()}),100);this._resizeObserver=new ResizeObserver(e),this._editorContainer&&this._resizeObserver.observe(this._editorContainer)}_updateGridLayout(){this._editorContainer&&(this._editorContainer.style.gridTemplate=`100% / ${(0,c.px)(this._gutterWidth)} 1fr ${(0,c.px)(this._scrollbarWidth)}`)}_createInputElement(){this._editorContainer&&this._input&&this._input.render(this._editorContainer)}_updateEditorSize(){null!==this._editorContainer&&(this._height=this._editorContainer.clientHeight,this._width=this._editorContainer.clientWidth,this._visibleRowsCount=Math.ceil(this._height/this._lineHeight),this._gutter&&this._gutter.setVisibleRowsCount(this._visibleRowsCount),this._textLayer&&this._textLayer.setVisibleLinesCount(this._visibleRowsCount),this._scrollBar&&this._scrollBar.setVisibleRowsCount(this._visibleRowsCount),this._selectionLayer&&this._selectionLayer.setVisibleLinesCount(this._visibleRowsCount))}_initEventListeners(){window.addEventListener("resize",(()=>this._onResize())),this._editorContainer&&(this._editorContainer.addEventListener("mousewheel",(e=>this._onMouseWheel(e))),this._editorContainer.addEventListener("click",(e=>this._onMouseDown(e))),this._editorContainer.addEventListener("blur",(()=>this._onBlur())),this._editorContainer.addEventListener("keydown",(e=>this._onKeyDown(e))),this._editorContainer.addEventListener("keyup",(e=>this._onKeyUp(e))),this._editorContainer.addEventListener("paste",(e=>this._onPaste(e)))),this._scrollBar&&this._scrollBar.on(d.EvScroll.Changed,(e=>{this._scrollToRow(e.firstVisibleRow,e.emitterName)})),this._textLayer&&this._textLayer.on(d.EvFont.LetterWidth,(e=>{this._letterWidth=e.width,this.emit(d.EvFont.LetterWidth,{width:e.width})})),this._gutter&&this._gutter.on(d.EvGutter.Width,(e=>{var t;this._gutterWidth=e.width,this._updateGridLayout(),null===(t=this._textLayer)||void 0===t||t.updateSessionRowWidth()})),this._selectionLayer&&this._selectionLayer.on(d.EvScroll.Changed,(e=>{this._scrollToRow(e.firstVisibleRow,e.emitterName)})),this._search&&this._search.on(d.EvSearchUi.Close,(()=>{this.emit(d.EvSearchUi.Close,void 0),this._setFocus(!0)})),this._initSessionEventListeners()}_initSessionEventListeners(){this._docSession.on(S.EvDocument.Edited,this._onDocumentEdit),this._docSession.on(S.EvTokenizer.Finished,this._onTokenizerFinished),this._session.on(v.EvSelection.Changed,this._onSelectionChanged),this._docSession.on(S.EvDocument.LinesCount,this._onLinesCountChanged),this._session.on(v.EvSearch.Finished,this._onSearchFinished),this._session.on(d.EvWrap.Changed,this._onWrapChanged)}_clearSessionEventListeners(){this._docSession.off(S.EvDocument.Edited,this._onDocumentEdit),this._docSession.off(S.EvTokenizer.Finished,this._onTokenizerFinished),this._session.off(v.EvSelection.Changed,this._onSelectionChanged),this._docSession.off(S.EvDocument.LinesCount,this._onLinesCountChanged),this._session.off(v.EvSearch.Finished,this._onSearchFinished),this._session.off(d.EvWrap.Changed,this._onWrapChanged)}_onWrapChanged({enabled:e}){this.emit(d.EvWrap.Changed,{enabled:e}),this._scrollToRow(this._firstVisibleRow)}_onDocumentEdit(){this.emit(S.EvDocument.Edited,void 0)}_onTokenizerFinished(){this.update(),this.emit(S.EvTokenizer.Finished,void 0)}_onSelectionChanged(){const e=this._session.getSelctions();if(e.length>0){const t=e[e.length-1],s=t.type===g.SelectionType.L?t.start:t.end;this._isCursorVisible(s)||this.scrollTolastSelection()}this.emit(v.EvSelection.Changed,void 0)}_onLinesCountChanged(e){this.emit(S.EvDocument.LinesCount,e)}_onSearchFinished(){const e=this._session.searchResults;if(e.matchCount>0){const t=e.getActiveSearchResPosition();this._isCursorVisible(t.start)||this._scrollToLine(t.start.line)}this.emit(v.EvSearch.Finished,void 0)}_onPaste(e){var t;(null===(t=this._input)||void 0===t?void 0:t.isFocused)&&(e.clipboardData&&this.writer.insert(e.clipboardData.getData("text")),e.stopPropagation(),e.preventDefault())}_onResize(){this._updateEditorSize(),this.update()}_onMouseWheel(e){const t=Math.round(e.deltaY/Math.abs(e.deltaY)*3);this._scrollToRow(this._firstVisibleRow+t,this._emitterName),e.preventDefault(),e.stopPropagation()}_onMouseDown(e){this._search&&(0,c.isChildOf)(this._search.getDOMElement(),e.target)||this._setFocus(!0)}_onBlur(){this._setFocus(!1),this.update()}_onKeyDown(e){var t;if(null===(t=this._input)||void 0===t?void 0:t.isFocused)switch(e.code){case"ControlLeft":this._isCtrlHold=!0,this.emit(d.EvKey.CtrlDown,void 0);break;case"ShiftLeft":this._isShitHold=!0,this.emit(d.EvKey.ShiftDown,void 0);break;case"AltLeft":this._isLeftAltHold=!0,this.emit(d.EvKey.AltDown,void 0);break;case"AltRight":this._isRightAltHold=!0;break;case"KeyA":this._isCtrlHold&&!this._isRightAltHold&&this._session.selectAll();break;case"ArrowUp":this._isLeftAltHold?this.writer.swapLinesUp():this._session.collapseSelectionToTop();break;case"ArrowDown":this._isLeftAltHold?this.writer.swapLinesDown():this._session.collapseSelectionToBottom();break;case"ArrowLeft":this._isShitHold&&this._isCtrlHold?this._session.selectWordBefore():this._isCtrlHold?this._session.moveSelectionWordBefore():this._session.collapseSelectionToLeft();break;case"ArrowRight":this._isShitHold&&this._isCtrlHold?this._session.selectWordAfter():this._isCtrlHold?this._session.moveSelectionWordAfter():this._session.collapseSelectionToRight();break;case"Home":this._isShitHold?this._session.selectStartOfTheLine():this._session.collapseSelectionToHome();break;case"End":this._isShitHold?this._session.selectEndOfTheLine():this._session.collapseSelectionToEnd();break;case"Backspace":this._isCtrlHold?this.writer.removeWordBefore():this.writer.remove();break;case"Delete":this._isCtrlHold?this.writer.removeWordAfter():this.writer.remove(1);break;case"Tab":this._isShitHold?this.writer.removeIndentFromSelectedLines():1===this._session.getSelectedLinesCount()?this.writer.insert("\t"):this.writer.indentSelectedLines(),e.stopPropagation(),e.preventDefault();break;case"KeyX":this._isCtrlHold&&this.writer.cut();break;case"KeyC":this._isCtrlHold&&this.writer.copy();break;case"KeyF":if(this._isCtrlHold){const t=this._session.reader.getSelectedText();this.emit(d.EvSearchUi.Open,{phrase:t||null}),e.preventDefault(),e.stopPropagation()}break;case"KeyZ":if(this._isCtrlHold)this._session.undo(),e.preventDefault(),e.stopPropagation();else if(this._isLeftAltHold){const t=this.reader.getRows(this._firstVisibleRow,1);this._session.isWrapEnabled?this._session.disableWrap():this._session.enableWrap(),t.length>0?this.scrollToLine(t[0].line):this.scrollTolastSelection(),e.preventDefault(),e.stopPropagation()}break;case"KeyY":this._isCtrlHold&&(this._session.redo(),e.preventDefault(),e.stopPropagation())}}_onKeyUp(e){switch(e.code){case"ControlLeft":this._isCtrlHold=!1,this.emit(d.EvKey.CtrlUp,void 0);break;case"ShiftLeft":this._isShitHold=!1,this.emit(d.EvKey.ShiftUp,void 0);break;case"AltLeft":this._isLeftAltHold=!1,this.emit(d.EvKey.AltUp,void 0);break;case"AltRight":this._isRightAltHold=!1}}_onDocumentClick(e){const t=e.target;(0,c.isChildOf)(this._editorContainer,t)?(this._setFocus(!0),this.update()):(this._setFocus(!1),this.update())}scrollToLine(e){this._scrollToLine(e,this._emitterName)}scrollTolastSelection(){const e=this._session.selections.getSelections();if(0===e.length)return void this.scrollToLine(0);const t=e[e.length-1];t.type===g.SelectionType.L?this.scrollToLine(t.start.line):this.scrollToLine(t.end.line)}_setFocus(e){this._isFocused=e,this.emit(d.EvFocus.Changed,{focused:e})}_scrollToRow(e,t=this._emitterName){let s=this.reader.getTotalRowsCount();s=s<0?0:s,e<0||s-this._visibleRowsCount<0?this._firstVisibleRow=0:e>s-this._visibleRowsCount+10?this._firstVisibleRow=s-this._visibleRowsCount+10:this._firstVisibleRow=e,this.emit(d.EvScroll.Changed,{firstVisibleRow:this._firstVisibleRow,emitterName:t}),this.update()}_scrollToLine(e,t=this._emitterName){let s=this.reader.getTotalLinesCount();s=s<0?0:s,e<0||s-5<0?e=0:e>s-5+10&&(e=s-5+10),this._firstVisibleRow=this.reader.getFirstRowForLine(e),this.emit(d.EvScroll.Changed,{firstVisibleRow:this._firstVisibleRow,emitterName:t}),this.update()}_isCursorVisible(e){const t=this.reader.getFirstRowForLine(e.line);return!(t<this._firstVisibleRow||t>=this._firstVisibleRow+this._visibleRowsCount)}}t.default=C},2528:(e,t)=>{var s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.EvKey=t.EvWrap=t.EvSearchUi=t.EvGutter=t.EvFont=t.EvTheme=t.EvFocus=t.EvScroll=t.EvView=void 0,(t.EvView||(t.EvView={})).Initialized="view.Initialized",(t.EvScroll||(t.EvScroll={})).Changed="scroll.Changed",(t.EvFocus||(t.EvFocus={})).Changed="focus.Changed",(t.EvTheme||(t.EvTheme={})).Changed="theme.Changed",(t.EvFont||(t.EvFont={})).LetterWidth="font.LetterWidthChange",(t.EvGutter||(t.EvGutter={})).Width="gutter.WidthChanged",(i=t.EvSearchUi||(t.EvSearchUi={})).Open="search.Open",i.Close="search.CLose",(t.EvWrap||(t.EvWrap={})).Changed="wrap.Changed",(s=t.EvKey||(t.EvKey={})).CtrlDown="key.Ctrl.down",s.CtrlUp="key.Ctrl.up",s.ShiftDown="key.Shift.down",s.ShiftUp="key.Shift.up",s.AltDown="key.Alt.down",s.AltUp="key.Alt.up"},8637:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorView=void 0;const n=i(s(2248));t.EditorView=n.default},1556:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME=t.Theme=t.BASE_THEME_CLASS=t.VALID_THEMES=void 0,t.VALID_THEMES=["default","light","dark"],t.BASE_THEME_CLASS="nc-theme--",(s=t.Theme||(t.Theme={})).Default="default",s.Light="light",s.Dark="dark",t.DEFAULT_THEME="default"},9683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRelativePositionOfTouchEvent=t.getRelativePositionOfMouseEvent=void 0,t.getRelativePositionOfMouseEvent=function(e){const t=e.target.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]},t.getRelativePositionOfTouchEvent=function(e){const t=e.target.getBoundingClientRect();return[e.touches[0].clientX-t.left,e.touches[0].clientY-t.top]}},8593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=t.randomId=t.randomString=t.notEmpty=void 0;const s=[];function i(e=6){let t="";const s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t+=s[Math.floor(Math.random()*s.length)];return t}t.notEmpty=function(e){return null!=e},t.randomString=i,t.randomId=function(e=6){let t="";do{t=i(e)}while(s.includes(t));return s.push(t),t},t.debounce=function(e,t=100){let s=null;return(...i)=>{s&&(clearTimeout(s),s=null),s=setTimeout((()=>{e(...i)}),t)}}},7285:function(e,t,s){var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,n)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHeight=void 0;const r=o(s(1934));t.nodeHeight=e=>null===e?0:e.height,t.default=class{constructor(){this._rootNode=null,this._linesCount=0,this._rowsCount=0,this.maxRowLength=0}get linesCount(){return this._linesCount}get rowsCount(){return this._rowsCount}clear(){this._rootNode=null,this._linesCount=0,this._rowsCount=0}insertLine(e,t){const s=new r.default(e);this._rootNode=this._insertLine(this._rootNode,s,t,e.data.length)}updateLineData(e,t){const[,s]=this._getNodeByLineNumber(this._rootNode,t);if(null===s)return;const i=s.data;this._rootNode=this._removeLine(this._rootNode,t,i.data.length),this._rootNode=this._insertLine(this._rootNode,new r.default(e),t,e.data.length)}getDataForLines(e,t){const s=[];return this._getLines(this._rootNode,e,t,s),s}getRows(e,t){const s=[];return this._getRows(this._rootNode,e,t,s),s}getLineData(e){var t;const[,s]=this._getNodeByLineNumber(this._rootNode,e);return null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{data:[]}}getFirstLineData(){var e,t;return null!==(t=null===(e=this._getFirstLine(this._rootNode))||void 0===e?void 0:e.data)&&void 0!==t?t:{data:[]}}getLastLineData(){var e,t;return null!==(t=null===(e=this._getLastLine(this._rootNode))||void 0===e?void 0:e.data)&&void 0!==t?t:{data:[]}}removeLine(e){var t;const[,s]=this._getNodeByLineNumber(this._rootNode,e);this._rootNode=this._removeLine(this._rootNode,e,null!==(t=null==s?void 0:s.data.data.length)&&void 0!==t?t:0)}swapLineWithNext(e){const[,t]=this._getNodeByLineNumber(this._rootNode,e);if(null===t)return;const s=this._getNextLine(t);if(null===s)return;const i=t.data,n=s.data;this._rootNode=this._removeLine(this._rootNode,e,i.data.length),this._rootNode=this._removeLine(this._rootNode,e,n.data.length);const o=new r.default(n),a=new r.default(i);this._rootNode=this._insertLine(this._rootNode,o,e,o.data.data.length),this._rootNode=this._insertLine(this._rootNode,a,e+1,a.data.data.length)}swapLineWithPrevious(e){return this.swapLineWithNext(e-1)}getFirstRowForLine(e){const[t]=this._getNodeByLineNumber(this._rootNode,e);return t}_removeLine(e,s,i){var n,o,r;if(null===e)return e;if(s<e.leftSubTreeSize)e.left=this._removeLine(e.left,s,i),e.leftSubTreeSize-=1,e.leftSubTreeRows-=i;else if(s>e.leftSubTreeSize)e.right=this._removeLine(e.right,s-e.leftSubTreeSize-1,i);else if(null===e.left||null===e.right){let t=null;t=t===e.left?e.right:e.left,null===t?(t=e,e=null):(t.parent=e.parent,e=t),this._linesCount-=1,this._rowsCount-=i}else{const t=this._getFirstLine(e.right);e.data=null!==(n=null==t?void 0:t.data)&&void 0!==n?n:{data:[]},e.right=this._removeLine(e.right,null!==(o=null==t?void 0:t.leftSubTreeSize)&&void 0!==o?o:0,null!==(r=null==t?void 0:t.leftSubTreeRows)&&void 0!==r?r:0)}if(null===e)return e;e.height=Math.max((0,t.nodeHeight)(e.left),(0,t.nodeHeight)(e.right))+1;const a=this._getBalanceFactor(e);return a>1&&this._getBalanceFactor(e.left)>=0?this._rotateRight(e):a>1&&this._getBalanceFactor(e.left)<0?(e.left&&(e.left=this._rotateLeft(e.left)),this._rotateRight(e)):a<-1&&this._getBalanceFactor(e.right)<=0?this._rotateLeft(e):a<-1&&this._getBalanceFactor(e.right)>0?(e.right&&(e.right=this._rotateRight(e.right)),this._rotateLeft(e)):e}_getRows(e,t,s,i){if(null===e)return;const n=this._getNodeByRowNumber(e,t,0,0),o=n[1];let a=n[0],l=n[2];for(;null!==l&&i.length<s;){const e=l.data.data;for(let n=0===i.length?t-o:0;n<e.length&&i.length<s;n++){const t=new r.RowWrapData(a,n,e[n]);i.push(t)}l=this._getNextLine(l),a++}}_getLines(e,t,s,i){if(null===e)return;let[,n]=this._getNodeByLineNumber(e,t);for(;null!==n&&i.length<s;)i.push(n.data),n=this._getNextLine(n)}_getNextLine(e){if(null!=e.right)return this._getFirstLine(e.right);let t=e.parent;for(;null!==t&&e===t.right;)e=t,t=t.parent;return t}_getFirstLine(e){if(null===e)return null;let t=e;for(;null!==t.left;)t=t.left;return t}_getLastLine(e){if(null===e)return null;let t=e;for(;null!=t.right;)t=t.right;return t}_getNodeByLineNumber(e,t,s=0){return null===e?[s,e]:t===e.leftSubTreeSize?[s+e.leftSubTreeRows,e]:t<e.leftSubTreeSize?this._getNodeByLineNumber(e.left,t,s):this._getNodeByLineNumber(e.right,t-e.leftSubTreeSize-1,s+e.leftSubTreeRows+e.data.data.length)}_getNodeByRowNumber(e,t,s,i){return null===e?[s,i,e]:t>=e.leftSubTreeRows&&t<e.leftSubTreeRows+e.data.data.length?[s+e.leftSubTreeSize,i+e.leftSubTreeRows,e]:t<e.leftSubTreeRows?this._getNodeByRowNumber(e.left,t,s,i):this._getNodeByRowNumber(e.right,t-e.leftSubTreeRows-e.data.data.length,s+e.leftSubTreeSize+1,i+e.leftSubTreeRows+e.data.data.length)}_insertLine(e,s,i,n){var o,r,a,l;if(null===e)return this._linesCount+=1,this._rowsCount+=n,s;i<=e.leftSubTreeSize?(e.left=this._insertLine(e.left,s,i,n),e.left.parent=e,e.leftSubTreeSize+=1,e.leftSubTreeRows+=n):(e.right=this._insertLine(e.right,s,i-e.leftSubTreeSize-1,n),e.right.parent=e),e.height=1+Math.max((0,t.nodeHeight)(e.left),(0,t.nodeHeight)(e.right));const h=this._getBalanceFactor(e);return h>1&&i<(null!==(r=null===(o=e.left)||void 0===o?void 0:o.leftSubTreeSize)&&void 0!==r?r:0)?this._rotateRight(e):h<-1&&i-e.leftSubTreeSize-1>(null!==(l=null===(a=e.right)||void 0===a?void 0:a.leftSubTreeSize)&&void 0!==l?l:0)?this._rotateLeft(e):h>1&&e.left&&i>e.left.leftSubTreeSize?(e.left=this._rotateLeft(e.left),this._rotateRight(e)):h<-1&&e.right&&i-e.leftSubTreeSize-1<e.right.leftSubTreeSize?(e.right=this._rotateRight(e.right),this._rotateLeft(e)):e}_getBalanceFactor(e){return null===e?0:(0,t.nodeHeight)(e.left)-(0,t.nodeHeight)(e.right)}_rotateLeft(e){const s=e.right;if(null===s)return e;const i=s.left;return s.left=e,e.right=i,e.height=Math.max((0,t.nodeHeight)(e.left),(0,t.nodeHeight)(e.right))+1,s.height=Math.max((0,t.nodeHeight)(s.left),(0,t.nodeHeight)(s.right))+1,s.leftSubTreeSize=s.leftSubTreeSize+e.leftSubTreeSize+1,s.leftSubTreeRows=s.leftSubTreeRows+e.leftSubTreeRows+e.data.data.length,s.parent=e.parent,e.parent=s,null!==i&&(i.parent=e),s}_rotateRight(e){const s=e.left;if(null===s)return e;const i=s.right;return s.right=e,e.left=i,e.height=Math.max((0,t.nodeHeight)(e.left),(0,t.nodeHeight)(e.right))+1,s.height=Math.max((0,t.nodeHeight)(s.left),(0,t.nodeHeight)(s.right))+1,e.leftSubTreeSize=e.leftSubTreeSize-s.leftSubTreeSize-1,e.leftSubTreeRows=e.leftSubTreeRows-s.leftSubTreeRows-s.data.data.length,s.parent=e.parent,e.parent=s,null!==i&&(i.parent=e),s}}},1934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RowWrapData=t.LineWrapData=void 0,t.default=class{constructor(e){this.left=null,this.right=null,this.parent=null,this.leftSubTreeSize=0,this.leftSubTreeRows=0,this.height=1,this.data=e}},t.LineWrapData=class{constructor(){this.data=[]}},t.RowWrapData=class{constructor(e,t,s){this.line=e,this.ord=t,this.offset=s}}},77:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this._editSession=e}get _wrapData(){return this._editSession.wrapData}wrap(){this._wrapData.clear();const e=this._editSession.documentSession.document;this.insertNewLines(0,e.linesCount),this.updateLines(0,e.linesCount)}insertNewLines(e,t){for(let s=0;s<t;s++)this._wrapData.insertLine({data:[]},e+s)}updateLines(e,t){const s=this._editSession.documentSession.document;e+t>s.linesCount&&(t=s.linesCount-e);for(let s=e;s<e+t;s++){const e=this._editSession.documentSession.document.getLine(s),t=this._wrapLine(e);this._wrapData.updateLineData({data:t},s)}}removeLines(e,t){for(let s=0;s<t;s++)this._wrapData.removeLine(e)}_wrapLine(e){const t=this._editSession.visibleColumnsCount,s=[];let i=1;for(;i*t<e.length;)s.push(i*t),i++;return s.push(e.length),s}}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={id:i,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nc=void 0;var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=e.EditorView=e.Editor=e.Range=e.Document=void 0;const t=s(1117);Object.defineProperty(e,"Document",{enumerable:!0,get:function(){return t.Document}});const n=s(6729);Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return n.Range}}),Object.defineProperty(e,"Selection",{enumerable:!0,get:function(){return n.Selection}});const o=s(7708);Object.defineProperty(e,"Editor",{enumerable:!0,get:function(){return o.Editor}});const r=s(8637);Object.defineProperty(e,"EditorView",{enumerable:!0,get:function(){return r.EditorView}}),s(2545)})(),nc=i})();