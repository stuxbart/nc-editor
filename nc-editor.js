var nc;(()=>{"use strict";var e={1144:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(8081),n=i.n(s),o=i(3645),r=i.n(o)()(n());r.push([e.id,'*{margin:0;padding:0;box-sizing:border-box}@keyframes cursor-anim{0%{opacity:.7}100%{opacity:0}}.nc-editor{position:relative;display:grid;height:100%;max-height:100%;width:100%;max-width:100%}.nc-editor__text{position:relative;width:100%;height:100%;overflow:hidden;background-color:#242424;user-select:none}.nc-editor__gutter{grid-area:1/1/2/2;height:100%;width:100%;border-right:1px solid #949494;background-color:#242424;color:#a7a7a7;max-height:100%;overflow:hidden;user-select:none}.nc-editor__scroll-bar{overflow-y:scroll;overflow-x:hidden;background-color:#242424;height:100%;width:100%;max-height:100%}.nc-editor__selection{overflow:hidden;cursor:text}.nc-editortext__wrapper{position:relative;width:100%}.nc-editor__input{position:absolute;height:0px;width:0px;opacity:0;user-select:none;max-height:0px}.nc-scroll__scrollable{width:15px;content:"x"}.nc-selection__cursor{position:absolute;padding:0;margin:2px 0px;width:2px;height:18px;z-index:1;left:0;top:1px;opacity:1;background-color:#fff;pointer-events:none;user-select:none}.nc-selection__cursor--animated{animation-name:cursor-anim;animation-duration:1.2s;animation-iteration-count:infinite;animation-timing-function:steps(2, jump-none)}.nc-selection__range{position:absolute;padding:0;margin:0px;pointer-events:none;user-select:none;background-color:rgba(50,148,240,.2)}.nc-selection__search{position:absolute;padding:0;margin:0px;pointer-events:none;user-select:none;background-color:rgba(228,199,36,.295)}.nc-text__multi-line{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:0em 0em 0em 1em;margin:0;max-width:100%;background-color:#242424;cursor:text;color:#fff;white-space:pre}.nc-gutter__number{display:flex;justify-content:center;align-items:center}.nc-search{position:absolute;top:0px;right:15px;z-index:5;background-color:#000;width:300px;height:130px;border:1px solid #949494;border-top:0px;background-color:#242424;display:flex;flex-direction:column;justify-content:flex-start;align-items:center}.nc-search__close{align-self:flex-end;color:#949494;background-color:#242424;border:none;padding:1em;cursor:pointer}.nc-search__input{width:80%;height:24px;color:#dadada;border:2px solid #949494;background-color:#5f5f5f;padding:.5em;font-size:14px;outline:none}.nc-search__input:focus,.nc-search__input:active{background-color:#6e6e6e}.nc-search__result{align-self:flex-start;color:#949494;padding:1em;margin-left:2em;font-size:14px}.nc-text__multi-line--hover{background-color:#2b2b2b}.nc-text__multi-line--active{background-color:#313131}.nc-format__word,.nc-format__bracket,.nc-format__square-bracket,.nc-format__brace,.nc-format__comment,.nc-format__keyword,.nc-format__space,.nc-format__string,.nc-format__semicolon,.nc-format__colon,.nc-format__comma,.nc-format__dot,.nc-format__number,.nc-format__declartion,.nc-format__type,.nc-format__const-value,.nc-format__access-modifier{white-space:pre}.nc-format__word{color:#88c4fd}.nc-format__bracket{color:#074ccc}.nc-format__square-bracket{color:#c527ca}.nc-format__brace{color:#bc06f3}.nc-format__comment{color:#008b07}.nc-format__keyword{color:#ac31d1}.nc-format__string{color:#ca4a18}.nc-format__semicolon,.nc-format__colon{color:#f0f0f0}.nc-format__operator{color:#f0f0f0}.nc-format__comma,.nc-format__dot{color:#f0f0f0}.nc-format__number{color:#3abd7f}.nc-format__const-value,.nc-format__access-modifier,.nc-format__declaration{color:#396cca}.nc-format__type{color:#22ad78}',""]);const l=r},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(s)for(var l=0;l<this.length;l++){var h=this[l][0];null!=h&&(r[h]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);s&&r[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},8081:e=>{e.exports=function(e){return e[1]}},7187:e=>{var t,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,s){function n(i){e.removeListener(t,o),s(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),i([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function a(e,t,i,s){var n,o,r,a;if(l(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),r=o[t]),void 0===r)r=o[t]=i,++e._eventsCount;else if("function"==typeof r?r=o[t]=s?[i,r]:[r,i]:s?r.unshift(i):r.push(i),(n=h(e))>0&&r.length>n&&!r.warned){r.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=r.length,a=c,console&&console.warn&&console.warn(a)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=c.bind(s);return n.listener=i,s.wrapFn=n,n}function d(e,t,i){var s=e._events;if(void 0===s)return[];var n=s[t];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(n):f(n,n.length)}function _(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function m(e,t,i,s){if("function"==typeof e.on)s.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){s.once&&e.removeEventListener(t,n),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var l=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw l.context=r,l}var h=o[e];if(void 0===h)return!1;if("function"==typeof h)s(h,this,t);else{var a=h.length,c=f(h,a);for(i=0;i<a;++i)s(c[i],this,t)}return!0},o.prototype.addListener=function(e,t){return a(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return a(this,e,t,!0)},o.prototype.once=function(e,t){return l(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,s,n,o,r;if(l(t),void 0===(s=this._events))return this;if(void 0===(i=s[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){r=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,n),1===i.length&&(s[e]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",e,r||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var n,o=Object.keys(i);for(s=0;s<o.length;++s)"removeListener"!==(n=o[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},o.prototype.listenerCount=_,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2545:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var s=i(3379),n=i.n(s),o=i(7795),r=i.n(o),l=i(569),h=i.n(l),a=i(3565),c=i.n(a),u=i(9216),d=i.n(u),_=i(4589),f=i.n(_),m=i(1144),p={};p.styleTagTransform=f(),p.setAttributes=c(),p.insert=h().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=d(),n()(m.Z,p);const g=m.Z&&m.Z.locals?m.Z.locals:void 0},3379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var o={},r=[],l=0;l<e.length;l++){var h=e[l],a=s.base?h[0]+s.base:h[0],c=o[a]||0,u="".concat(a," ").concat(c);o[a]=c+1;var d=i(u),_={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)t[d].references++,t[d].updater(_);else{var f=n(_,s);s.byIndex=l,t.splice(l,0,{identifier:u,updater:f,references:1})}r.push(u)}return r}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var o=s(e=e||[],n=n||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var l=i(o[r]);t[l].references--}for(var h=s(e,n),a=0;a<o.length;a++){var c=i(o[a]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=h}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5387:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(6729),h=o(i(1213)),a=r(i(5834));t.default=class{constructor(e){this._undo=[],this._redo=[],this._transaction=!1,this._documentSession=e}get _latestVersion(){return this._undo[this._undo.length-1]}inserted(e,t){const i=t.split(/\r?\n|\r/g),s=new l.Point(e.line+i.length-1,i.length>1?i[i.length-1].length:e.offset+i[0].length),n=new h.default(h.HisotryOperations.Insert,e,s,t);this._latestVersion.push(n)}deleted(e,t,i){const s=new h.default(h.HisotryOperations.Delete,e,t,i);this._latestVersion.push(s)}swappedLinesUp(e){const t=new h.default(h.HisotryOperations.SwapLines,new l.Point(e-1,0),new l.Point(e,0),"");this._latestVersion.push(t)}swappedLinesDown(e){const t=new h.default(h.HisotryOperations.SwapLines,new l.Point(e,0),new l.Point(e+1,0),"");this._latestVersion.push(t)}startTransaction(){this._transaction=!0,this._undo.push(new a.default),this.clearRedo()}closeTransaction(){this._transaction=!1}undo(){const e=this._undo.pop();void 0!==e&&(this._applyChanges(e.reverseOperations),this._redo.push(e))}redo(){const e=this._redo.pop();void 0!==e&&(this._applyChanges(e.operations),this._undo.push(e))}clear(){this._redo=[],this._undo=[new a.default]}clearRedo(){this._redo=[]}_applyChanges(e){for(const t of e)switch(t.type){case h.HisotryOperations.Insert:{const e=t.pos.line,i=t.pos.offset;this._documentSession.document.insert(t.text,e,i),this._documentSession.updateLinesTokens(e),this._documentSession.emitLinesCountChanged(1),this._documentSession.emitEditEvent();break}case h.HisotryOperations.Delete:this._documentSession.document.remove(new l.Range(t.pos.line,t.pos.offset,t.endPos.line,t.endPos.offset)),this._documentSession.updateLinesTokens(t.pos.line),this._documentSession.emitLinesCountChanged(1),this._documentSession.emitEditEvent();break;case h.HisotryOperations.SwapLines:this._documentSession.document.swapLineWithNext(t.pos.line),this._documentSession.updateLinesTokens(t.pos.line),this._documentSession.emitLinesCountChanged(1),this._documentSession.emitEditEvent();break;default:throw new Error("Invalid operation type.")}}}},1213:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.HisotryOperations=void 0,function(e){e[e.Insert=0]="Insert",e[e.Delete=1]="Delete",e[e.SwapLines=2]="SwapLines"}(i=t.HisotryOperations||(t.HisotryOperations={}));class s{constructor(e,t,i,s){this.type=e,this.pos=t,this.endPos=i,this.text=s||""}getReverse(){switch(this.type){case i.Insert:return new s(i.Delete,this.pos,this.endPos,this.text);case i.Delete:return new s(i.Insert,this.pos,this.endPos,this.text);case i.SwapLines:return new s(i.SwapLines,this.pos,this.endPos,"");default:throw new Error("Invalid operation type.")}}}t.default=s},5834:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._operations=[]}push(e){this._operations.push(e)}get reverseOperations(){return this._operations.map((e=>e.getReverse())).reverse()}get operations(){return this._operations}}},6270:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(2313));t.default=class{constructor(e,t){this._documentSession=e,this._editSession=t}get _document(){return this._documentSession.document}getLines(e,t){const i=this._document,s=this._documentSession.tokenizerData,n=this._editSession.searchResults,o=i.getLineNodes(e,t),r=[];for(const e of o)r.push({rawText:e.text,tokens:s.getLineTokens(e),lineBreaks:[],searchResults:n.getLineResutls(e).matches});return r}getFirstLine(){const e=this._document,t=this._documentSession.tokenizerData,i=e.getFirstLineNode();return null===i?null:new n.default(i.text,t.getLineTokens(i),[])}getLastLine(){const e=this._document,t=this._documentSession.tokenizerData,i=e.getLastLineNode();return null===i?null:new n.default(i.text,t.getLineTokens(i),[])}getTotalLinesCount(){return this._document.linesCount}getSelectedText(){let e="";for(const t of this._editSession.selections.getSelections())e+=this._document.getText(t);return e}}},6656:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(5387)),o=i(7183),r=i(2197),l=i(4576),h=s(i(6165)),a=i(8593),c=i(6606);class u extends o.EventEmitter{constructor(e,t=null,i=null){super(),this._updateTokensAfterEdit=!0,this._shouldEmitLinesCountChangeEvent=!0,this._shouldEmitEditEvent=!0,this._id=(0,a.randomId)(10),this._document=e,this._mode=t||r.MODES.default,this._tokenizerData=null===i?new h.default:i,this._search=new l.NaiveSearch,this._documentHistory=new n.default(this)}get id(){return this._id}get document(){return this._document}get tokenizerData(){return this._tokenizerData}get mode(){return this._mode}set mode(e){this._mode=e}get search(){return this._search}get modeName(){return this._mode.name}get history(){return this._documentHistory}updateLinesTokens(e){this._updateTokensAfterEdit&&(this._mode.tokenizer.updateTokens(this._document,this._tokenizerData,e),this._mode.tokenizer.updateTokens(this._document,this._tokenizerData,e+1))}setMode(e){const t=(0,r.getMode)(e);this._mode=t,this.tokenize()}emitLinesCountChanged(e){this._shouldEmitLinesCountChangeEvent&&0!==e&&this.emit(c.EvDocument.LinesCount,{linesCount:this._document.linesCount})}emitEditEvent(){this._shouldEmitEditEvent&&this.emit(c.EvDocument.Edited,void 0)}tokenize(){const e=this._document;this.mode.tokenizer.tokenize(e,this._tokenizerData),this.emit(c.EvTokenizer.Finished,void 0)}enableTokenization(){this._updateTokensAfterEdit=!0}disableTokenization(){this._updateTokensAfterEdit=!1}enableEditEvent(){this._shouldEmitEditEvent=!0}disableEditEvent(){this._shouldEmitEditEvent=!1}enableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!0}disableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!1}emitInitEvents(){const e=this._document;this.emit(c.EvDocument.LinesCount,{linesCount:e.linesCount}),this.emit(c.EvTokenizer.Finished,void 0)}undo(){this._documentHistory.undo()}redo(){this._documentHistory.redo()}}t.default=u},6606:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.EvDocument=t.EvTokenizer=void 0,(t.EvTokenizer||(t.EvTokenizer={})).Finished="tokenizer.Tokenized",(i=t.EvDocument||(t.EvDocument={})).Edited="editor.Document.Edit",i.LinesCount="editor.Document.LinesCount",i.Set="editor.Document.Set"},8463:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6729),n=i(6924);t.default=class{constructor(e,t){this._documentSession=e,this._editSession=t}get _document(){return this._documentSession.document}insert(e){const t=this._document,i=this._editSession,n=this._documentSession,o=i.selections.getSelections();n.history.startTransaction(),i.history.createSnapshot();for(const e of o){if(e.isCollapsed)continue;const o=t.remove(e);n.history.deleted(new s.Point(e.start.line,e.start.offset),new s.Point(e.end.line,e.end.offset),o);const r=o.split("\n");n.updateLinesTokens(e.start.line),i.updateLinesSearchResults(e.start.line),n.emitLinesCountChanged(e.end.line-e.start.line),i.updateSelctions(e.start.line,e.start.offset,1-r.length,-(e.end.offset-e.start.offset))}for(const r of o){const o=r.start.line,l=r.start.offset,h=t.insert(e,o,l);n.history.inserted(new s.Point(r.start.line,r.start.offset),e),n.updateLinesTokens(o),i.updateLinesSearchResults(o),i.updateSelctions(o,l,h[0],h[1])}n.history.closeTransaction(),n.emitLinesCountChanged(1),n.emitEditEvent()}remove(e=0){const t=this._document,i=this._editSession,n=this._documentSession,o=i.selections.getSelections();n.history.startTransaction(),i.history.createSnapshot();let r="";for(const l of o){if(l.isCollapsed){if(0===l.start.offset&&0===e){if(0===l.start.line)continue;{l.start.line-=1;const e=t.getLine(l.start.line);l.start.offset=e.length+1}}if(1===e){const e=t.getLine(l.start.line);l.end.offset===e.length&&l.end.line+1!==t.linesCount?(l.end.offset=0,l.end.line+=1):l.end.offset=l.end.offset+1}else l.start.offset=l.start.offset-1}const o=t.remove(l);n.history.deleted(new s.Point(l.start.line,l.start.offset),new s.Point(l.end.line,l.end.offset),o);const h=o.split("\n");n.updateLinesTokens(l.start.line),i.updateLinesSearchResults(l.start.line),n.emitLinesCountChanged(l.end.line-l.start.line),i.updateSelctions(l.start.line,l.start.offset,1-h.length,-(l.end.offset-l.start.offset)),r+=o}return n.history.closeTransaction(),n.emitEditEvent(),r}removeWordBefore(){const e=this._document,t=this._editSession.selections.getSelections();for(const i of t){if(!i.isCollapsed)continue;const t=(0,n.removeAccents)(e.getLine(i.start.line)),s=(0,n.getWordBefore)(t,i.start.offset);i.start.offset-=s.length}return this.remove()}removeWordAfter(){const e=this._document,t=this._editSession.selections.getSelections();for(const i of t){if(!i.isCollapsed)continue;const t=(0,n.removeAccents)(e.getLine(i.start.line)),s=(0,n.getWordAfter)(t,i.start.offset);i.end.offset+=s.length}return this.remove(1)}cut(){const e=this.remove();navigator.clipboard.writeText(e)}copy(){const e=this._document,t=this._editSession.selections.getSelections();let i="";for(const s of t)s.isCollapsed||(i+=e.getText(s));navigator.clipboard.writeText(i)}swapLinesUp(){const e=this._document,t=this._editSession,i=this._documentSession,s=t.selections.getSelections();if(i.history.startTransaction(),t.history.createSnapshot(),1!==s.length)return;const n=s[0];if(0===n.start.line)return;let o=n.start.line;for(;o<n.end.line+1;)e.swapLineWithPrevious(o),i.history.swappedLinesUp(o),o++;i.updateLinesTokens(n.start.line-1),n.start.line-=1,n.end.line-=1,i.history.closeTransaction(),t.emitSelectionChangedEvent(),i.emitEditEvent()}swapLinesDown(){const e=this._document,t=this._editSession,i=this._documentSession,s=t.selections.getSelections();if(i.history.startTransaction(),t.history.createSnapshot(),1!==s.length)return;const n=s[0];if(n.end.line===e.linesCount-1)return;let o=n.end.line;for(;o>n.start.line-1;)e.swapLineWithNext(o),i.history.swappedLinesDown(o),o--;i.updateLinesTokens(n.start.line),n.start.line+=1,n.end.line+=1,i.history.closeTransaction(),t.emitSelectionChangedEvent(),i.emitEditEvent()}indentSelectedLines(e="\t"){const t=this._document,i=this._editSession,n=this._documentSession,o=i.getActiveLinesNumbers();if(n.history.startTransaction(),i.history.createSnapshot(),!(o.size<2)){for(const r of o)t.insert(e,r,0),n.history.inserted(new s.Point(r,0),e),n.updateLinesTokens(r),i.updateSelctions(r,0,0,1);n.history.closeTransaction(),n.emitEditEvent()}}removeIndentFromSelectedLines(e="\t"){const t=this._document,i=this._editSession,n=this._documentSession,o=i.getActiveLinesNumbers();n.history.startTransaction(),i.history.createSnapshot();for(const r of o)t.getLine(r).startsWith(e)&&(t.remove(new s.Range(r,0,r,e.length)),n.history.deleted(new s.Point(r,0),new s.Point(r,e.length),e),n.updateLinesTokens(r),i.updateSelctions(r,0,0,1));n.history.closeTransaction(),n.emitEditEvent()}}},1824:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e=""){this.left=null,this.right=null,this.parent=null,this.text="",this.leftSubTreeSize=0,this.height=1,this.text=e}}},6907:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(1824)),o=i(6090);t.default=class{constructor(e){this._rootNode=null,this._linesCount=0,this.insert(e,0,0)}insert(e,t,i){if(0===e.length&&null!==this._rootNode)return[0,0];if(null===this._rootNode){const e=new n.default("");this._rootNode=this._insertLine(this._rootNode,e,0)}const s=this._getNodeByLineNumber(this._rootNode,t);if(null===s)return[0,0];const o=e.split(/\r?\n|\r/g);if(1===o.length)s.text=s.text.slice(0,i)+e+s.text.slice(i);else{const e=s.text.slice(i);s.text=s.text.slice(0,i)+o[0];let r=null;for(let e=1;e<o.length;e++){const i=o[e];r=new n.default(i),this._rootNode=this._insertLine(this._rootNode,r,t+e)}null!==r&&(r.text+=e)}return[o.length-1,o[o.length-1].length]}remove(e){const t=this._getNodeByLineNumber(this._rootNode,e.start.line);if(null===t)return"";if(e.start.line===e.end.line){const i=t.text.slice(e.start.offset,e.end.offset);return t.text=t.text.slice(0,e.start.offset)+t.text.slice(e.end.offset),i}let i=t.text.slice(e.start.offset);t.text=t.text.slice(0,e.start.offset);const s=e.end.line-e.start.line-1;for(let t=0;t<s;t++){const t=this._getNodeByLineNumber(this._rootNode,e.start.line+1);if(null===t)return i;i+="\n"+t.text,this._rootNode=this._removeLine(this._rootNode,e.start.line+1)}const n=this._getNodeByLineNumber(this._rootNode,e.start.line+1);return null===n||(i+="\n"+n.text.slice(0,e.end.offset),t.text+=n.text.slice(e.end.offset),this._rootNode=this._removeLine(this._rootNode,e.start.line+1)),i}get linesCount(){return this._linesCount}get text(){return this._getNodeText(this._rootNode)}getText(e=null){if(null===e)return this.text;const t=this._getNodeByLineNumber(this._rootNode,e.start.line);if(null===t)return"";if(e.start.line===e.end.line)return t.text.substring(e.start.offset,e.end.offset);let i=t.text.substring(e.start.offset),s=t;const n=e.end.line-e.start.line-1;for(let e=0;e<n;e++){if(s=this._getNextLine(s),null===s)return i;i+="\n"+s.text}const o=this._getNextLine(s);return null===o||(i+="\n"+o.text.substring(0,e.end.offset)),i}getLines(e,t){const i=[];return this._getLines(this._rootNode,e,t,i),i}getLineNodes(e,t){const i=[];let s=this._getNodeByLineNumber(this._rootNode,e);for(;null!==s&&i.length<t;)i.push(s),s=this._getNextLine(s);return i}getLineNode(e){return this._getNodeByLineNumber(this._rootNode,e)}getLine(e){var t,i;return null!==(i=null===(t=this._getNodeByLineNumber(this._rootNode,e))||void 0===t?void 0:t.text)&&void 0!==i?i:""}getFirstLine(){var e,t;return null!==(t=null===(e=this._getFirstLine(this._rootNode))||void 0===e?void 0:e.text)&&void 0!==t?t:""}getLastLine(){var e,t;return null!==(t=null===(e=this._getLastLine(this._rootNode))||void 0===e?void 0:e.text)&&void 0!==t?t:""}getFirstLineNode(){return this._getFirstLine(this._rootNode)}getLastLineNode(){return this._getLastLine(this._rootNode)}removeLine(e){this._rootNode=this._removeLine(this._rootNode,e)}insertLineAfter(e,t){const i=new n.default(e);this._rootNode=this._insertLine(this._rootNode,i,t+1)}insertLineBefore(e,t){const i=new n.default(e);this._rootNode=this._insertLine(this._rootNode,i,t)}swapLineWithNext(e){const t=this._getNodeByLineNumber(this._rootNode,e);if(null===t)return;const i=this._getNextLine(t);if(null===i)return;const s=i.text;i.text=t.text,t.text=s}swapLineWithPrevious(e){return this.swapLineWithNext(e-1)}_removeLine(e,t){var i,s;if(null===e)return e;if(t<e.leftSubTreeSize)e.left=this._removeLine(e.left,t),e.leftSubTreeSize-=1;else if(t>e.leftSubTreeSize)e.right=this._removeLine(e.right,t-e.leftSubTreeSize-1);else if(null===e.left||null===e.right){let t=null;t=t===e.left?e.right:e.left,null===t?(t=e,e=null):(t.parent=e.parent,e=t),this._linesCount-=1}else{const t=this._getFirstLine(e.right);e.text=null!==(i=null==t?void 0:t.text)&&void 0!==i?i:"",e.right=this._removeLine(e.right,null!==(s=null==t?void 0:t.leftSubTreeSize)&&void 0!==s?s:0)}if(null===e)return e;e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1;const n=this._getBalanceFactor(e);return n>1&&this._getBalanceFactor(e.left)>=0?this._rotateRight(e):n>1&&this._getBalanceFactor(e.left)<0?(e.left&&(e.left=this._rotateLeft(e.left)),this._rotateRight(e)):n<-1&&this._getBalanceFactor(e.right)<=0?this._rotateLeft(e):n<-1&&this._getBalanceFactor(e.right)>0?(e.right&&(e.right=this._rotateRight(e.right)),this._rotateLeft(e)):e}_getLines(e,t,i,s){if(null===e)return;let n=this._getNodeByLineNumber(e,t);for(;null!==n&&s.length<i;)s.push(n.text),n=this._getNextLine(n)}_getNextLine(e){if(null!=e.right)return this._getFirstLine(e.right);let t=e.parent;for(;null!==t&&e===t.right;)e=t,t=t.parent;return t}_getFirstLine(e){if(null===e)return null;let t=e;for(;null!==t.left;)t=t.left;return t}_getLastLine(e){if(null===e)return null;let t=e;for(;null!=t.right;)t=t.right;return t}_getNodeByLineNumber(e,t){return null===e||t===e.leftSubTreeSize?e:t<e.leftSubTreeSize?this._getNodeByLineNumber(e.left,t):this._getNodeByLineNumber(e.right,t-e.leftSubTreeSize-1)}_getNodeText(e){if(null===e)return"";let t="";return null!==e.left&&(t+=this._getNodeText(e.left)+"\n"),t+=e.text,null!==e.right&&(t+="\n"+this._getNodeText(e.right)),t}_insertLine(e,t,i){var s,n,r,l;if(null===e)return this._linesCount+=1,t;i<=e.leftSubTreeSize?(e.left=this._insertLine(e.left,t,i),e.left.parent=e,e.leftSubTreeSize+=1):(e.right=this._insertLine(e.right,t,i-e.leftSubTreeSize-1),e.right.parent=e),e.height=1+Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right));const h=this._getBalanceFactor(e);return h>1&&i<(null!==(n=null===(s=e.left)||void 0===s?void 0:s.leftSubTreeSize)&&void 0!==n?n:0)?this._rotateRight(e):h<-1&&i-e.leftSubTreeSize-1>(null!==(l=null===(r=e.right)||void 0===r?void 0:r.leftSubTreeSize)&&void 0!==l?l:0)?this._rotateLeft(e):h>1&&e.left&&i>e.left.leftSubTreeSize?(e.left=this._rotateLeft(e.left),this._rotateRight(e)):h<-1&&e.right&&i-e.leftSubTreeSize-1<e.right.leftSubTreeSize?(e.right=this._rotateRight(e.right),this._rotateLeft(e)):e}_getBalanceFactor(e){return null===e?0:(0,o.nodeHeight)(e.left)-(0,o.nodeHeight)(e.right)}_rotateLeft(e){const t=e.right;if(null===t)return e;const i=t.left;return t.left=e,e.right=i,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,t.leftSubTreeSize=t.leftSubTreeSize+e.leftSubTreeSize+1,t.parent=e.parent,e.parent=t,null!==i&&(i.parent=e),t}_rotateRight(e){const t=e.left;if(null===t)return e;const i=t.right;return t.right=e,e.left=i,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,e.leftSubTreeSize=e.leftSubTreeSize-t.leftSubTreeSize-1,t.parent=e.parent,e.parent=t,null!==i&&(i.parent=e),t}}},1117:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Line=t.Document=void 0;const n=s(i(6907));t.Document=n.default;const o=s(i(2313));t.Line=o.default},2313:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,s=[]){this.rawText="",this.tokens=[],this.lineBreaks=[],this.searchResults=[],this.rawText=e,this.tokens=t,this.lineBreaks=i,this.searchResults=s}}},6090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHeight=void 0,t.nodeHeight=e=>null===e?0:e.height},2308:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(6270)),o=s(i(8463)),r=i(7183),l=i(2197),h=i(4576),a=s(i(1859)),c=s(i(700)),u=i(8593),d=i(4938);class _ extends r.EventEmitter{constructor(e){super(),this._searchAfterEdit=!0,this._shouldUpdateSelections=!0,this._id=(0,u.randomId)(10),this._documentSession=e,this._highlightingSchema=(0,l.getMode)(e.modeName).schema,this._selectionManager=new c.default(this._document),this._selectionHistory=new a.default(this),this._searchResults=new h.SerachResults,this._reader=new n.default(this._documentSession,this),this._writer=new o.default(this._documentSession,this)}get id(){return this._id}get reader(){return this._reader}get writer(){return this._writer}get selections(){return this._selectionManager}get history(){return this._selectionHistory}get searchResults(){return this._searchResults}get documentSession(){return this._documentSession}get highlightingSchema(){return this._highlightingSchema}get _document(){return this._documentSession.document}updateLinesSearchResults(e){this._searchAfterEdit&&this._documentSession.search.updateSearchResults(this._document,this._searchResults,e)}updateSelctions(e,t,i,s){this._selectionManager.update(e,t,i,s),this._emitSelectionChangedEvent()}search(e){const t=this._document;this._documentSession.search.search(e,t,this.searchResults),this.emit(d.EvSearch.Finished,void 0)}getSelctions(){return this._selectionManager.getSelections()}setSelection(e){this._selectionManager.setSelection(e),this._emitSelectionChangedEvent()}addSelection(e){this._selectionManager.addSelection(e),this._emitSelectionChangedEvent()}extendLastSelection(e){this._selectionManager.extendLastSelection(e),this._emitSelectionChangedEvent()}selectAll(){this._selectionManager.selectAll(),this._emitSelectionChangedEvent()}collapseSelectionToLeft(){this._selectionManager.collapseSelectionToLeft(),this._emitSelectionChangedEvent()}collapseSelectionToRight(){this._selectionManager.collapseSelectionToRight(),this._emitSelectionChangedEvent()}collapseSelectionToTop(){this._selectionManager.collapseSelectionToTop(),this._emitSelectionChangedEvent()}collapseSelectionToBottom(){this._selectionManager.collapseSelectionToBottom(),this._emitSelectionChangedEvent()}collapseSelectionToHome(){this._selectionManager.collapseSelectionToHome(),this._emitSelectionChangedEvent()}collapseSelectionToEnd(){this._selectionManager.collapseSelectionToEnd(),this._emitSelectionChangedEvent()}selectWordBefore(){this._selectionManager.selectWordBefore(),this._emitSelectionChangedEvent()}selectWordAfter(){this._selectionManager.selectWordAfter(),this._emitSelectionChangedEvent()}selectWordAt(e,t){this._selectionManager.selectWordAt(e,t),this._emitSelectionChangedEvent()}selectStartOfTheLine(){this._selectionManager.selectStartOfTheLine(),this._emitSelectionChangedEvent()}selectEndOfTheLine(){this._selectionManager.selectEndOfTheLine(),this._emitSelectionChangedEvent()}moveSelectionWordBefore(){this._selectionManager.moveSelectionWordBefore(),this._emitSelectionChangedEvent()}moveSelectionWordAfter(){this._selectionManager.moveSelectionWordAfter(),this._emitSelectionChangedEvent()}emitSelectionChangedEvent(){this._emitSelectionChangedEvent()}enableSelectionsUpdates(){this._selectionManager.enableUpdatingSelections(),this._shouldUpdateSelections=!0}disableSelectionsUpdates(){this._selectionManager.disableUpdatingSelections(),this._shouldUpdateSelections=!1}getActiveLinesNumbers(e=0,t=1/0){return this._selectionManager.getActiveLinesNumbers(e,t)}getSelectedLinesCount(){return this._selectionManager.getSelectedLinesCount()}extendRectangleSelection(e){this._selectionManager.extendRectangleSelection(e),this._emitSelectionChangedEvent()}getSearchPhrase(){return this._searchResults.phrase}getSearchMatchCount(){return this._searchResults.matchCount}_emitSelectionChangedEvent(){this.emit(d.EvSelection.Changed,void 0)}undo(){this._documentSession.undo(),this._selectionHistory.undo()}redo(){this._documentSession.redo(),this._selectionHistory.redo()}}t.default=_},4938:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EvSearch=t.EvSelection=void 0,(t.EvSelection||(t.EvSelection={})).Changed="editor.Selection.Changed",(t.EvSearch||(t.EvSearch={})).Finished="editor.Search.Finished"},9144:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(6656)),o=s(i(2308)),r=i(7183),l=i(2197),h=i(2781);class a extends r.EventEmitter{constructor(){super(...arguments),this._documentSessions=new Map,this._editSessions=new Map,this._latestDocId=null}setDocumentMode(e,t){if(!(e in l.MODES))throw new Error("Mode with given name doesn't exist.");const i=this.getDocumentSession(t);i.mode=l.MODES[e],i.tokenize()}addDocument(e,t=null,i="default"){null===t&&(t="");const s=new n.default(e);return s.setMode(i),this._documentSessions.set(s.id,s),this._latestDocId=s.id,this.emit(h.EvDocument.Set,void 0),s.emitLinesCountChanged(1/0),s.id}getDocumentSession(e){const t=this._documentSessions.get(e);if(!t)throw new Error("Document with given id doesn't exist.");return t}getLatestDocumentId(){return this._latestDocId}deleteDocument(e){if(!(e in this._documentSessions))throw new Error("Document with given id doesn't exist.");throw new Error("Not implemented")}createSession(e){const t=this._documentSessions.get(e);if(!t)throw new Error("Document with given id doesn't exist.");const i=new o.default(t);return this._editSessions.set(i.id,i),i.id}getSession(e){const t=this._editSessions.get(e);if(!t)throw new Error("Document with given id doesn't exist.");return t}getEditSessionForDocument(e){let t;if(this._editSessions.forEach((i=>{i.documentSession.id===e&&(t=i)})),t)return t;const i=this.createSession(e);if(t=this._editSessions.get(i),!t)throw new Error("?");return t}deleteSession(e){if(!(e in this._editSessions))throw new Error("Session with given id doesn't exist.");this._editSessions.delete(e)}}t.default=a},2781:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.EvSearch=t.EvSelection=t.EvDocument=t.EvTokenizer=void 0,(t.EvTokenizer||(t.EvTokenizer={})).Finished="tokenizer.Tokenized",(i=t.EvDocument||(t.EvDocument={})).Set="editor.Document.Set",i.Edited="editor.Document.Edit",i.LinesCount="editor.Document.LinesCount",(t.EvSelection||(t.EvSelection={})).Changed="editor.Selection.Changed",(t.EvSearch||(t.EvSearch={})).Finished="editor.Search.Finished"},7708:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=void 0;const n=s(i(9144));t.Editor=n.default},2957:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;const s=i(7187);t.EventEmitter=class{constructor(){this._emitter=new s.EventEmitter}on(e,t){this._emitter.on(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}}},7183:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;const s=i(2957);Object.defineProperty(t,"EventEmitter",{enumerable:!0,get:function(){return s.EventEmitter}})},7683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i){this._tokenizer=e,this._highlighterSchema=t,this._name=i}get schema(){return this._highlighterSchema}get tokenizer(){return this._tokenizer}get name(){return this._name}}},252:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSMode=t.JSTokenizer=void 0;const n=s(i(7683)),o=s(i(1638));t.JSTokenizer=o.default;const r=i(4841),l=new n.default(new o.default,r.JSHighlighterSchema,"javascript");t.JSMode=l},1638:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6924),n=i(4841),o=i(9042),r=i(6165);class l extends o.Tokenizer{constructor(){super(...arguments),this.KEYWORDS=["abstract","await","break","case","catch","continue","debugger","default","do","else","enum","export","extends","finally","for","from","function","goto","if","implements","import","in","package","return","switch","throw","try","while","with","yield"],this.ACCESS_MODIFIRES=["public","private","protected","static"],this.LITERALS=["true","false","null","void","this","constructor","Infinity","super","NaN","undefined"],this.DEC_KEYWORDS=["let","const","var","type","interface","class","delete","new","interface","instanceof","typeof"],this.BASE_TYPES=["Array","Date","Math","Number","Object","String"]}tokenize(e,t){let i=e.getFirstLineNode(),s=1,n={scope:""};for(;null!==i;){const o=this._makeLineData(i,n);t.data.set(i,o),n=o.state,i=e.getLineNode(s),s++}}updateTokens(e,t,i){var s,n;let o,l,h,a,c=i;do{if(o=e.getLineNode(i-1),l=null===o?{scope:""}:null!==(n=null===(s=t.data.get(o))||void 0===s?void 0:s.state)&&void 0!==n?n:{scope:""},o=e.getLineNode(c),null===o)break;a=t.data.get(o),h=this._makeLineData(o,l),t.data.set(o,h),c++}while(!a||!(0,r.compareLineData)(a,h))}_makeLineData(e,t){if(0===e.text.length)return{tokens:[],state:Object.assign({},t),length:0};const i=[],o=(0,s.removeAccents)(e.text);let r=0;for(;r<o.length;){const e=r;for(;r<o.length&&(0,s.isWhiteSpaceChar)(o[r]);)r++;if(r!=e&&i.push({type:n.JSTokens.WHITE_SPACE,startIndex:e}),r===o.length)break;switch(o[r]){case"(":i.push({type:n.JSTokens.OPEN_BRACKET,startIndex:r}),r++;break;case")":i.push({type:n.JSTokens.CLOSE_BRACKET,startIndex:r}),r++;break;case"{":i.push({type:n.JSTokens.OPEN_BRACE,startIndex:r}),r++;break;case"}":i.push({type:n.JSTokens.CLOSE_BRACE,startIndex:r}),r++;break;case"[":i.push({type:n.JSTokens.OPEN_SQUARE_BRACKET,startIndex:r}),r++;break;case"]":i.push({type:n.JSTokens.CLOSE_SQUARE_BRACKET,startIndex:r}),r++;break;case":":i.push({type:n.JSTokens.COLON,startIndex:r}),r++;break;case";":i.push({type:n.JSTokens.SEMICOLON,startIndex:r}),r++;break;case".":i.push({type:n.JSTokens.DOT,startIndex:r}),r++;break;case",":i.push({type:n.JSTokens.COMMA,startIndex:r}),r++;break;case"+":case"-":case"*":case"=":case"!":case"&":case"|":case"<":case">":case"?":i.push({type:n.JSTokens.OPERATOR,startIndex:r}),r++;break;case"/":if(r+1<o.length&&"/"===o[r+1])return i.push({type:n.JSTokens.COMMENT,startIndex:r}),{tokens:i,state:{scope:""},length:o.length};i.push({type:n.JSTokens.OPERATOR,startIndex:r}),r++;break;case"'":{const e=r;for(r++;r<o.length&&"'"!==o[r];)r++;i.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}case'"':{const e=r;for(r++;r<o.length&&'"'!==o[r];)r++;i.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}case"`":{const e=r;for(r++;r<o.length&&"`"!==o[r];)r++;i.push({type:n.JSTokens.STRING_LITERAL,startIndex:e}),r++;break}default:{let e="";if((0,s.isAlpha)(o[r])){const t=r;for(;r<o.length&&(0,s.isAlphaNumeric)(o[r]);)e+=o[r],r++;this._isWordInList(e,this.KEYWORDS)?i.push({type:n.JSTokens.KEYWORD,startIndex:t}):this._isWordInList(e,this.DEC_KEYWORDS)?i.push({type:n.JSTokens.DEC_KEYWORD,startIndex:t}):this._isWordInList(e,this.BASE_TYPES)?i.push({type:n.JSTokens.TYPE,startIndex:t}):this._isWordInList(e,this.LITERALS)?i.push({type:n.JSTokens.CONST_VALUE,startIndex:t}):this._isWordInList(e,this.ACCESS_MODIFIRES)?i.push({type:n.JSTokens.ACCESS_MODIFIER,startIndex:t}):i.push({type:n.JSTokens.IDENTIFIER,startIndex:t})}else if((0,s.isNumeric)(o[r]))for(i.push({type:n.JSTokens.NUMBER,startIndex:r});(0,s.isNumeric)(o[++r]););else i.push({type:n.JSTokens.UNKNOWN,startIndex:r}),r++}}}return{tokens:i,state:{scope:""},length:o.length}}_isWordInList(e,t){if(1===e.length)return!1;for(const i of t)if(i.includes(e)&&i.length===e.length)return!0;return!1}}t.default=l},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JSHighlighterSchema=t.JSTokens=void 0,t.JSTokens={BOOLEAN:0,OPERATOR:1,ARROW:2,COMMENT:3,COMMA:4,DOT:5,COLON:6,SEMICOLON:7,IDENTIFIER:8,OPEN_BRACE:9,CLOSE_BRACE:10,OPEN_BRACKET:11,CLOSE_BRACKET:12,OPEN_SQUARE_BRACKET:13,CLOSE_SQUARE_BRACKET:14,NUMBER:15,STRING_LITERAL:16,UNKNOWN:17,KEYWORD:18,TYPE:19,DEC_KEYWORD:20,WHITE_SPACE:21,CONST_VALUE:22,ACCESS_MODIFIER:23},t.JSHighlighterSchema={[t.JSTokens.BOOLEAN]:"nc-format__word",[t.JSTokens.OPERATOR]:"nc-format__operator",[t.JSTokens.ARROW]:"nc-format__arrow",[t.JSTokens.COMMENT]:"nc-format__comment",[t.JSTokens.COMMA]:"nc-format__comma",[t.JSTokens.DOT]:"nc-format__dot",[t.JSTokens.COLON]:"nc-format__colon",[t.JSTokens.SEMICOLON]:"nc-format__semicolon",[t.JSTokens.IDENTIFIER]:"nc-format__word",[t.JSTokens.OPEN_BRACE]:"nc-format__brace",[t.JSTokens.CLOSE_BRACE]:"nc-format__brace",[t.JSTokens.OPEN_BRACKET]:"nc-format__bracket",[t.JSTokens.CLOSE_BRACKET]:"nc-format__bracket",[t.JSTokens.OPEN_SQUARE_BRACKET]:"nc-format__bracket",[t.JSTokens.CLOSE_SQUARE_BRACKET]:"nc-format__bracket",[t.JSTokens.NUMBER]:"nc-format__number",[t.JSTokens.STRING_LITERAL]:"nc-format__string",[t.JSTokens.UNKNOWN]:"nc-format__unknown",[t.JSTokens.KEYWORD]:"nc-format__keyword",[t.JSTokens.TYPE]:"nc-format__type",[t.JSTokens.DEC_KEYWORD]:"nc-format__declaration",[t.JSTokens.WHITE_SPACE]:"nc-format__space",[t.JSTokens.CONST_VALUE]:"nc-format__const-value",[t.JSTokens.ACCESS_MODIFIER]:"nc-format__access-modifier"}},226:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LaTeXMode=t.LaTeXTokenizer=void 0;const n=s(i(7683)),o=s(i(5537));t.LaTeXTokenizer=o.default;const r=i(8177),l=new n.default(new o.default,r.LaTeXHighlighterSchema,"latex");t.LaTeXMode=l},5537:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6924),n=i(8177),o=i(9042),r=i(6165);class l extends o.Tokenizer{tokenize(e,t){let i=e.getFirstLineNode(),s=1,n={scope:""};for(;null!==i;){const o=this._makeLineData(i,n);t.data.set(i,o),n=o.state,i=e.getLineNode(s),s++}}updateTokens(e,t,i){var s,n;let o,l,h,a,c=i;do{if(o=e.getLineNode(i-1),l=null===o?{scope:""}:null!==(n=null===(s=t.data.get(o))||void 0===s?void 0:s.state)&&void 0!==n?n:{scope:""},o=e.getLineNode(c),null===o)break;a=t.data.get(o),h=this._makeLineData(o,l),t.data.set(o,h),c++}while(!a||!(0,r.compareLineData)(a,h))}_makeLineData(e,t){if(0===e.text.length)return{tokens:[],state:Object.assign({},t),length:0};const i=[],o=(0,s.removeAccents)(e.text);let r=0;for(;r<o.length;){const e=r;for(;r<o.length&&(0,s.isWhiteSpaceChar)(o[r]);)r++;if(r!=e&&i.push({type:n.LaTeXTokens.WHITE_SPACE,startIndex:e}),r===o.length)break;switch(o[r]){case"(":i.push({type:n.LaTeXTokens.OPEN_BRACKET,startIndex:r}),r++;break;case")":i.push({type:n.LaTeXTokens.CLOSE_BRACKET,startIndex:r}),r++;break;case"{":i.push({type:n.LaTeXTokens.OPEN_BRACE,startIndex:r}),r++;break;case"}":i.push({type:n.LaTeXTokens.CLOSE_BRACE,startIndex:r}),r++;break;case"[":i.push({type:n.LaTeXTokens.OPEN_SQUARE_BRACKET,startIndex:r}),r++;break;case"]":i.push({type:n.LaTeXTokens.CLOSE_SQUARE_BRACKET,startIndex:r}),r++;break;case"%":return i.push({type:n.LaTeXTokens.COMMENT,startIndex:r}),{tokens:i,state:{scope:""},length:o.length};case"$":{const e=r;for(r++;r<o.length&&"$"!==o[r];)r++;i.push({type:n.LaTeXTokens.EQUATION,startIndex:e}),r++;break}case"\\":{const e=r;for(r++;r<o.length&&(0,s.isAlpha)(o[r]);)r++;i.push({type:n.LaTeXTokens.COMMAND,startIndex:e});break}default:{const e=r;if((0,s.isAlphaNumeric)(o[r])){for(;r<o.length&&(0,s.isAlphaNumeric)(o[r]);)console.log(r,o[r]),r++;i.push({type:n.LaTeXTokens.WORD,startIndex:e})}else i.push({type:n.LaTeXTokens.UNKNOWN,startIndex:r}),r++}}}return{tokens:i,state:{scope:""},length:o.length}}}t.default=l},8177:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LaTeXHighlighterSchema=t.LaTeXTokens=void 0,t.LaTeXTokens={COMMENT:0,COMMA:1,COMMAND:2,OPEN_BRACE:3,CLOSE_BRACE:4,OPEN_BRACKET:5,CLOSE_BRACKET:6,OPEN_SQUARE_BRACKET:7,CLOSE_SQUARE_BRACKET:8,WORD:9,UNKNOWN:10,WHITE_SPACE:11,EQUATION:12},t.LaTeXHighlighterSchema={[t.LaTeXTokens.COMMENT]:"nc-format__comment",[t.LaTeXTokens.COMMA]:"nc-format__comma",[t.LaTeXTokens.COMMAND]:"nc-format__keyword",[t.LaTeXTokens.OPEN_BRACE]:"nc-format__bracket",[t.LaTeXTokens.CLOSE_BRACE]:"nc-format__bracket",[t.LaTeXTokens.OPEN_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.CLOSE_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.OPEN_SQUARE_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.CLOSE_SQUARE_BRACKET]:"nc-format__bracket",[t.LaTeXTokens.UNKNOWN]:"nc-format__unknown",[t.LaTeXTokens.WORD]:"nc-format__word",[t.LaTeXTokens.WHITE_SPACE]:"nc-format__whitespace",[t.LaTeXTokens.EQUATION]:"nc-format__string"}},5520:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextMode=t.TextTokenizer=void 0;const n=s(i(7683)),o=s(i(5994));t.TextTokenizer=o.default;const r=i(2518),l=new n.default(new o.default,r.TextHighlighterSchema,"text");t.TextMode=l},5994:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6924),n=i(2518),o=i(9042),r=i(6165);class l extends o.Tokenizer{tokenize(e,t){let i=e.getFirstLineNode(),s=1,n={scope:""};for(;null!==i;){const o=this._makeLineData(i,n);t.data.set(i,o),n=o.state,i=e.getLineNode(s),s++}}updateTokens(e,t,i){var s,n;let o,l,h,a,c=i;do{if(o=e.getLineNode(i-1),l=null===o?{scope:""}:null!==(n=null===(s=t.data.get(o))||void 0===s?void 0:s.state)&&void 0!==n?n:{scope:""},o=e.getLineNode(c),null===o)break;a=t.data.get(o),h=this._makeLineData(o,l),t.data.set(o,h),c++}while(!a||!(0,r.compareLineData)(a,h))}_makeLineData(e,t){if(0===e.text.length)return{tokens:[],state:Object.assign({},t),length:0};const i=[],o=(0,s.removeAccents)(e.text);let r=0;for(;r<o.length;){let e=r;for(;r<o.length&&this._isWhiteSpaceChar(o[r]);)r++;for(r!=e&&i.push({type:n.TextTokens.WHITE_SPACE,startIndex:e}),e=r;r<o.length&&!this._isWhiteSpaceChar(o[r]);)r++;r!=e&&i.push({type:n.TextTokens.WORD,startIndex:e})}return{tokens:i,state:{scope:""},length:o.length}}_isWhiteSpaceChar(e){return" "===e||"\t"===e}}t.default=l},2518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlighterSchema=t.TextTokens=void 0,t.TextTokens={WORD:0,WHITE_SPACE:1},t.TextHighlighterSchema={[t.TextTokens.WORD]:"nc-format__word",[t.TextTokens.WHITE_SPACE]:"nc-format__space"}},2197:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMode=t.MODES=void 0;const s=i(252),n=i(226),o=i(5520);t.MODES={JavaScript:s.JSMode,Text:o.TextMode,LaTeX:n.LaTeXMode,default:o.TextMode},t.getMode=function(e){switch(e=e.toLowerCase()){case"javascript":return t.MODES.JavaScript;case"text":return t.MODES.Text;case"latex":return t.MODES.LaTeX;default:return t.MODES.default}}},4576:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NaiveSearch=t.SerachResults=t.Search=void 0;const n=s(i(9895));t.SerachResults=n.default;const o=i(9758);Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return o.Search}});const r=s(i(7297));t.NaiveSearch=r.default},7297:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(9758);class n extends s.Search{search(e,t,i){i.clearResults();let s=t.getFirstLineNode(),n=1,o=0;for(;null!==s;){const r=this._searchInLine(e,s.text);o+=r.count,i.results.set(s,r),s=t.getLineNode(n),n++}i.matchCount=o,i.phrase=e}updateSearchResults(e,t,i){const s=e.getLineNode(i);if(null===s)return;const n=t.results.get(s);n&&(t.matchCount-=n.count,t.results.delete(s));const o=this._searchInLine(t.phrase,s.text);t.matchCount+=o.count,t.results.set(s,o)}_searchInLine(e,t){if(e.length<1)return{matches:[],count:0};const i=[];let s=0,n=0;for(;(s=t.indexOf(e,n))>-1;)i.push(s),n=s+e.length;return{matches:i,count:i.length}}}t.default=n},9895:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._totalResults=0,this._searchPhrase="",this._results=new WeakMap}get results(){return this._results}get matchCount(){return this._totalResults}set matchCount(e){this._totalResults=e}getLineResutls(e){const t=this._results.get(e);return void 0!==t?t:{matches:[],count:0}}clearResults(){this._results=new WeakMap}get phrase(){return this._searchPhrase}set phrase(e){this._searchPhrase=e}}},9758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0,t.Search=class{}},6729:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=t.Range=t.Point=void 0;const n=s(i(1349));t.Point=n.default;const o=s(i(8739));t.Range=o.default;const r=s(i(6048));t.Selection=r.default},1349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.line=e,this.offset=t}}},8739:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(1349));t.default=class{constructor(e=0,t=0,i=0,s=0){this.start=new n.default(e,t),this.end=new n.default(i,s)}}},1859:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(6048));t.default=class{constructor(e){this._undo=[],this._redo=[],this._editSession=e}createSnapshot(){const e=this._editSession.selections.getSelections().map((e=>new n.default(e.start.line,e.start.offset,e.end.line,e.end.offset)));this._undo.push(e)}undo(){const e=this._undo.pop();void 0!==e&&(this._applyChanges(e),this._redo.push(e))}redo(){const e=this._redo.pop();void 0!==e&&(this._applyChanges(e),this._undo.push(e))}clear(){this._redo=[],this._undo=[]}clearRedo(){this._redo=[]}_applyChanges(e){this._editSession.selections.setSelections(e),this._editSession.emitSelectionChangedEvent()}}},700:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(6924),h=r(i(1349)),a=o(i(6048)),c=i(1229);t.default=class{constructor(e=null){this._selections=[],this._document=null,this._shouldUpdateSelections=!0,this._rectSelectionStart=null,this._document=e,this._selections=[new a.default(0,0,0,0)]}get length(){return this._selections.length}getSelections(){return this._selections}enableUpdatingSelections(){this._shouldUpdateSelections=!0}disableUpdatingSelections(){this._shouldUpdateSelections=!1}update(e,t,i,s){if(!this._shouldUpdateSelections)return;let n=0;n=i<0||s<0?0:1;const o=new h.default(e,t),r=new h.default(e-i,t-s);for(const t of this._selections)for(const l of[t.start,t.end])n?2!==(0,c.pointCompare)(l,o)&&(l.line===e&&(i?l.offset=l.offset-o.offset+s:l.offset+=s),l.line+=i):l.line>=o.line&&l.line<=r.line&&l.offset>=r.offset-1&&(1!==(0,c.pointCompare)(l,r)?(l.offset=o.offset,l.line=o.line):(l.line=o.line,l.offset=o.offset+l.offset-r.offset));this._removeOverlappingSelections()}setSelection(e){this._selections=[e]}setSelections(e){this._selections=e}addSelection(e){this._selections.push(e),this._removeOverlappingSelections()}extendLastSelection(e){0!==this._selections.length&&(this._selections[this._selections.length-1].updateSelection(e),this._removeOverlappingSelections(),this._clearRectSelectionStart())}selectAll(){const e=new a.default(0,0,0,0);if(this._document){const t=this._document.linesCount,i=this._document.getLastLine();e.end.line=t-1,e.end.offset=i.length}this._selections=[e],this._clearRectSelectionStart()}selectWordAt(e,t=!1){if(null===this._document)return;const i=(0,l.removeAccents)(this._document.getLine(e.line)),s=(0,l.getWordBefore)(i,e.offset),n=(0,l.getWordAfter)(i,e.offset),o=new a.default(e.line,e.offset-s.length,e.line,e.offset+n.length);t?this._selections.push(o):this._selections=[o],this._removeOverlappingSelections(),this._clearRectSelectionStart()}selectWordBefore(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){if(0===e.start.line&&0===e.start.offset)return;if(0===e.start.offset){e.start.line-=1;const t=(0,l.removeAccents)(this._document.getLine(e.start.line)),i=(0,l.getWordBefore)(t,t.length);e.start.offset=t.length-i.length}else{const t=(0,l.removeAccents)(this._document.getLine(e.start.line)),i=(0,l.getWordBefore)(t,e.start.offset);e.start.offset-=i.length}e.type=a.SelectionType.L}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectWordAfter(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){const t=(0,l.removeAccents)(this._document.getLine(e.end.line));if(e.end.line===this._document.linesCount-1&&e.end.offset===t.length)return;if(e.end.offset===t.length){e.end.line+=1;const t=(0,l.removeAccents)(this._document.getLine(e.end.line)),i=(0,l.getWordAfter)(t,0);e.end.offset=i.length}else{const i=(0,l.getWordAfter)(t,e.end.offset);e.end.offset+=i.length}e.type=a.SelectionType.R}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectStartOfTheLine(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.type===a.SelectionType.R){const t=this._document.getLine(e.end.line),i=(0,l.readWhiteSpaceAfter)(t,0);if(e.end.offset===i?e.end.offset=0:e.end.offset=i,e.start.line===e.end.line){const t=e.start.offset;e.start.offset=e.end.offset,e.end.offset=t,e.type=a.SelectionType.L}}else{const t=this._document.getLine(e.start.line),i=(0,l.readWhiteSpaceAfter)(t,0);e.start.offset===i?e.start.offset=0:e.start.offset=i,e.type=a.SelectionType.L}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}selectEndOfTheLine(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.type===a.SelectionType.L){const t=this._document.getLine(e.start.line);if(e.start.offset=t.length,e.start.line===e.end.line){const t=e.start.offset;e.start.offset=e.end.offset,e.end.offset=t,e.type=a.SelectionType.R}}else{const t=this._document.getLine(e.end.line);e.end.offset=t.length,e.type=a.SelectionType.R}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}moveSelectionWordBefore(){if(null!==this._document){for(const e of this._selections)if(0!==e.start.line||0!==e.start.offset){if(0===e.start.offset){e.start.line-=1;const t=(0,l.removeAccents)(this._document.getLine(e.start.line));e.start.offset=t.length}else{const t=(0,l.removeAccents)(this._document.getLine(e.start.line)),i=(0,l.getWordBefore)(t,e.start.offset);e.start.offset-=i.length}e.end.offset=e.start.offset,e.end.line=e.start.line}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}moveSelectionWordAfter(){if(null!==this._document){for(const e of this._selections){const t=(0,l.removeAccents)(this._document.getLine(e.end.line));if(e.end.line!==this._document.linesCount-1||e.end.offset!==t.length){if(e.end.offset===t.length)e.end.line+=1,e.end.offset=0;else{const i=(0,l.getWordAfter)(t,e.end.offset);e.end.offset+=i.length}e.start.offset=e.end.offset,e.start.line=e.end.line}}this._removeOverlappingSelections(),this._clearRectSelectionStart()}}extendRectangleSelection(e){if(null===this._document)return;if(null===this._rectSelectionStart){const e=this._selections[this._selections.length-1];e.type===a.SelectionType.L?this._rectSelectionStart=e.end:this._rectSelectionStart=e.start;const t=this._document.getLine(this._rectSelectionStart.line);this._rectSelectionStart.offset=(0,l.offsetToColumn)(t,this._rectSelectionStart.offset)}this._selections=[];const t=Math.min(e.line,this._rectSelectionStart.line),i=Math.max(e.line,this._rectSelectionStart.line),s=Math.min(e.offset,this._rectSelectionStart.offset),n=Math.max(e.offset,this._rectSelectionStart.offset);for(let e=t;e<i+1;e++){const t=this._document.getLine(e),i=(0,l.offsetToColumn)(t,t.length);if(s>i)continue;const o=(0,l.columnToOffset)(t,s),r=n<i?(0,l.columnToOffset)(t,n):t.length;this._selections.push(new a.default(e,o,e,r))}this._removeOverlappingSelections()}collapseSelectionToLeft(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections)if(e.isCollapsed){if(0===e.start.line&&0===e.start.offset)continue;if(e.start.offset-=1,e.end.offset-=1,e.start.offset<0){const t=e.start.line-1,i=this._document.getLine(t).length;e.start.line=t,e.end.line=t,e.start.offset=i,e.end.offset=i}}else e.end.line=e.start.line,e.end.offset=e.start.offset;this._clearRectSelectionStart()}}collapseSelectionToRight(){if(this._selections.length<1||null===this._document)return;const e=this._document.linesCount-1,t=this._document.getLine(e).length;for(const i of this._selections)if(i.isCollapsed){if(i.start.line===e&&i.start.offset===t)continue;i.start.offset+=1,i.end.offset+=1;const s=this._document.getLine(i.start.line).length;if(i.start.offset>s){const e=i.start.line+1;i.start.line=e,i.end.line=e,i.start.offset=0,i.end.offset=0}}else i.start.line=i.end.line,i.start.offset=i.end.offset;this._clearRectSelectionStart()}collapseSelectionToTop(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){if(0===e.start.line){e.start.offset=0,e.end.offset=0,e.end.line=0;continue}const t=e.start.line-1,i=this._document.getLine(t).length,s=i<e.start.offset?i:e.start.offset;e.start.offset=s,e.end.offset=s,e.start.line=t,e.end.line=t}this._clearRectSelectionStart()}}collapseSelectionToBottom(){if(this._selections.length<1||null===this._document)return;const e=this._document.linesCount-1,t=this._document.getLine(e).length;for(const i of this._selections){if(i.end.line===e){i.start.offset=t,i.end.offset=t,i.start.line=e;continue}const s=i.start.line+1,n=this._document.getLine(s).length,o=n<i.end.offset?n:i.end.offset;i.start.offset=o,i.end.offset=o,i.start.line=s,i.end.line=s}this._clearRectSelectionStart()}collapseSelectionToHome(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){let t="",i=0;e.type===a.SelectionType.L?(t=this._document.getLine(e.start.line),e.end.line=e.start.line,i=e.start.offset):(t=this._document.getLine(e.end.line),e.start.line=e.end.line,i=e.end.offset);const s=(0,l.readWhiteSpaceAfter)(t,0);i===s?(e.start.offset=0,e.end.offset=0):(e.start.offset=s,e.end.offset=s)}this._clearRectSelectionStart(),this._removeOverlappingSelections()}}collapseSelectionToEnd(){if(!(this._selections.length<1||null===this._document)){for(const e of this._selections){let t="";e.type===a.SelectionType.L?(t=this._document.getLine(e.start.line),e.end.line=e.start.line):(t=this._document.getLine(e.end.line),e.start.line=e.end.line);const i=t.length;e.start.offset=i,e.end.offset=i}this._clearRectSelectionStart(),this._removeOverlappingSelections()}}getActiveLinesNumbers(e=0,t=1/0){if(null===this._document||0===this._selections.length)return new Set;const i=new Set;for(const s of this._selections){const n=Math.max(e,s.start.line),o=Math.min(s.end.line+1,e+t);for(let e=n;e<o;e++)i.add(e)}return i}getSelectedLinesCount(){return this.getActiveLinesNumbers().size}_removeOverlappingSelections(){if(null===this._document||this._selections.length<2)return;const e=[];for(let t=0;t<this._selections.length;t++){const i=this._selections[t];for(let s=t+1;s<this._selections.length;s++){const n=this._selections[s];i.overlaps(n)&&e.push(t)}}let t=0;for(const i of e)this._selections.splice(i-t,1),t++}_clearRectSelectionStart(){this._rectSelectionStart=null}}},6048:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionType=void 0;const n=s(i(8739)),o=i(1229);var r;!function(e){e[e.N=0]="N",e[e.L=1]="L",e[e.R=2]="R"}(r=t.SelectionType||(t.SelectionType={}));class l extends n.default{constructor(){super(...arguments),this.type=r.N}get isCollapsed(){return(0,o.samePoint)(this.start,this.end)}updateSelection(e){this.type===r.L?1===(0,o.pointCompare)(this.end,e)?this.start=e:(this.type=r.R,this.start=this.end,this.end=e):this.type===r.R?2===(0,o.pointCompare)(this.start,e)?this.end=e:(this.type=r.L,this.end=this.start,this.start=e):2===(0,o.pointCompare)(this.start,e)?(this.type=r.R,this.end=e):(this.type=r.L,this.start=e)}toString(){return`{start: {l: ${this.start.line}, o:${this.start.offset}}, end: {l: ${this.end.line}, o:${this.end.offset}}}`}overlaps(e){return this.isCollapsed?2!==(0,o.pointCompare)(this.start,e.start)&&1!==(0,o.pointCompare)(this.start,e.end):2!==(0,o.pointCompare)(e.start,this.start)&&1!==(0,o.pointCompare)(e.start,this.end)||2!==(0,o.pointCompare)(e.end,this.start)&&1!==(0,o.pointCompare)(e.end,this.end)}}t.default=l},1229:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pointCompare=t.samePoint=void 0,t.samePoint=(e,t)=>e.line===t.line&&e.offset===t.offset,t.pointCompare=(e,t)=>e.line===t.line?e.offset<t.offset?2:e.offset===t.offset?0:1:e.line<t.line?2:1},5006:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CSSClasses=void 0,t.CSSClasses={EDITOR:"nc-editor",TEXT_LAYER:"nc-editor__text",GUTTER:"nc-editor__gutter",GUTTER_NUMBER:"nc-gutter__number",MAIN_INPUT:"nc-editor__input",CURSOR:"nc-selection__cursor",CURSOR_ANIMATED:"nc-selection__cursor--animated",MULTI_LINE:"nc-text__multi-line",MULTI_LINE_ACTIVE:"nc-text__multi-line--active",MULTI_LINE_HOVERED:"nc-text__multi-line--hovered",MULTI_LINE_CONTENT:"nc-text__multi-line_content",SELECTION_RANGE:"nc-selection__range",SELECTION_SEARCH:"nc-selection__search",SELECTION:"nc-editor__selection",SCROLL_BAR:"nc-editor__scroll-bar",SCROLL_INNER:"nc-scroll__scrollable",SEARCH:"nc-search",CLOSE_SEARCH:"nc-search__close",SEARCH_INPUT:"nc-search__input",SEARCH_RESULT:"nc-search__result"}},6924:(e,t)=>{function i(e){return" "===e||"\t"===e}function s(e){return/[_a-zA-Z]/.test(e)}function n(e){return/^[0-9]+$/i.test(e)}function o(e,t){return h(e,t,i)}function r(e,t){return h(e,t,s)}function l(e,t){return h(e,t,n)}function h(e,t,i){let s=t-1,n=e[s];for(;s>-1&&i(n);)s--,n=e[s];return t-s-1}function a(e,t){return d(e,t,i)}function c(e,t){return d(e,t,s)}function u(e,t){return d(e,t,n)}function d(e,t,i){let s=t,n=e[s];for(;s<e.length&&i(n);)s++,n=e[s];return s-t}Object.defineProperty(t,"__esModule",{value:!0}),t.readAfterUntil=t.readNumberAfter=t.readWordAfter=t.readWhiteSpaceAfter=t.readBeforeUntil=t.readNumberBefore=t.readWordBefore=t.readWhiteSpaceBefore=t.isAlphaNumeric=t.isNumeric=t.isAlpha=t.isWhiteSpaceChar=t.getWordAfter=t.getWordBefore=t.offsetToColumn=t.columnToOffset=t.removeAccents=void 0,t.removeAccents=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"l")},t.columnToOffset=function(e,t,i=8){let s=0,n=0;for(;s<e.length&&t>0;)if("\t"===e[s++]){const e=n%i;t-=i-e,n+=i-e}else t-=1,n+=1;return t>0?e.length:t<-i/2?s-1:s},t.offsetToColumn=function(e,t,i=8){let s=0;for(let n=0;n<t;n++)"\t"===e[n]?s+=i-s%i:s+=1;return s},t.getWordBefore=function(e,t){if(t>e.length&&(t=e.length),t<0)return"";const h=e[t-1];if(i(h)){const i=o(e,t);return e.substring(t-i,t)}if(s(h)){const i=r(e,t);return e.substring(t-i,t)}if(n(h)){const i=l(e,t);return e.substring(t-i,t)}return e.substring(t-1,t)},t.getWordAfter=function(e,t){if(t>e.length)return"";t<0&&(t=0);const o=e[t];if(i(o)){const i=a(e,t);return e.substring(t,t+i)}if(s(o)){const i=c(e,t);return e.substring(t,t+i)}if(n(o)){const i=u(e,t);return e.substring(t,t+i)}return e.substring(t,t+1)},t.isWhiteSpaceChar=i,t.isAlpha=s,t.isNumeric=n,t.isAlphaNumeric=function(e){return/^[_a-zA-Z0-9]+$/i.test(e)},t.readWhiteSpaceBefore=o,t.readWordBefore=r,t.readNumberBefore=l,t.readBeforeUntil=h,t.readWhiteSpaceAfter=a,t.readWordAfter=c,t.readNumberAfter=u,t.readAfterUntil=d},6165:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compareLineData=void 0,t.default=class{constructor(){this._data=new WeakMap}get data(){return this._data}getLineData(e){const t=this._data.get(e);return void 0!==t?t:{tokens:[],state:{scope:""},length:0}}getLineTokens(e){const t=this._data.get(e);return void 0!==t?t.tokens:[]}},t.compareLineData=function(e,t){if(e.state.scope!==t.state.scope)return!1;if(e.tokens.length!==t.tokens.length)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.tokens.length;i++){const s=e.tokens[i],n=t.tokens[i];if(s.startIndex!==n.startIndex)return!1;if(s.type!==n.type)return!1}return!0}},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0,t.Tokenizer=class{}},2914:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=t.EDITOR_FONT_FAMILY=t.EDITOR_INPUT_ID=void 0,t.EDITOR_INPUT_ID="editor-input",t.EDITOR_FONT_FAMILY="ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace",t.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=1e6},2555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.em=t.rem=t.px=t.isChildOf=t.createNodeFromTemplate=t.createDiv=t.createElement=t.createTextArea=void 0,t.createTextArea=(e="")=>{const i=(0,t.createElement)("textarea");return i.className=e,i},t.createElement=e=>document.createElement(e),t.createDiv=(e="")=>{const i=(0,t.createElement)("div");return i.className=e,i},t.createNodeFromTemplate=e=>{const i=(0,t.createElement)("template");return i.innerHTML=e,i.content.firstChild},t.isChildOf=(e,t)=>{let i=t;for(;i;){if(i===e)return!0;i=i.parentNode}return!1},t.px=e=>`${e}px`,t.rem=e=>`${e}rem`,t.em=e=>`${e}em`},8164:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(7183),o=i(2555),r=s(i(6209)),l=i(2528),h=i(8593),a=i(5006),c=i(6606),u=i(4938);class d extends n.EventEmitter{constructor(e){super(),this._mountPoint=null,this._textContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._visibleLines=[],this._activeLineNumber=0,this._hoveredLineNumber=0,this._lineHeight=20,this._letterWidth=0,this._view=e,this._mountPoint=e.getDOMElement(),this._createTextContainer(),this._initEventListeners(),this._measureLetterWidth()}get _session(){return this._view.session}get _highlighterSchema(){return this._session.highlightingSchema}_initEventListeners(){this._view.on(l.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleLine),this.update()})),this._view.on(c.EvDocument.Edited,(()=>{this.update()})),this._view.on(c.EvTokenizer.Finished,(()=>{this.update()})),this._view.on(u.EvSelection.Changed,(()=>{this._updateActiveLines()})),this._view.on(c.EvDocument.Set,(()=>{this.update()}))}_createTextContainer(){null!==this._mountPoint&&(this._textContainer=(0,o.createDiv)(a.CSSClasses.TEXT_LAYER),this._mountPoint.appendChild(this._textContainer),this._textContainer.style.gridArea="1/2/2/3")}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}update(){this._renderLines()}measureLetterWidth(){return this._measureLetterWidth()}_updateActiveLines(){if(null==this._textContainer)return;const e=this._session.reader.getLines(this._firstVisibleLine,this._visibleLinesCount),t=this._session.getActiveLinesNumbers(this._firstVisibleLine,this._visibleLinesCount);if(this._visibleLines.length!==e.length)return;let i=0;for(const e of this._visibleLines)e.setActive(t.has(this._firstVisibleLine+i)),i++}_measureLetterWidth(){if(null===this._textContainer)return;const e=(0,o.createDiv)("");e.style.padding="0",e.style.margin="0",e.style.width="fit-content",e.textContent="qwertyuiopASDFGHJKLX",this._textContainer.appendChild(e),this._letterWidth=e.offsetWidth/20,this._textContainer.removeChild(e),this.emit(l.EvFont.LetterWidth,{width:this._letterWidth})}_renderLines(){if(null===this._textContainer)return;const e=this._session.reader.getLines(this._firstVisibleLine,this._visibleLinesCount),t=this._session.getActiveLinesNumbers(this._firstVisibleLine,this._visibleLinesCount);if(this._visibleLines.length===e.length){let i=0;for(const s of e)this._visibleLines[i].setSchema(this._highlighterSchema),this._visibleLines[i].setData(s),this._visibleLines[i].setActive(t.has(this._firstVisibleLine+i)),this._visibleLines[i].render(),i++}else{this._visibleLines=[];let i=0;for(const s of e)this._renderLine(this._visibleLines,s,this._firstVisibleLine+i),this._visibleLines[i].setActive(t.has(this._firstVisibleLine+i)),i++;const s=this._visibleLines.map((e=>e.getNode())).filter(h.notEmpty);this._textContainer.replaceChildren(...s)}}_renderLine(e,t,i){const s=new r.default(t,i===this._activeLineNumber,this._highlighterSchema);e.push(s)}}t.default=d},509:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(5006),n=i(2555);t.default=class{constructor(e,t){this._left=0,this._top=0,this._cursorElement=null,this._left=e,this._top=t,this._createDOMElement()}getDOMElment(){return this._cursorElement}_createDOMElement(){this._cursorElement=(0,n.createDiv)(s.CSSClasses.CURSOR+" "+s.CSSClasses.CURSOR_ANIMATED),this._cursorElement.style.top=(0,n.px)(this._top),this._cursorElement.style.left=(0,n.px)(this._left)}}},8285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(7183),n=i(2555),o=i(2528),r=i(5006),l=i(6606);class h extends s.EventEmitter{constructor(e){super(),this._mountPoint=null,this._gutterContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._totalLinesCount=50,this._gutterWidth=50,this._view=e,this._mountPoint=e.getDOMElement(),this._createGutterContainer(),this._initEventListeners(),this._totalLinesCount=this._session.reader.getTotalLinesCount(),this._visibleLinesCount=this._view.visibleLinesCount,this.update()}get _session(){return this._view.session}update(){this._renderLinesNumbers()}setWidth(e){this._gutterWidth=e}setWidthForLinesCount(e){if(null===this._gutterContainer)return this._gutterWidth;const t=e.toString().length;let i=10*t;return i<50&&(i=50),this._gutterWidth!==i&&(this._gutterWidth=10*t,this._gutterWidth=i,this._gutterContainer.style.width=(0,n.px)(this._gutterWidth)),this.emit(o.EvGutter.Width,{width:this._gutterWidth}),this._gutterWidth}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}setTotalLinesCount(e){this._totalLinesCount=e}_initEventListeners(){this._view.on(o.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleLine),this.update()})),this._view.on(l.EvDocument.LinesCount,(e=>{this.setTotalLinesCount(e.linesCount),this.setWidthForLinesCount(e.linesCount),this.update()})),this._view.on(l.EvDocument.Set,(()=>{const e=this._session.reader.getTotalLinesCount();this.setTotalLinesCount(e),this.setWidthForLinesCount(e),this.update()}))}_createGutterContainer(){null!==this._mountPoint&&(this._gutterContainer=(0,n.createDiv)(r.CSSClasses.GUTTER),this._mountPoint.appendChild(this._gutterContainer),this._gutterContainer.style.gridArea="1/1/2/2")}_renderLinesNumbers(){if(null===this._gutterContainer)return;const e=[];for(let t=0;t<this._visibleLinesCount&&!(t+this._firstVisibleLine>this._totalLinesCount-1);t++){const i=(0,n.createDiv)(r.CSSClasses.GUTTER_NUMBER);i.innerText=`${t+this._firstVisibleLine+1}`,e.push(i)}this._gutterContainer.replaceChildren(...e)}}t.default=h},9805:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(2914),n=i(5006),o=i(2555),r=i(2528),l=i(6606);t.default=class{constructor(e){this._domElement=null,this._view=e,this._domElement=(0,o.createTextArea)(n.CSSClasses.MAIN_INPUT),this._domElement.id=s.EDITOR_INPUT_ID,this._domElement.autofocus=!0,this._domElement.autocapitalize="off",this._initEventListeners()}focus(){var e;null===(e=this._domElement)||void 0===e||e.focus()}render(e){this._domElement&&e.appendChild(this._domElement)}_initEventListeners(){this._domElement&&this._domElement.addEventListener("input",(()=>this._onInput())),this._view.on(r.EvFocus.Changed,(e=>{e.focused&&this.focus()})),this._view.on(l.EvDocument.Set,(()=>{this.focus()}))}_onInput(){null!==this._domElement&&0!==this._domElement.value.length&&(this._view.writer.insert(this._domElement.value),this._domElement.value="")}}},6209:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(5006),n=i(2555);t.default=class{constructor(e,t=!1,i={}){this._text="",this._isActive=!1,this._isHovered=!1,this._domElement=null,this._tokens=[],this._text=e.rawText,this._tokens=e.tokens,this._highlighterSchema=i,this._domElement=(0,n.createNodeFromTemplate)(`<div class="${s.CSSClasses.MULTI_LINE}">\n\t\t\t<div class="${s.CSSClasses.MULTI_LINE_CONTENT}">\n\t\t\t  ${this._text||"<br />"}\n\t\t\t</div>\n\t\t</div>`),this._domElement.style.height=(0,n.px)(20),this.setActive(t),this._renderTokens()}getNode(){return this._domElement}setData(e){e.rawText===this._text&&this._tokens.length>0||(this._text=e.rawText,this._tokens=e.tokens)}render(){this._renderTokens()}setSchema(e){this._highlighterSchema=e}_renderTokens(){const e=this._domElement;if(null===e.firstElementChild)return;if(0===this._tokens.length)return void(e.firstElementChild.textContent=this._text);const t=[];for(let e=0;e<this._tokens.length;e++){const i=this._tokens[e],s=(0,n.createElement)("span");s.className=this._highlighterSchema[i.type];const o=i.startIndex,r=e+1<this._tokens.length?this._tokens[e+1].startIndex:this._text.length;s.textContent=this._text.substring(o,r),t.push(s)}e.firstElementChild.replaceChildren(...t)}setText(e){if(e===this._text)return;this._text=e;const t=this._domElement;null!==t.firstElementChild&&(t.firstElementChild.textContent=e)}setActive(e){if(e===this._isActive)return;this._isActive=e;const t=this._domElement;e?t.classList.add(s.CSSClasses.MULTI_LINE_ACTIVE):t.classList.remove(s.CSSClasses.MULTI_LINE_ACTIVE)}setHover(e){if(e===this._isHovered)return;this._isHovered=e;const t=this._domElement;e?t.classList.add(s.CSSClasses.MULTI_LINE_HOVERED):t.classList.remove(s.CSSClasses.MULTI_LINE_HOVERED)}}},168:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(2555),n=i(7183),o=i(2528),r=i(2914),l=i(5006),h=i(6606);class a extends n.EventEmitter{constructor(e){super(),this._mountPoint=null,this._emitterName="scroll-bar",this._scrollBarContainer=null,this._scrollableDiv=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._totalLinesCount=50,this._maxLinesPadding=10,this._scale=20,this._onScroll=()=>{if(null===this._scrollBarContainer)return;const e=Math.ceil(this._scrollBarContainer.scrollTop/this._scale);this._firstVisibleLine=e,this.emit(o.EvScroll.Changed,{firstVisibleLine:e,emitterName:this._emitterName})},this._view=e,this._mountPoint=e.getDOMElement(),this._createScrollContainer(),this._initEventListeners()}get _session(){return this._view.session}update(){this._updateScrollPosition()}setTotalLinesCount(e){if(this._totalLinesCount=e,this._updateScale(),this._scrollableDiv){let t=(e+this._maxLinesPadding)*this._scale;this._totalLinesCount>r.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE&&(t*=1.01),this._scrollableDiv.style.height=(0,s.px)(t)}}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}setMaxLinesPadding(e){this._maxLinesPadding=e}_createScrollContainer(){null!==this._mountPoint&&(this._scrollBarContainer=(0,s.createDiv)(l.CSSClasses.SCROLL_BAR),this._scrollableDiv=(0,s.createDiv)(l.CSSClasses.SCROLL_INNER),this._scrollBarContainer.appendChild(this._scrollableDiv),this._mountPoint.appendChild(this._scrollBarContainer),this._scrollBarContainer.style.gridArea="1/3/2/4")}_updateScrollPosition(){null!==this._scrollBarContainer&&(this._scrollBarContainer.scrollTop=Math.ceil(this._firstVisibleLine*this._scale))}_initEventListeners(){this._scrollBarContainer&&(this._scrollBarContainer.addEventListener("mousedown",(()=>{this._onMouseDown()})),this._scrollBarContainer.addEventListener("mouseup",(()=>{this._onMouseUp()}))),this._view.on(o.EvScroll.Changed,(e=>{e.emitterName!==this._emitterName&&(this.setFirstVisibleLine(e.firstVisibleLine),this.update())})),this._view.on(h.EvDocument.LinesCount,(e=>{this.setTotalLinesCount(e.linesCount)})),this._view.on(h.EvDocument.Set,(()=>{const e=this._session.reader.getTotalLinesCount();this.setTotalLinesCount(e)}))}_onMouseDown(){this._scrollBarContainer&&this._scrollBarContainer.addEventListener("scroll",this._onScroll)}_onMouseUp(){this._scrollBarContainer&&this._scrollBarContainer.removeEventListener("scroll",this._onScroll)}_updateScale(){this._totalLinesCount>r.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE?this._scale=.1:this._scale=20}}t.default=a},3421:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(7183),n=i(2555),o=i(2528),r=i(5006),l=i(4938),h=i(6606);class a extends s.EventEmitter{constructor(e){super(),this._mountPoint=null,this._searchContainer=null,this._closeButton=null,this._input=null,this._resultsContainer=null,this._isOpen=!1,this._seatchMatchesCount=0,this._searchPhrase="",this._view=e,this._mountPoint=e.getDOMElement(),this._createSearchContainer(),this._initEventListeners()}get _session(){return this._view.session}update(){this._resultsContainer&&(this._resultsContainer.textContent=`Results: ${this._seatchMatchesCount}`),this._input&&this._input.value!==this._searchPhrase&&(this._input.value=this._searchPhrase)}show(){var e;this._isOpen=!0,this._searchContainer&&(this._searchContainer.style.display="flex"),null===(e=this._input)||void 0===e||e.focus()}hide(){this._isOpen=!1,this._searchContainer&&(this._searchContainer.style.display="none")}getDOMElement(){return this._searchContainer}_initEventListeners(){this._view.on(o.EvSearchUi.Open,(({phrase:e})=>{if(null!==e){if(!this._input)return;this._searchPhrase=e,this._session.search(this._searchPhrase)}this.show(),this.update()})),this._view.on(l.EvSearch.Finished,(()=>{this._seatchMatchesCount=this._session.getSearchMatchCount(),this.update()})),this._view.on(h.EvDocument.Set,(()=>{this._input&&this._searchPhrase&&this._session.search(this._searchPhrase)})),this._closeButton&&this._closeButton.addEventListener("click",(()=>{this.emit(o.EvSearchUi.Close,void 0),this.hide()})),this._input&&this._input.addEventListener("input",(()=>{this._input&&(this._searchPhrase=this._input.value,this._session.search(this._searchPhrase))}))}_createSearchContainer(){null!==this._mountPoint&&(this._searchContainer=(0,n.createDiv)(r.CSSClasses.SEARCH),this._mountPoint.appendChild(this._searchContainer),this._closeButton=(0,n.createElement)("button"),this._closeButton.className=r.CSSClasses.CLOSE_SEARCH,this._closeButton.textContent="X",this._searchContainer.appendChild(this._closeButton),this._input=(0,n.createElement)("input"),this._input.className=r.CSSClasses.SEARCH_INPUT,this._input.autofocus=!0,this._searchContainer.appendChild(this._input),this._resultsContainer=(0,n.createElement)("p"),this._resultsContainer.className=r.CSSClasses.SEARCH_RESULT,this._searchContainer.appendChild(this._resultsContainer),this.hide())}}t.default=a},1757:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(6924),n=i(5006),o=i(2555);t.default=class{constructor(e){this._domElements=[],this._selection=e}setSelection(e){this._selection=e}render(e,t,i,r){var l,h;if(this._selection.isCollapsed)return[];const a=i.map((e=>e.rawText.length)),c=Math.max(this._selection.start.line,e)-e,u=Math.min(this._selection.end.line+1,e+t)-e,d=u-c;d!==this._domElements.length&&(this._domElements=[]);for(let t=c;t<u;t++){const u=null!==(h=null===(l=i[t])||void 0===l?void 0:l.rawText)&&void 0!==h?h:"";let _=0,f=(0,s.offsetToColumn)(u,a[t]);t===this._selection.start.line-e&&(_=(0,s.offsetToColumn)(u,this._selection.start.offset)),t===this._selection.end.line-e&&(f=(0,s.offsetToColumn)(u,this._selection.end.offset));const m=(0,o.px)(_*r),p=(0,o.px)(20*t),g=(0,o.px)((f-_)*r||r),v=(0,o.px)(20);if(d===this._domElements.length){const e=t-c;this._domElements[e].style.left=m,this._domElements[e].style.top=p,this._domElements[e].style.width=g,this._domElements[e].style.height=v}else{const e=(0,o.createDiv)(n.CSSClasses.SELECTION_RANGE);e.style.left=m,e.style.top=p,e.style.width=g,e.style.height=v,this._domElements.push(e)}}return this._domElements}}},7551:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(6729),o=i(6924),r=i(5006),l=i(2555),h=s(i(509)),a=s(i(1757)),c=i(2528),u=i(7183),d=i(6048),_=i(4938),f=i(6606);class m extends u.EventEmitter{constructor(e){super(),this._emitterName="selection-layer",this._mountPoint=null,this._selectionContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._lineHeight=20,this._letterWidth=0,this._visibleSelections=[],this._isMouseHold=!1,this._isTouchHold=!1,this._isTouchSelecting=!1,this._isCtrlHold=!1,this._isShitHold=!1,this._isAltHold=!1,this._lastTouchTime=null,this._lastTouchPosition=new n.Point(0,0),this._showSearchResults=!1,this._view=e,this._mountPoint=e.getDOMElement(),this._crateSelctionContainer(),this._initEventListeners()}get _session(){return this._view.session}setFirstVisibleLine(e){this._firstVisibleLine=e}setVisibleLinesCount(e){this._visibleLinesCount=e}update(){if(this._selectionContainer){const e=this._renderSelections(),t=this._renderCursors(),i=this._renderSearchResults();this._selectionContainer.replaceChildren(...e,...t,...i)}}_crateSelctionContainer(){null!==this._mountPoint&&(this._selectionContainer=(0,l.createDiv)(r.CSSClasses.SELECTION),this._mountPoint.appendChild(this._selectionContainer),this._selectionContainer.style.gridArea="1/2/2/3",this._selectionContainer.style.position="relative",this._selectionContainer.style.zIndex="4",this._selectionContainer.style.marginLeft=(0,l.em)(1))}_initEventListeners(){this._view.on(c.EvScroll.Changed,(e=>{this.setFirstVisibleLine(e.firstVisibleLine),this.update()})),this._view.on(c.EvFont.LetterWidth,(e=>{this._letterWidth=e.width,this.update()})),this._view.on(c.EvKey.CtrlDown,(()=>{this._isCtrlHold=!0})),this._view.on(c.EvKey.CtrlUp,(()=>{this._isCtrlHold=!1})),this._view.on(c.EvKey.ShiftDown,(()=>{this._isShitHold=!0})),this._view.on(c.EvKey.ShiftUp,(()=>{this._isShitHold=!1})),this._view.on(c.EvKey.AltDown,(()=>{this._isAltHold=!0})),this._view.on(c.EvKey.AltUp,(()=>{this._isAltHold=!1})),this._view.on(c.EvSearchUi.Open,(()=>{this._showSearchResults=!0,this.update()})),this._view.on(c.EvSearchUi.Close,(()=>{this._showSearchResults=!1,this.update()})),this._view.on(_.EvSelection.Changed,(()=>{this.update()})),this._view.on(_.EvSearch.Finished,(()=>{this.update()})),this._view.on(f.EvDocument.Set,(()=>{this.update()})),this._selectionContainer&&(this._selectionContainer.addEventListener("mousedown",(e=>this._onMouseDown(e))),this._selectionContainer.addEventListener("mouseup",(()=>this._onMouseUp())),this._selectionContainer.addEventListener("mousemove",(e=>this._onMouseMove(e))),this._selectionContainer.addEventListener("dblclick",(e=>this._onDoubleClick(e))),this._selectionContainer.addEventListener("touchstart",(e=>this._onTouchStart(e))),this._selectionContainer.addEventListener("touchend",(()=>this._onTouchEnd())),this._selectionContainer.addEventListener("touchmove",(e=>this._onTouchMove(e))))}_renderSelections(){if(null===this._selectionContainer)return[];const e=this._session.getSelctions(),t=this._session.reader.getLines(this._firstVisibleLine,this._visibleLinesCount),i=[];if(e.length===this._visibleSelections.length)for(let s=0;s<e.length;s++)this._visibleSelections[s].setSelection(e[s]),i.push(...this._visibleSelections[s].render(this._firstVisibleLine,this._visibleLinesCount,t,this._letterWidth));else{this._visibleSelections=[];for(let s=0;s<e.length;s++){const n=new a.default(e[s]);this._visibleSelections.push(n),i.push(...this._visibleSelections[s].render(this._firstVisibleLine,this._visibleLinesCount,t,this._letterWidth))}}return i}_renderCursors(){if(null===this._selectionContainer)return[];const e=this._session.getSelctions(),t=this._session.reader.getLines(this._firstVisibleLine,this._visibleLinesCount),i=[];for(const s of e){let e=0,n=0;if(s.type===d.SelectionType.L?(e=s.start.line-this._firstVisibleLine,n=s.start.offset):(e=s.end.line-this._firstVisibleLine,n=s.end.offset),e>=t.length||e<0)continue;const r=t[e],l=(0,o.offsetToColumn)(r.rawText,n)*this._letterWidth,a=e*this._lineHeight,c=new h.default(l,a).getDOMElment();c&&i.push(c)}return i}_renderSearchResults(){if(null===this._selectionContainer||!this._showSearchResults)return[];const e=this._session.reader.getLines(this._firstVisibleLine,this._visibleLinesCount),t=this._session.getSearchPhrase().length,i=[];let s=0;for(const n of e){for(const e of n.searchResults){const h=(0,l.createDiv)(r.CSSClasses.SELECTION_SEARCH),a=(0,o.offsetToColumn)(n.rawText,e)*this._letterWidth,c=(0,o.offsetToColumn)(n.rawText,e+t)*this._letterWidth,u=s*this._lineHeight;h.style.top=(0,l.px)(u),h.style.left=(0,l.px)(a),h.style.width=(0,l.px)(c-a),h.style.height=(0,l.px)(this._lineHeight),i.push(h)}s++}return i}_onMouseDown(e){this._isMouseHold=!0;const[t,i]=p(e),[s,o]=this._getLineAndOffsetAtPosition(t,i),r=Math.round(t/this._letterWidth);this._isShitHold?this._isAltHold?this._session.extendRectangleSelection(new n.Point(s,r)):this._session.extendLastSelection(new n.Point(s,o)):this._isCtrlHold?this._session.addSelection(new n.Selection(s,o,s,o)):this._session.setSelection(new n.Selection(s,o,s,o))}_onMouseUp(){this._isMouseHold=!1}_onMouseMove(e){if(this._isMouseHold){const[t,i]=p(e),[s,o]=this._getLineAndOffsetAtPosition(t,i),r=Math.round(t/this._letterWidth);this._isShitHold&&this._isAltHold?this._session.extendRectangleSelection(new n.Point(s,r)):this._session.extendLastSelection(new n.Point(s,o))}}_onDoubleClick(e){const[t,i]=p(e),[s,o]=this._getLineAndOffsetAtPosition(t,i);this._isShitHold||this._session.selectWordAt(new n.Point(s,o),this._isCtrlHold)}_onTouchStart(e){this._isTouchHold=!0;const[t,i]=g(e),[s,o]=this._getLineAndOffsetAtPosition(t,i),r=performance.now();null!==this._lastTouchTime&&r-this._lastTouchTime<200&&(this._isTouchSelecting=!0,this._session.setSelection(new n.Selection(s,o,s,o))),this._lastTouchTime=r,this._lastTouchPosition.line=i,this._lastTouchPosition.offset=t,e.preventDefault(),e.stopPropagation()}_onTouchEnd(){this._isTouchHold=!1,this._isTouchSelecting=!1}_onTouchMove(e){if(this._isTouchHold){const[t,i]=g(e),[s,o]=this._getLineAndOffsetAtPosition(t,i);if(this._isTouchSelecting)this._session.extendLastSelection(new n.Point(s,o));else{const e=this._lastTouchPosition.line-i,t=e>0?Math.min(Math.round(e/4),2):Math.max(Math.round(e/4),-2);this.emit(c.EvScroll.Changed,{firstVisibleLine:t+this._firstVisibleLine,emitterName:this._emitterName})}this._lastTouchPosition.line=i,this._lastTouchPosition.offset=t}}_getLineAndOffsetAtPosition(e,t){let i=Math.floor(t/this._lineHeight)+this._firstVisibleLine,s=0;const n=this._session.reader.getLines(i,1);if(0===n.length){const e=this._session.reader.getLastLine();if(null===e)return[0,0];s=(0,o.columnToOffset)(e.rawText,1/0),i=this._session.reader.getTotalLinesCount()-1}else{const t=n[0],i=Math.round(e/this._letterWidth);s=(0,o.columnToOffset)(t.rawText,i)}return[i,s]}}function p(e){const t=e.target.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]}function g(e){const t=e.target.getBoundingClientRect();return[e.touches[0].clientX-t.left,e.touches[0].clientY-t.top]}t.default=m},2248:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(7183),o=s(i(8164)),r=s(i(8285)),l=s(i(168)),h=s(i(7551)),a=s(i(9805)),c=i(2555),u=i(1556),d=i(2528),_=i(2914),f=i(5006),m=i(6048),p=s(i(3421)),g=i(1117),v=i(6606),S=i(4938);class L extends n.EventEmitter{constructor(e,t){super(),this._mountPoint=null,this._editorContainer=null,this._emitterName="editor-view",this._textLayer=null,this._gutter=null,this._scrollBar=null,this._selectionLayer=null,this._input=null,this._search=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._scrollHeight=0,this._scrollWidth=0,this._scrollLeft=0,this._scrollbarWidth=15,this._gutterWidth=50,this._isFocused=!1,this._height=0,this._width=0,this._lineHeight=20,this._fontSize=12,this._fontFamily=_.EDITOR_FONT_FAMILY,this._letterWidth=8,this._hoverLineNumber=-1,this._activeLineNumber=-1,this._isCtrlHold=!1,this._isShitHold=!1,this._isLeftAltHold=!1,this._isRightAltHold=!1,this._theme=u.Theme.Default,this._onDocumentEdit=this._onDocumentEdit.bind(this),this._onTokenizerFinished=this._onTokenizerFinished.bind(this),this._onSelectionChanged=this._onSelectionChanged.bind(this),this._onLinesCountChanged=this._onLinesCountChanged.bind(this),this._onSearchFinished=this._onSearchFinished.bind(this),this._editor=e;let i=e.getLatestDocumentId();if(!i){const t=new g.Document("doc");i=e.addDocument(t)}this._sessionId=e.createSession(i),this._session=e.getSession(this._sessionId),this._docSession=e.getDocumentSession(i),this.mount(t),this._textLayer=new o.default(this),this._selectionLayer=new h.default(this),this._gutter=new r.default(this),this._scrollBar=new l.default(this),this._input=new a.default(this),this._search=new p.default(this),this._scrollBarInitialConfig(),this._initEventListeners(),this._createInputElement(),this._scrollToLine(0,this._emitterName),this.setTheme(u.Theme.Default),this._textLayer.measureLetterWidth(),this._emitInitEvent()}get session(){return this._session}get reader(){return this._session.reader}get writer(){return this._session.writer}get visibleLinesCount(){return this._visibleLinesCount}mount(e){if("string"==typeof e){const t=document.getElementById(e);if(null===t)throw new Error(`Element with id="${e}" does not exist.`);this._mountPoint=t}else typeof e===HTMLElement.toString()&&(this._mountPoint=e);return this._createEditorContainer(),this._updateEditorSize(),this._createInputElement(),this.setTheme(u.DEFAULT_THEME),0}unmount(){this._mountPoint&&(this._mountPoint.textContent="")}setTheme(e){const t=e;let i=!1;for(const e of u.VALID_THEMES)if(e===t&&e.length===t.length){i=!0;break}if(!i)throw new Error("Invalid theme name");if(this._theme=t,null===this._editorContainer)return 1;for(const e of u.VALID_THEMES)this._editorContainer.classList.remove(u.BASE_THEME_CLASS+e);return this._editorContainer.classList.add(u.BASE_THEME_CLASS+t),this.emit(d.EvTheme.Changed,{theme:this._theme}),0}setSession(e){this._session=this._editor.getSession(e),this._docSession=this._session.documentSession,this._sessionId=e,this._clearSessionEventListeners(),this._initSessionEventListeners(),this.emit(v.EvDocument.Set,void 0),this.scrollTolastSelection()}setDocument(e,t=!1){t?(this._sessionId=this._editor.createSession(e),this._session=this._editor.getSession(this._sessionId),this._docSession=this._editor.getDocumentSession(e)):(this._session=this._editor.getEditSessionForDocument(e),this._docSession=this._session.documentSession,this._sessionId=this._session.id),this._clearSessionEventListeners(),this._initSessionEventListeners(),this.emit(v.EvDocument.Set,void 0),this.scrollTolastSelection()}update(){this._updateEditorSize()}getDOMElement(){return this._editorContainer}_emitInitEvent(){this.emit(d.EvView.Initialized,void 0)}_scrollBarInitialConfig(){this._scrollBar&&this._scrollBar.setMaxLinesPadding(10)}_createEditorContainer(){null!==this._mountPoint&&(this._editorContainer=(0,c.createDiv)(f.CSSClasses.EDITOR),this._mountPoint.appendChild(this._editorContainer),this._editorContainer.style.fontFamily=this._fontFamily,this._editorContainer.style.fontSize=(0,c.px)(this._fontSize),this._editorContainer.style.lineHeight=(0,c.px)(this._lineHeight),this._updateGridLayout())}_updateGridLayout(){this._editorContainer&&(this._editorContainer.style.gridTemplate=`100% / ${(0,c.px)(this._gutterWidth)} 1fr ${(0,c.px)(this._scrollbarWidth)}`)}_createInputElement(){this._editorContainer&&this._input&&this._input.render(this._editorContainer)}_updateEditorSize(){null!==this._editorContainer&&(this._height=this._editorContainer.clientHeight,this._width=this._editorContainer.clientWidth,this._visibleLinesCount=Math.ceil(this._height/this._lineHeight),this._gutter&&this._gutter.setVisibleLinesCount(this._visibleLinesCount),this._textLayer&&this._textLayer.setVisibleLinesCount(this._visibleLinesCount),this._scrollBar&&this._scrollBar.setVisibleLinesCount(this._visibleLinesCount),this._selectionLayer&&this._selectionLayer.setVisibleLinesCount(this._visibleLinesCount))}_initEventListeners(){window.addEventListener("resize",(()=>this._onResize())),this._editorContainer&&(this._editorContainer.addEventListener("mousewheel",(e=>this._onMouseWheel(e))),this._editorContainer.addEventListener("click",(e=>this._onMouseDown(e))),this._editorContainer.addEventListener("blur",(()=>this._onBlur())),this._editorContainer.addEventListener("keydown",(e=>this._onKeyDown(e))),this._editorContainer.addEventListener("keyup",(e=>this._onKeyUp(e))),this._editorContainer.addEventListener("paste",(e=>this._onPaste(e)))),this._scrollBar&&this._scrollBar.on(d.EvScroll.Changed,(e=>{this._scrollToLine(e.firstVisibleLine,e.emitterName)})),this._textLayer&&this._textLayer.on(d.EvFont.LetterWidth,(e=>{this._letterWidth=e.width,this.emit(d.EvFont.LetterWidth,{width:e.width})})),this._gutter&&this._gutter.on(d.EvGutter.Width,(e=>{this._gutterWidth=e.width,this._updateGridLayout()})),this._selectionLayer&&this._selectionLayer.on(d.EvScroll.Changed,(e=>{this._scrollToLine(e.firstVisibleLine,e.emitterName)})),this._search&&this._search.on(d.EvSearchUi.Close,(()=>{this.emit(d.EvSearchUi.Close,void 0),this._setFocus(!0)})),this._initSessionEventListeners()}_initSessionEventListeners(){this._docSession.on(v.EvDocument.Edited,this._onDocumentEdit),this._docSession.on(v.EvTokenizer.Finished,this._onTokenizerFinished),this._session.on(S.EvSelection.Changed,this._onSelectionChanged),this._docSession.on(v.EvDocument.LinesCount,this._onLinesCountChanged),this._session.on(S.EvSearch.Finished,this._onSearchFinished)}_clearSessionEventListeners(){this._docSession.off(v.EvDocument.Edited,this._onDocumentEdit),this._docSession.off(v.EvTokenizer.Finished,this._onTokenizerFinished),this._session.off(S.EvSelection.Changed,this._onSelectionChanged),this._docSession.off(v.EvDocument.LinesCount,this._onLinesCountChanged),this._session.off(S.EvSearch.Finished,this._onSearchFinished)}_onDocumentEdit(){this.emit(v.EvDocument.Edited,void 0)}_onTokenizerFinished(){this.update(),this.emit(v.EvTokenizer.Finished,void 0)}_onSelectionChanged(){const e=this._session.getSelctions(),t=e[e.length-1],i=t.type===m.SelectionType.L?t.start:t.end;this._isCursorVisible(i)||this.scrollTolastSelection(),this.emit(S.EvSelection.Changed,void 0)}_onLinesCountChanged(e){this.emit(v.EvDocument.LinesCount,e)}_onSearchFinished(){this.emit(S.EvSearch.Finished,void 0)}_onPaste(e){e.clipboardData&&this.writer.insert(e.clipboardData.getData("text")),e.stopPropagation(),e.preventDefault()}_onResize(){this._updateEditorSize(),this.update()}_onMouseWheel(e){const t=Math.round(e.deltaY/Math.abs(e.deltaY)*3);this._scrollToLine(this._firstVisibleLine+t,this._emitterName),e.preventDefault(),e.stopPropagation()}_onMouseDown(e){this._search&&(0,c.isChildOf)(this._search.getDOMElement(),e.target)||this._setFocus(!0)}_onBlur(){this._setFocus(!1),this.update()}_onKeyDown(e){switch(e.code){case"ControlLeft":this._isCtrlHold=!0,this.emit(d.EvKey.CtrlDown,void 0);break;case"ShiftLeft":this._isShitHold=!0,this.emit(d.EvKey.ShiftDown,void 0);break;case"AltLeft":this._isLeftAltHold=!0,this.emit(d.EvKey.AltDown,void 0);break;case"AltRight":this._isRightAltHold=!0;break;case"KeyA":this._isCtrlHold&&!this._isRightAltHold&&this._session.selectAll();break;case"ArrowUp":this._isLeftAltHold?this.writer.swapLinesUp():this._session.collapseSelectionToTop();break;case"ArrowDown":this._isLeftAltHold?this.writer.swapLinesDown():this._session.collapseSelectionToBottom();break;case"ArrowLeft":this._isShitHold&&this._isCtrlHold?this._session.selectWordBefore():this._isCtrlHold?this._session.moveSelectionWordBefore():this._session.collapseSelectionToLeft();break;case"ArrowRight":this._isShitHold&&this._isCtrlHold?this._session.selectWordAfter():this._isCtrlHold?this._session.moveSelectionWordAfter():this._session.collapseSelectionToRight();break;case"Home":this._isShitHold?this._session.selectStartOfTheLine():this._session.collapseSelectionToHome();break;case"End":this._isShitHold?this._session.selectEndOfTheLine():this._session.collapseSelectionToEnd();break;case"Backspace":this._isCtrlHold?this.writer.removeWordBefore():this.writer.remove();break;case"Delete":this._isCtrlHold?this.writer.removeWordAfter():this.writer.remove(1);break;case"Tab":this._isShitHold?this.writer.removeIndentFromSelectedLines():1===this._session.getSelectedLinesCount()?this.writer.insert("\t"):this.writer.indentSelectedLines(),e.stopPropagation(),e.preventDefault();break;case"KeyX":this._isCtrlHold&&this.writer.cut();break;case"KeyC":this._isCtrlHold&&this.writer.copy();break;case"KeyF":if(this._isCtrlHold){const t=this._session.reader.getSelectedText();this.emit(d.EvSearchUi.Open,{phrase:t||null}),e.preventDefault(),e.stopPropagation()}break;case"KeyZ":this._isCtrlHold&&(this._session.undo(),e.preventDefault(),e.stopPropagation());break;case"KeyY":this._isCtrlHold&&(this._session.redo(),e.preventDefault(),e.stopPropagation())}}_onKeyUp(e){switch(e.code){case"ControlLeft":this._isCtrlHold=!1,this.emit(d.EvKey.CtrlUp,void 0);break;case"ShiftLeft":this._isShitHold=!1,this.emit(d.EvKey.ShiftUp,void 0);break;case"AltLeft":this._isLeftAltHold=!1,this.emit(d.EvKey.AltUp,void 0);break;case"AltRight":this._isRightAltHold=!1}}_onDocumentClick(e){const t=e.target;(0,c.isChildOf)(this._editorContainer,t)?(this._setFocus(!0),this.update()):(this._setFocus(!1),this.update())}scrollToLine(e){this._scrollToLine(e,this._emitterName)}scrollTolastSelection(){const e=this._session.selections.getSelections();if(0===e.length)return void this.scrollToLine(0);const t=e[e.length-1];t.type===m.SelectionType.L?this.scrollToLine(t.start.line):this.scrollToLine(t.end.line)}_setFocus(e){this._isFocused=e,this.emit(d.EvFocus.Changed,{focused:e})}_scrollToLine(e,t=this._emitterName){let i=this.reader.getTotalLinesCount();i=i<0?0:i,e<0||i-this._visibleLinesCount<0?this._firstVisibleLine=0:e>i-this._visibleLinesCount+10?this._firstVisibleLine=i-this._visibleLinesCount+10:this._firstVisibleLine=e,this.emit(d.EvScroll.Changed,{firstVisibleLine:this._firstVisibleLine,emitterName:t}),this.update()}_isCursorVisible(e){return!(e.line<this._firstVisibleLine||e.line>=this._firstVisibleLine+this._visibleLinesCount)}}t.default=L},2528:(e,t)=>{var i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.EvKey=t.EvSearchUi=t.EvGutter=t.EvFont=t.EvTheme=t.EvFocus=t.EvScroll=t.EvView=void 0,(t.EvView||(t.EvView={})).Initialized="view.Initialized",(t.EvScroll||(t.EvScroll={})).Changed="scroll.Changed",(t.EvFocus||(t.EvFocus={})).Changed="focus.Changed",(t.EvTheme||(t.EvTheme={})).Changed="theme.Changed",(t.EvFont||(t.EvFont={})).LetterWidth="font.LetterWidthChange",(t.EvGutter||(t.EvGutter={})).Width="gutter.WidthChanged",(s=t.EvSearchUi||(t.EvSearchUi={})).Open="search.Open",s.Close="search.CLose",(i=t.EvKey||(t.EvKey={})).CtrlDown="key.Ctrl.down",i.CtrlUp="key.Ctrl.up",i.ShiftDown="key.Shift.down",i.ShiftUp="key.Shift.up",i.AltDown="key.Alt.down",i.AltUp="key.Alt.up"},8637:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorView=void 0;const n=s(i(2248));t.EditorView=n.default},1556:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME=t.Theme=t.BASE_THEME_CLASS=t.VALID_THEMES=void 0,t.VALID_THEMES=["default","light","dark"],t.BASE_THEME_CLASS="nc-theme--",(i=t.Theme||(t.Theme={})).Default="default",i.Light="light",i.Dark="dark",t.DEFAULT_THEME="default"},8593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomId=t.randomString=t.notEmpty=void 0;const i=[];function s(e=6){let t="";const i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<e;s++)t+=i[Math.floor(Math.random()*i.length)];return t}t.notEmpty=function(e){return null!=e},t.randomString=s,t.randomId=function(e=6){let t="";do{t=s(e)}while(i.includes(t));return i.push(t),t}}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0;var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=e.EditorView=e.Editor=e.Range=e.Document=void 0;const t=i(1117);Object.defineProperty(e,"Document",{enumerable:!0,get:function(){return t.Document}});const n=i(6729);Object.defineProperty(e,"Range",{enumerable:!0,get:function(){return n.Range}}),Object.defineProperty(e,"Selection",{enumerable:!0,get:function(){return n.Selection}});const o=i(7708);Object.defineProperty(e,"Editor",{enumerable:!0,get:function(){return o.Editor}});const r=i(8637);Object.defineProperty(e,"EditorView",{enumerable:!0,get:function(){return r.EditorView}}),i(2545)})(),nc=s})();