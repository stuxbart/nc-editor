var nc;(()=>{"use strict";var t={57:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(81),s=i.n(n),o=i(645),r=i.n(o)()(s());r.push([t.id,'*{margin:0;padding:0;box-sizing:border-box}@keyframes cursor-anim{0%{opacity:.7}100%{opacity:0}}.nc-editor{position:relative;display:grid;height:100%;max-height:100%;width:100%;max-width:100%}.nc-editor__text{position:relative;width:100%;height:100%;overflow:hidden;background-color:#242424;user-select:none}.nc-editor__gutter{height:100%;width:100%;border-right:1px solid #949494;background-color:#242424;color:#a7a7a7;max-height:100%;overflow:hidden;user-select:none}.nc-editor__scroll-bar{overflow-y:scroll;overflow-x:hidden;background-color:#242424}.nc-editor__selection{overflow:hidden;cursor:text}.nc-editortext__wrapper{position:relative;width:100%}.nc-editor__input{position:absolute;height:0px;width:0px;opacity:0;user-select:none;max-height:0px}.nc-scroll__scrollable{width:10px;content:"x"}.nc-selection__cursor{position:absolute;padding:0;margin:2px 0px;width:2px;height:18px;z-index:1;left:0;top:1px;opacity:1;background-color:#fff;pointer-events:none;user-select:none}.nc-selection__cursor--animated{animation-name:cursor-anim;animation-duration:1.2s;animation-iteration-count:infinite;animation-timing-function:steps(2, jump-none)}.nc-selection__range{position:absolute;padding:0;margin:0px;pointer-events:none;user-select:none;background-color:rgba(50,148,240,.2)}.nc-text__multi-line{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:0em 0em 0em 1em;margin:0;max-width:100%;background-color:#242424;cursor:text;color:#fff;white-space:pre}.nc-gutter__number{display:flex;justify-content:center;align-items:center}.nc-text__multi-line--hover{background-color:#2b2b2b}.nc-text__multi-line--active{background-color:#313131}.nc-format__word,.nc-format__bracket,.nc-format__square-bracket,.nc-format__brace,.nc-format__comment,.nc-format__keyword,.nc-format__space,.nc-format__string,.nc-format__semicolon,.nc-format__colon,.nc-format__comma,.nc-format__dot,.nc-format__number,.nc-format__declartion,.nc-format__type{white-space:pre}.nc-format__word{color:#88c4fd}.nc-format__bracket{color:#074ccc}.nc-format__square-bracket{color:#c527ca}.nc-format__brace{color:#bc06f3}.nc-format__comment{color:#008b07}.nc-format__keyword{color:#ac31d1}.nc-format__string{color:#ca4a18}.nc-format__semicolon,.nc-format__colon{color:#f0f0f0}.nc-format__operator{color:#f0f0f0}.nc-format__comma,.nc-format__dot{color:#f0f0f0}.nc-format__number{color:#3abd7f}.nc-format__declaration{color:#396cca}.nc-format__type{color:#22ad78}',""]);const l=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(n)for(var l=0;l<this.length;l++){var h=this[l][0];null!=h&&(r[h]=!0)}for(var a=0;a<t.length;a++){var _=[].concat(t[a]);n&&r[_[0]]||(void 0!==o&&(void 0===_[5]||(_[1]="@layer".concat(_[5].length>0?" ".concat(_[5]):""," {").concat(_[1],"}")),_[5]=o),i&&(_[2]?(_[1]="@media ".concat(_[2]," {").concat(_[1],"}"),_[2]=i):_[2]=i),s&&(_[4]?(_[1]="@supports (".concat(_[4],") {").concat(_[1],"}"),_[4]=s):_[4]="".concat(s)),e.push(_))}},e}},81:t=>{t.exports=function(t){return t[1]}},187:t=>{var e,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(i,n){function s(i){t.removeListener(e,o),n(i)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",s),i([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&m(t,"error",e,{once:!0})}(t,s)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function a(t,e,i,n){var s,o,r,a;if(l(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),r=o[e]),void 0===r)r=o[e]=i,++t._eventsCount;else if("function"==typeof r?r=o[e]=n?[i,r]:[r,i]:n?r.unshift(i):r.push(i),(s=h(t))>0&&r.length>s&&!r.warned){r.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=t,_.type=e,_.count=r.length,a=_,console&&console.warn&&console.warn(a)}return t}function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=_.bind(n);return s.listener=i,n.wrapFn=s,s}function u(t,e,i){var n=t._events;if(void 0===n)return[];var s=n[e];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(s):f(s,s.length)}function d(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function m(t,e,i,n){if("function"==typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function s(o){n.once&&t.removeEventListener(e,s),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,o=this._events;if(void 0!==o)s=s&&void 0===o.error;else if(!s)return!1;if(s){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var l=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw l.context=r,l}var h=o[t];if(void 0===h)return!1;if("function"==typeof h)n(h,this,e);else{var a=h.length,_=f(h,a);for(i=0;i<a;++i)n(_[i],this,e)}return!0},o.prototype.addListener=function(t,e){return a(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return a(this,t,e,!0)},o.prototype.once=function(t,e){return l(e),this.on(t,c(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,c(this,t,e)),this},o.prototype.removeListener=function(t,e){var i,n,s,o,r;if(l(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){r=i[o].listener,s=o;break}if(s<0)return this;0===s?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,s),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,r||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var s,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(s=o[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return u(this,t,!0)},o.prototype.rawListeners=function(t){return u(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},545:(t,e,i)=>{i.r(e),i.d(e,{default:()=>v});var n=i(379),s=i.n(n),o=i(795),r=i.n(o),l=i(569),h=i.n(l),a=i(565),_=i.n(a),c=i(216),u=i.n(c),d=i(589),f=i.n(d),m=i(57),p={};p.styleTagTransform=f(),p.setAttributes=_(),p.insert=h().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=u(),s()(m.Z,p);const v=m.Z&&m.Z.locals?m.Z.locals:void 0},379:t=>{var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var o={},r=[],l=0;l<t.length;l++){var h=t[l],a=n.base?h[0]+n.base:h[0],_=o[a]||0,c="".concat(a," ").concat(_);o[a]=_+1;var u=i(c),d={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==u)e[u].references++,e[u].updater(d);else{var f=s(d,n);n.byIndex=l,e.splice(l,0,{identifier:c,updater:f,references:1})}r.push(c)}return r}function s(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var o=n(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var l=i(o[r]);e[l].references--}for(var h=n(t,s),a=0;a<o.length;a++){var _=i(o[a]);0===e[_].references&&(e[_].updater(),e.splice(_,1))}o=h}}},569:t=>{var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},824:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t=""){this.left=null,this.right=null,this.parent=null,this.text="",this.leftSubTreeSize=0,this.height=1,this.text=t}}},907:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(824)),o=i(90);e.default=class{constructor(t){this._rootNode=null,this._linesCount=0,this.insert(t,0,0)}insert(t,e,i){if(0===t.length&&null!==this._rootNode)return[0,0];if(null===this._rootNode){const t=new s.default("");this._rootNode=this._insertLine(this._rootNode,t,0)}const n=this._getNodeByLineNumber(this._rootNode,e);if(null===n)return[0,0];const o=t.split("\n");if(1===o.length)n.text=n.text.slice(0,i)+t+n.text.slice(i);else{const t=n.text.slice(i);n.text=n.text.slice(0,i)+o[0];let r=null;for(let t=1;t<o.length;t++){const i=o[t];r=new s.default(i),this._rootNode=this._insertLine(this._rootNode,r,e+t)}null!==r&&(r.text+=t)}return[o.length-1,o[o.length-1].length]}remove(t){const e=this._getNodeByLineNumber(this._rootNode,t.start.line);if(null===e)return"";if(t.start.line===t.end.line){const i=e.text.slice(t.start.offset,t.end.offset);return e.text=e.text.slice(0,t.start.offset)+e.text.slice(t.end.offset),i}let i=e.text.slice(t.start.offset);e.text=e.text.slice(0,t.start.offset);const n=t.end.line-t.start.line-1;for(let e=0;e<n;e++){const e=this._getNodeByLineNumber(this._rootNode,t.start.line+1);if(null===e)return i;i+="\n"+e.text,this._rootNode=this._removeLine(this._rootNode,t.start.line+1)}const s=this._getNodeByLineNumber(this._rootNode,t.start.line+1);return null===s||(i+="\n"+s.text.slice(0,t.end.offset),e.text+=s.text.slice(t.end.offset),this._rootNode=this._removeLine(this._rootNode,t.start.line+1)),i}get linesCount(){return this._linesCount}get text(){return this._getNodeText(this._rootNode)}getText(){return this._getNodeText(this._rootNode)}getLines(t,e){const i=[];return this._getLines(this._rootNode,t,e,i),i}getLineNodes(t,e){const i=[];let n=this._getNodeByLineNumber(this._rootNode,t);for(;null!==n&&i.length<e;)i.push(n),n=this._getNextLine(n);return i}getLineNode(t){return this._getNodeByLineNumber(this._rootNode,t)}getLine(t){var e,i;return null!==(i=null===(e=this._getNodeByLineNumber(this._rootNode,t))||void 0===e?void 0:e.text)&&void 0!==i?i:""}getFirstLine(){var t,e;return null!==(e=null===(t=this._getFirstLine(this._rootNode))||void 0===t?void 0:t.text)&&void 0!==e?e:""}getLastLine(){var t,e;return null!==(e=null===(t=this._getLastLine(this._rootNode))||void 0===t?void 0:t.text)&&void 0!==e?e:""}getFirstLineNode(){return this._getFirstLine(this._rootNode)}getLastLineNode(){return this._getLastLine(this._rootNode)}removeLine(t){this._rootNode=this._removeLine(this._rootNode,t)}insertLineAfter(t,e){const i=new s.default(t);this._rootNode=this._insertLine(this._rootNode,i,e+1)}insertLineBefore(t,e){const i=new s.default(t);this._rootNode=this._insertLine(this._rootNode,i,e)}swapLineWithNext(t){const e=this._getNodeByLineNumber(this._rootNode,t);if(null===e)return;const i=this._getNextLine(e);if(null===i)return;const n=i.text;i.text=e.text,e.text=n}swapLineWithPrevious(t){return this.swapLineWithNext(t-1)}_removeLine(t,e){var i,n;if(null===t)return t;if(e<t.leftSubTreeSize)t.left=this._removeLine(t.left,e),t.leftSubTreeSize-=1;else if(e>t.leftSubTreeSize)t.right=this._removeLine(t.right,e-t.leftSubTreeSize-1);else if(null===t.left||null===t.right){let e=null;e=e===t.left?t.right:t.left,null===e?(e=t,t=null):(e.parent=t.parent,t=e),this._linesCount-=1}else{const e=this._getFirstLine(t.right);t.text=null!==(i=null==e?void 0:e.text)&&void 0!==i?i:"",t.right=this._removeLine(t.right,null!==(n=null==e?void 0:e.leftSubTreeSize)&&void 0!==n?n:0)}if(null===t)return t;t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1;const s=this._getBalanceFactor(t);return s>1&&this._getBalanceFactor(t.left)>=0?this._rotateRight(t):s>1&&this._getBalanceFactor(t.left)<0?(t.left&&(t.left=this._rotateLeft(t.left)),this._rotateRight(t)):s<-1&&this._getBalanceFactor(t.right)<=0?this._rotateLeft(t):s<-1&&this._getBalanceFactor(t.right)>0?(t.right&&(t.right=this._rotateRight(t.right)),this._rotateLeft(t)):t}_getLines(t,e,i,n){if(null===t)return;let s=this._getNodeByLineNumber(t,e);for(;null!==s&&n.length<i;)n.push(s.text),s=this._getNextLine(s)}_getNextLine(t){if(null!=t.right)return this._getFirstLine(t.right);let e=t.parent;for(;null!==e&&t===e.right;)t=e,e=e.parent;return e}_getFirstLine(t){if(null===t)return null;let e=t;for(;null!==e.left;)e=e.left;return e}_getLastLine(t){if(null===t)return null;let e=t;for(;null!=e.right;)e=e.right;return e}_getNodeByLineNumber(t,e){return null===t||e===t.leftSubTreeSize?t:e<t.leftSubTreeSize?this._getNodeByLineNumber(t.left,e):this._getNodeByLineNumber(t.right,e-t.leftSubTreeSize-1)}_getNodeText(t){if(null===t)return"";let e="";return null!==t.left&&(e+=this._getNodeText(t.left)+"\n"),e+=t.text,null!==t.right&&(e+="\n"+this._getNodeText(t.right)),e}_insertLine(t,e,i){var n,s,r,l;if(null===t)return this._linesCount+=1,e;i<=t.leftSubTreeSize?(t.left=this._insertLine(t.left,e,i),t.left.parent=t,t.leftSubTreeSize+=1):(t.right=this._insertLine(t.right,e,i-t.leftSubTreeSize-1),t.right.parent=t),t.height=1+Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right));const h=this._getBalanceFactor(t);return h>1&&i<(null!==(s=null===(n=t.left)||void 0===n?void 0:n.leftSubTreeSize)&&void 0!==s?s:0)?this._rotateRight(t):h<-1&&i-t.leftSubTreeSize-1>(null!==(l=null===(r=t.right)||void 0===r?void 0:r.leftSubTreeSize)&&void 0!==l?l:0)?this._rotateLeft(t):h>1&&t.left&&i>t.left.leftSubTreeSize?(t.left=this._rotateLeft(t.left),this._rotateRight(t)):h<-1&&t.right&&i-t.leftSubTreeSize-1<t.right.leftSubTreeSize?(t.right=this._rotateRight(t.right),this._rotateLeft(t)):t}_getBalanceFactor(t){return null===t?0:(0,o.nodeHeight)(t.left)-(0,o.nodeHeight)(t.right)}_rotateLeft(t){const e=t.right;if(null===e)return t;const i=e.left;return e.left=t,t.right=i,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,e.leftSubTreeSize=e.leftSubTreeSize+t.leftSubTreeSize+1,e.parent=t.parent,t.parent=e,null!==i&&(i.parent=t),e}_rotateRight(t){const e=t.left;if(null===e)return t;const i=e.right;return e.right=t,t.left=i,t.height=Math.max((0,o.nodeHeight)(t.left),(0,o.nodeHeight)(t.right))+1,e.height=Math.max((0,o.nodeHeight)(e.left),(0,o.nodeHeight)(e.right))+1,t.leftSubTreeSize=t.leftSubTreeSize-e.leftSubTreeSize-1,e.parent=t.parent,t.parent=e,null!==i&&(i.parent=t),e}}},117:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Line=e.Document=void 0;const s=n(i(907));e.Document=s.default;const o=n(i(313));e.Line=o.default},313:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,i){this.rawText="",this.tokens=[],this.lineBreaks=[],this.rawText=t,this.tokens=e,this.lineBreaks=i}}},90:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.nodeHeight=void 0,e.nodeHeight=t=>null===t?0:t.height},144:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(117),o=n(i(907)),r=i(183),l=i(729),h=n(i(700)),a=i(924),_=i(414),c=i(528),u=i(781);class d extends r.EventEmitter{constructor(){super(),this._document=null,this._tokenizeAfterEdit=!0,this._shouldEmitEditEvent=!0,this._shouldEmitLinesCountChangeEvent=!0,this._shouldUpdateSelections=!0,this._views=[];const t=new o.default("");this._document=t,this._selections=new h.default(this._document),this._tokenizer=new _.Tokenizer(this._document,!1)}insert(t){if(null===this._document)return;const e=this._selections.getSelections();for(const t of e){if(t.isCollapsed)continue;const e=this._document.remove(t).split("\n");this._updateLinesTokens(t.start.line,2),this._emitLinesCountChanged(t.end.line-t.start.line),this._updateSelctions(t.start.line,t.start.offset,1-e.length,-(t.end.offset-t.start.offset))}for(const i of e){const e=i.start.line,n=i.start.offset,s=this._document.insert(t,e,n);this._updateLinesTokens(e,s[0]+1),this._updateSelctions(e,n,s[0],s[1])}this._emitLinesCountChanged(1),this._emitEditEvent()}remove(t=0){if(null===this._document)return;const e=this._selections.getSelections();for(const i of e){if(i.isCollapsed){if(0===i.start.offset&&0===t){if(0===i.start.line)continue;{i.start.line-=1;const t=this._document.getLine(i.start.line);i.start.offset=t.length+1}}if(1===t){const t=this._document.getLine(i.start.line);i.end.offset===t.length&&i.end.line+1!==this._document.linesCount?(i.end.offset=0,i.end.line+=1):i.end.offset=i.end.offset+1}else i.start.offset=i.start.offset-1}const e=this._document.remove(i).split("\n");this._updateLinesTokens(i.start.line,2),this._emitLinesCountChanged(i.end.line-i.start.line),this._updateSelctions(i.start.line,i.start.offset,1-e.length,-(i.end.offset-i.start.offset))}this._emitEditEvent()}removeWordBefore(){if(1!==this._selections.length||null===this._document)return;const t=this._selections.getSelections()[0];if(!t.isCollapsed)return this.remove();const e=this._document.getLine(t.start.line),i=(0,a.getWordBefore)(e,t.start.offset);return t.start.offset-=i.length,this.remove()}removeWordAfter(){if(1!==this._selections.length||null===this._document)return;const t=this._selections.getSelections()[0];if(!t.isCollapsed)return this.remove();const e=this._document.getLine(t.start.line),i=(0,a.getWordAfter)(e,t.start.offset);return t.end.offset+=i.length,this.remove()}setDocument(t){this._document=t,this._tokenizeAfterEdit&&this.tokenize(),this._selections=new h.default(this._document),this.emit(u.EvDocument.Set,void 0),this._emitLinesCountChanged(1/0)}getText(){var t,e;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.getText())&&void 0!==e?e:""}getTotalLinesCount(){var t,e;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.linesCount)&&void 0!==e?e:0}getLines(t,e){if(null===this._document)return[];const i=this._document.getLineNodes(t,e),n=[];for(const t of i)n.push({rawText:t.text,tokens:this._tokenizer.getTokensForLine(t),lineBreaks:[]});return n}getFirstLine(){if(null===this._document)return null;const t=this._document.getFirstLineNode();return null===t?null:new s.Line(t.text,this._tokenizer.getTokensForLine(t),[])}getLastLine(){if(null===this._document)return null;const t=this._document.getLastLineNode();return null===t?null:new s.Line(t.text,this._tokenizer.getTokensForLine(t),[])}tokenize(){null!==this._document&&(this._tokenizer.setDocument(this._document),this._tokenizer.makeTokens(),this.emit(u.EvTokenizer.Finished,void 0))}getSelctions(){return this._selections.getSelections()}setSelection(t){this._selections.setSelection(t),this._emitSelectionChangedEvent()}addSelection(t){this._selections.addSelection(t),this._emitSelectionChangedEvent()}extendLastSelection(t){this._selections.extendLastSelection(t),this._emitSelectionChangedEvent()}selectAll(){this._selections.selectAll(),this._emitSelectionChangedEvent()}collapseSelectionToLeft(){this._selections.collapseSelectionToLeft(),this._emitSelectionChangedEvent()}collapseSelectionToRight(){this._selections.collapseSelectionToRight(),this._emitSelectionChangedEvent()}collapseSelectionToTop(){this._selections.collapseSelectionToTop(),this._emitSelectionChangedEvent()}collapseSelectionToBottom(){this._selections.collapseSelectionToBottom(),this._emitSelectionChangedEvent()}selectWordBefore(){this._selections.selectWordBefore(),this._emitSelectionChangedEvent()}selectWordAfter(){this._selections.selectWordAfter(),this._emitSelectionChangedEvent()}selectWordAt(t,e){this._selections.selectWordAt(t,e),this._emitSelectionChangedEvent()}moveSelectionWordBefore(){this._selections.moveSelectionWordBefore(),this._emitSelectionChangedEvent()}moveSelectionWordAfter(){this._selections.moveSelectionWordAfter(),this._emitSelectionChangedEvent()}swapLinesUp(){if(null===this._document||1!==this._selections.length)return;const t=this._selections.getSelections()[0];if(0===t.start.line)return;let e=t.start.line;for(;e<t.end.line+1;)this._document.swapLineWithPrevious(e),e++;this._updateLinesTokens(t.start.line-1,t.end.line-t.start.line+2),t.start.line-=1,t.end.line-=1,this._emitSelectionChangedEvent(),this._emitEditEvent()}swapLinesDown(){if(null===this._document||1!==this._selections.length)return;const t=this._selections.getSelections()[0];if(t.end.line===this._document.linesCount-1)return;let e=t.end.line;for(;e>t.start.line-1;)this._document.swapLineWithNext(e),e--;this._updateLinesTokens(t.start.line-1,t.end.line-t.start.line+3),t.start.line+=1,t.end.line+=1,this._emitSelectionChangedEvent(),this._emitEditEvent()}addView(t){this._views.push(t),t.on(c.EvView.Initialized,(()=>{this._emitInitEvents()}))}enableTokenization(){this._tokenizeAfterEdit=!0}disableTokenization(){this._tokenizeAfterEdit=!1}enableEditEvent(){this._shouldEmitEditEvent=!0}disableEditEvent(){this._shouldEmitEditEvent=!1}enableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!0}disableLinesChangedEvent(){this._shouldEmitLinesCountChangeEvent=!1}enableSelectionsUpdates(){this._selections.enableUpdatingSelections(),this._shouldUpdateSelections=!0}disableSelectionsUpdates(){this._selections.disableUpdatingSelections(),this._shouldUpdateSelections=!1}getActiveLinesNumbers(){return this._selections.getActiveLinesNumbers()}getSelectedLinesCount(){return this._selections.getSelectedLinesCount()}indentSelectedLines(t="\t"){if(null===this._document)return;const e=this._selections.getActiveLinesNumbers();if(!(e.size<2)){for(const i of e)this._document.insert(t,i,0),this._updateLinesTokens(i,2),this._updateSelctions(i,0,0,1);this._emitEditEvent()}}removeIndentFromSelectedLines(t="\t"){if(null===this._document)return;const e=this._selections.getActiveLinesNumbers();for(const i of e)this._document.getLine(i).startsWith(t)&&(this._document.remove(new l.Range(i,0,i,t.length)),this._updateLinesTokens(i,2),this._updateSelctions(i,0,0,1));this._emitEditEvent()}_updateSelctions(t,e,i,n){this._selections.update(t,e,i,n),this._emitSelectionChangedEvent()}_updateLinesTokens(t,e){this._tokenizeAfterEdit&&this._tokenizer.updateLinesTokens(t,e)}_emitEditEvent(){this._shouldEmitEditEvent&&this.emit(u.EvDocument.Edited,void 0)}_emitLinesCountChanged(t){var e,i;this._shouldEmitLinesCountChangeEvent&&0!==t&&this.emit(u.EvDocument.LinesCount,{linesCount:null!==(i=null===(e=this._document)||void 0===e?void 0:e.linesCount)&&void 0!==i?i:0})}_emitSelectionChangedEvent(){this.emit(u.EvSelection.Changed,void 0)}_emitInitEvents(){var t,e;this.emit(u.EvSelection.Changed,void 0),this.emit(u.EvDocument.Set,void 0),this.emit(u.EvDocument.LinesCount,{linesCount:null!==(e=null===(t=this._document)||void 0===t?void 0:t.linesCount)&&void 0!==e?e:0}),this.emit(u.EvTokenizer.Finished,void 0)}}e.default=d},781:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.EvSelection=e.EvDocument=e.EvTokenizer=void 0,(e.EvTokenizer||(e.EvTokenizer={})).Finished="tokenizer.Tokenized",(i=e.EvDocument||(e.EvDocument={})).Set="editor.Document.Set",i.Edited="editor.Document.Edit",i.LinesCount="editor.Document.LinesCount",(e.EvSelection||(e.EvSelection={})).Changed="editor.Selection.Changed"},708:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;const s=n(i(144));e.Editor=s.default},957:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0;const n=i(187);e.EventEmitter=class{constructor(){this._emitter=new n.EventEmitter}on(t,e){this._emitter.on(t,e)}off(t,e){this._emitter.off(t,e)}emit(t,e){this._emitter.emit(t,e)}}},183:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0;const n=i(957);Object.defineProperty(e,"EventEmitter",{enumerable:!0,get:function(){return n.EventEmitter}})},729:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=e.Range=e.Point=void 0;const s=n(i(349));e.Point=s.default;const o=n(i(739));e.Range=o.default;const r=n(i(48));e.Selection=r.default},349:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.line=t,this.offset=e}}},739:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(349));e.default=class{constructor(t=0,e=0,i=0,n=0){this.start=new s.default(t,e),this.end=new s.default(i,n)}}},700:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(924),o=n(i(349)),r=n(i(48)),l=i(229);e.default=class{constructor(t=null){this._selections=[],this._document=null,this._shouldUpdateSelections=!0,this._document=t,this._selections=[new r.default(0,0,0,0)]}get length(){return this._selections.length}getSelections(){return this._selections}enableUpdatingSelections(){this._shouldUpdateSelections=!0}disableUpdatingSelections(){this._shouldUpdateSelections=!1}update(t,e,i,n){if(!this._shouldUpdateSelections)return;let s=0;s=i<0||n<0?0:1;const r=new o.default(t,e),h=new o.default(t-i,e-n);for(const e of this._selections)for(const o of[e.start,e.end])s?2!==(0,l.pointCompare)(o,r)&&(o.line===t&&(i?o.offset=o.offset-r.offset+n:o.offset+=n),o.line+=i):o.line>=r.line&&o.line<=h.line&&o.offset>=h.offset-1&&(1!==(0,l.pointCompare)(o,h)?(o.offset=r.offset,o.line=r.line):(o.line=r.line,o.offset=r.offset+o.offset-h.offset));this._removeOverlappingSelections()}setSelection(t){this._selections=[t]}addSelection(t){this._selections.push(t),this._removeOverlappingSelections()}extendLastSelection(t){0!==this._selections.length&&(this._selections[this._selections.length-1].updateSelection(t),this._removeOverlappingSelections())}selectAll(){const t=new r.default(0,0,0,0);if(this._document){const e=this._document.linesCount,i=this._document.getLastLine();t.end.line=e-1,t.end.offset=i.length}this._selections=[t]}selectWordAt(t,e=!1){if(null===this._document)return;const i=(0,s.removeAccents)(this._document.getLine(t.line)),n=(0,s.getWordBefore)(i,t.offset),o=(0,s.getWordAfter)(i,t.offset),l=new r.default(t.line,t.offset-n.length,t.line,t.offset+o.length);e?this._selections.push(l):this._selections=[l],this._removeOverlappingSelections()}selectWordBefore(){if(1!==this._selections.length||null===this._document)return;const t=this._selections[0];if(0!==t.start.line||0!==t.start.offset){if(0===t.start.offset){t.start.line-=1;const e=(0,s.removeAccents)(this._document.getLine(t.start.line)),i=(0,s.getWordBefore)(e,e.length);t.start.offset=e.length-i.length}else{const e=(0,s.removeAccents)(this._document.getLine(t.start.line)),i=(0,s.getWordBefore)(e,t.start.offset);t.start.offset-=i.length}this._removeOverlappingSelections()}}selectWordAfter(){if(1!==this._selections.length||null===this._document)return;const t=this._selections[0],e=(0,s.removeAccents)(this._document.getLine(t.end.line));if(t.end.line!==this._document.linesCount-1||t.end.offset!==e.length){if(t.end.offset===e.length){t.end.line+=1;const e=(0,s.removeAccents)(this._document.getLine(t.end.line)),i=(0,s.getWordAfter)(e,0);t.end.offset=i.length}else{const i=(0,s.getWordAfter)(e,t.end.offset);t.end.offset+=i.length}this._removeOverlappingSelections()}}moveSelectionWordBefore(){if(null!==this._document){for(const t of this._selections)if(0!==t.start.line||0!==t.start.offset){if(0===t.start.offset){t.start.line-=1;const e=(0,s.removeAccents)(this._document.getLine(t.start.line));t.start.offset=e.length}else{const e=(0,s.removeAccents)(this._document.getLine(t.start.line)),i=(0,s.getWordBefore)(e,t.start.offset);t.start.offset-=i.length}t.end.offset=t.start.offset,t.end.line=t.start.line}this._removeOverlappingSelections()}}moveSelectionWordAfter(){if(null!==this._document){for(const t of this._selections){const e=(0,s.removeAccents)(this._document.getLine(t.end.line));if(t.end.line!==this._document.linesCount-1||t.end.offset!==e.length){if(t.end.offset===e.length)t.end.line+=1,t.end.offset=0;else{const i=(0,s.getWordAfter)(e,t.end.offset);t.end.offset+=i.length}t.start.offset=t.end.offset,t.start.line=t.end.line}}this._removeOverlappingSelections()}}collapseSelectionToLeft(){if(!(this._selections.length<1||null===this._document))for(const t of this._selections)if(t.isCollapsed){if(0===t.start.line&&0===t.start.offset)continue;if(t.start.offset-=1,t.end.offset-=1,t.start.offset<0){const e=t.start.line-1,i=this._document.getLine(e).length;t.start.line=e,t.end.line=e,t.start.offset=i,t.end.offset=i}}else t.end.line=t.start.line,t.end.offset=t.start.offset}collapseSelectionToRight(){if(this._selections.length<1||null===this._document)return;const t=this._document.linesCount-1,e=this._document.getLine(t).length;for(const i of this._selections)if(i.isCollapsed){if(i.start.line===t&&i.start.offset===e)continue;i.start.offset+=1,i.end.offset+=1;const n=this._document.getLine(i.start.line).length;if(i.start.offset>n){const t=i.start.line+1;i.start.line=t,i.end.line=t,i.start.offset=0,i.end.offset=0}}else i.start.line=i.end.line,i.start.offset=i.end.offset}collapseSelectionToTop(){if(!(this._selections.length<1||null===this._document))for(const t of this._selections){if(0===t.start.line){t.start.offset=0,t.end.offset=0,t.end.line=0;continue}const e=t.start.line-1,i=this._document.getLine(e).length,n=i<t.start.offset?i:t.start.offset;t.start.offset=n,t.end.offset=n,t.start.line=e,t.end.line=e}}collapseSelectionToBottom(){if(this._selections.length<1||null===this._document)return;const t=this._document.linesCount-1,e=this._document.getLine(t).length;for(const i of this._selections){if(i.end.line===t){i.start.offset=e,i.end.offset=e,i.start.line=t;continue}const n=i.start.line+1,s=this._document.getLine(n).length,o=s<i.end.offset?s:i.end.offset;i.start.offset=o,i.end.offset=o,i.start.line=n,i.end.line=n}}getActiveLinesNumbers(){if(null===this._document||0===this._selections.length)return new Set;const t=new Set;for(const e of this._selections)for(let i=e.start.line;i<e.end.line+1;i++)t.add(i);return t}getSelectedLinesCount(){return this.getActiveLinesNumbers().size}_removeOverlappingSelections(){if(null===this._document||this._selections.length<2)return;const t=[];for(let e=0;e<this._selections.length;e++){const i=this._selections[e];for(let n=e+1;n<this._selections.length;n++){const s=this._selections[n];i.overlaps(s)&&t.push(e)}}let e=0;for(const i of t)this._selections.splice(i-e,1),e++}}},48:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionType=void 0;const s=n(i(739)),o=i(229);var r;!function(t){t[t.N=0]="N",t[t.L=1]="L",t[t.R=2]="R"}(r=e.SelectionType||(e.SelectionType={}));class l extends s.default{constructor(){super(...arguments),this.type=r.N}get isCollapsed(){return(0,o.samePoint)(this.start,this.end)}updateSelection(t){this.type===r.L?1===(0,o.pointCompare)(this.end,t)?this.start=t:(this.type=r.R,this.start=this.end,this.end=t):this.type===r.R?2===(0,o.pointCompare)(this.start,t)?this.end=t:(this.type=r.L,this.end=this.start,this.start=t):2===(0,o.pointCompare)(this.start,t)?(this.type=r.R,this.end=t):(this.type=r.L,this.start=t)}toString(){return`{start: {l: ${this.start.line}, o:${this.start.offset}}, end: {l: ${this.end.line}, o:${this.end.offset}}}`}overlaps(t){return this.isCollapsed?2!==(0,o.pointCompare)(this.start,t.start)&&1!==(0,o.pointCompare)(this.start,t.end):2!==(0,o.pointCompare)(t.start,this.start)&&1!==(0,o.pointCompare)(t.start,this.end)||2!==(0,o.pointCompare)(t.end,this.start)&&1!==(0,o.pointCompare)(t.end,this.end)}}e.default=l},229:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pointCompare=e.samePoint=void 0,e.samePoint=(t,e)=>t.line===e.line&&t.offset===e.offset,e.pointCompare=(t,e)=>t.line===e.line?t.offset<e.offset?2:t.offset===e.offset?0:1:t.line<e.line?2:1},924:(t,e)=>{function i(t){return" "===t||"\t"===t}function n(t){return/[_a-zA-Z]/.test(t)}function s(t){return/^[0-9]+$/i.test(t)}function o(t,e){return h(t,e,i)}function r(t,e){return h(t,e,n)}function l(t,e){return h(t,e,s)}function h(t,e,i){let n=e-1,s=t[n];for(;n>-1&&i(s);)n--,s=t[n];return e-n-1}function a(t,e){return u(t,e,i)}function _(t,e){return u(t,e,n)}function c(t,e){return u(t,e,s)}function u(t,e,i){let n=e,s=t[n];for(;n<t.length&&i(s);)n++,s=t[n];return n-e}Object.defineProperty(e,"__esModule",{value:!0}),e.readAfterUntil=e.readNumberAfter=e.readWordAfter=e.readWhiteSpaceAfter=e.readBeforeUntil=e.readNumberBefore=e.readWordBefore=e.readWhiteSpaceBefore=e.isAlphaNumeric=e.isNumeric=e.isAlpha=e.isWhiteSpaceChar=e.getWordAfter=e.getWordBefore=e.offsetToColumn=e.columnToOffset=e.removeAccents=void 0,e.removeAccents=function(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/Å‚/g,"l")},e.columnToOffset=function(t,e,i=8){let n=0,s=0;for(;n<t.length&&e>0;)if("\t"===t[n++]){const t=s%i;e-=i-t,s+=i-t}else e-=1,s+=1;return e>0?t.length:e<-i/2?n-1:n},e.offsetToColumn=function(t,e,i=8){let n=0;for(let s=0;s<e;s++)"\t"===t[s]?n+=i-n%i:n+=1;return n},e.getWordBefore=function(t,e){if(e>t.length&&(e=t.length),e<0)return"";const h=t[e-1];if(i(h)){const i=o(t,e);return t.substring(e-i,e)}if(n(h)){const i=r(t,e);return t.substring(e-i,e)}if(s(h)){const i=l(t,e);return t.substring(e-i,e)}return t.substring(e-1,e)},e.getWordAfter=function(t,e){if(e>t.length)return"";e<0&&(e=0);const o=t[e];if(i(o)){const i=a(t,e);return t.substring(e,e+i)}if(n(o)){const i=_(t,e);return t.substring(e,e+i)}if(s(o)){const i=c(t,e);return t.substring(e,e+i)}return t.substring(e,e+1)},e.isWhiteSpaceChar=i,e.isAlpha=n,e.isNumeric=s,e.isAlphaNumeric=function(t){return/^[_a-zA-Z0-9]+$/i.test(t)},e.readWhiteSpaceBefore=o,e.readWordBefore=r,e.readNumberBefore=l,e.readBeforeUntil=h,e.readWhiteSpaceAfter=a,e.readWordAfter=_,e.readNumberAfter=c,e.readAfterUntil=u},414:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;const s=n(i(42));e.Tokenizer=s.default},951:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0,(i=e.TokenType||(e.TokenType={}))[i.BOOLEAN=0]="BOOLEAN",i.OPERATOR="nc-format__operator",i.ARROW="nc-format__arrow",i.COMMENT="nc-format__comment",i.COMMA="nc-format__comma",i.DOT="nc-format__dot",i.COLON="nc-format__colon",i.SEMICOLON="nc-format__semicolon",i.IDENTIFIER="nc-format__word",i.OPEN_BRACE="nc-format__brace",i.CLOSE_BRACE="nc-format__brace",i.OPEN_BRACKET="nc-format__bracket",i.CLOSE_BRACKET="nc-format__bracket",i.OPEN_SQUARE_BRACKET="nc-format__bracket",i.CLOSE_SQUARE_BRACKET="nc-format__bracket",i.NUMBER="nc-format__number",i.STRING_LITERAL="nc-format__string",i.UNKNOWN="nc-format__unknown",i.KEYWORD="nc-format__keyword",i.TYPE="nc-format__type",i.DEC_KEYWORD="nc-format__declaration",i.WHITE_SPACE="nc-format__space"},42:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(924),s=i(951);e.default=class{constructor(t,e=!1){this.KEYWORDS=["import","from","export","default","constructor","return","while","for","if","switch","default","case","break","extends","implements","of","in","function"],this.DEC_KEYWORDS=["let","const","var","type","interface","class"],this._doc=null,this._data=new WeakMap,this._doc=t,e&&this.makeTokens()}setDocument(t){this._doc=t}makeTokens(){if(null===this._doc)return;this._data=new WeakMap;let t=this._doc.getFirstLineNode(),e=1;for(;null!==t;){const i=this.tokenize(t);this._data.set(t,i),t=this._doc.getLineNode(e),e++}}updateLinesTokens(t,e){if(null===this._doc)return;let i=this._doc.getLineNode(t),n=0;for(;null!==i&&n<e;){const e=this.tokenize(i);this._data.set(i,e),i=this._doc.getLineNode(t+n+1),n++}}updateLineTokes(t){if(null===this._doc)return;const e=this._doc.getLineNode(t);if(null===e)return;const i=this.tokenize(e);this._data.set(e,i)}tokenize(t){if(null===t)return[];if(0===t.text.length)return[];const e=[],i=(0,n.removeAccents)(t.text);let o=0;for(;o<i.length;){const t=o;for(;o<i.length&&this._isWhiteSpaceChar(i[o]);)o++;if(o!=t&&e.push({type:s.TokenType.WHITE_SPACE,startIndex:t}),o===i.length)break;switch(i[o]){case"(":e.push({type:s.TokenType.OPEN_BRACKET,startIndex:o}),o++;break;case")":e.push({type:s.TokenType.CLOSE_BRACKET,startIndex:o}),o++;break;case"{":e.push({type:s.TokenType.OPEN_BRACE,startIndex:o}),o++;break;case"}":e.push({type:s.TokenType.CLOSE_BRACE,startIndex:o}),o++;break;case"[":e.push({type:s.TokenType.OPEN_SQUARE_BRACKET,startIndex:o}),o++;break;case"]":e.push({type:s.TokenType.CLOSE_SQUARE_BRACKET,startIndex:o}),o++;break;case":":e.push({type:s.TokenType.COLON,startIndex:o}),o++;break;case";":e.push({type:s.TokenType.SEMICOLON,startIndex:o}),o++;break;case".":e.push({type:s.TokenType.DOT,startIndex:o}),o++;break;case",":e.push({type:s.TokenType.COMMA,startIndex:o}),o++;break;case"+":case"-":case"*":case"=":case"!":case"&":case"|":case"<":case">":case"?":e.push({type:s.TokenType.OPERATOR,startIndex:o}),o++;break;case"/":if(o+1<i.length&&"/"===i[o+1])return e.push({type:s.TokenType.COMMENT,startIndex:o}),e;e.push({type:s.TokenType.OPERATOR,startIndex:o}),o++;break;case"'":{const t=o;for(o++;o<i.length&&"'"!==i[o];)o++;e.push({type:s.TokenType.STRING_LITERAL,startIndex:t}),o++;break}case'"':{const t=o;for(o++;o<i.length&&'"'!==i[o];)o++;e.push({type:s.TokenType.STRING_LITERAL,startIndex:t}),o++;break}default:{let t="";if(this._isAlpha(i[o])){const n=o;for(;o<i.length&&this._isAlphaNumeric(i[o]);)t+=i[o],o++;this._isKeyword(t)?e.push({type:s.TokenType.KEYWORD,startIndex:n}):this._isDecKeyword(t)?e.push({type:s.TokenType.DEC_KEYWORD,startIndex:n}):e.push({type:s.TokenType.IDENTIFIER,startIndex:n})}else if(this._isNumeric(i[o]))for(e.push({type:s.TokenType.NUMBER,startIndex:o});this._isNumeric(i[++o]););else e.push({type:s.TokenType.UNKNOWN,startIndex:o}),o++}}}return e}_isWhiteSpaceChar(t){return" "===t||"\t"===t}_isAlpha(t){return/[_a-zA-Z]/.test(t)}_isNumeric(t){return/^[0-9]+$/i.test(t)}_isAlphaNumeric(t){return/^[_a-zA-Z0-9]+$/i.test(t)}_isKeyword(t){if(1===t.length)return!1;for(const e of this.KEYWORDS)if(e.includes(t)&&e.length===t.length)return!0;return!1}_isDecKeyword(t){if(1===t.length)return!1;for(const e of this.DEC_KEYWORDS)if(e.includes(t)&&e.length===t.length)return!0;return!1}getTokensForLine(t){var e;return this._data.has(t)&&null!==(e=this._data.get(t))&&void 0!==e?e:[]}}},914:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=e.EDITOR_SELECTION_CSS_CLASS=e.EDITOR_SELECTION_RANGE_CSS_CLASS=e.EDITOR_MULTI_LINE_CONTENT_CSS_CLASS=e.EDITOR_MULTI_LINE_HOVERED_CSS_CLASS=e.EDITOR_MULTI_LINE_ACTIVE_CSS_CLASS=e.EDITOR_MULTI_LINE_CSS_CLASS=e.EDITOR_CURSOR_ANIMATED_CSS_CLASS=e.EDITOR_CURSOR_CSS_CLASS=e.EDITOR_FONT_FAMILY=e.EDITOR_INPUT_ID=e.EDITOR_INPUT_CLASS=void 0,e.EDITOR_INPUT_CLASS="nc-editor__input",e.EDITOR_INPUT_ID="editor-input",e.EDITOR_FONT_FAMILY="ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace",e.EDITOR_CURSOR_CSS_CLASS="nc-selection__cursor",e.EDITOR_CURSOR_ANIMATED_CSS_CLASS="nc-selection__cursor--animated",e.EDITOR_MULTI_LINE_CSS_CLASS="nc-text__multi-line",e.EDITOR_MULTI_LINE_ACTIVE_CSS_CLASS="nc-text__multi-line--active",e.EDITOR_MULTI_LINE_HOVERED_CSS_CLASS="nc-text__multi-line--hovered",e.EDITOR_MULTI_LINE_CONTENT_CSS_CLASS="nc-text__multi-line_content",e.EDITOR_SELECTION_RANGE_CSS_CLASS="nc-selection__range",e.EDITOR_SELECTION_CSS_CLASS="nc-editor__selection",e.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE=1e6},555:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.px=e.isChildOf=e.createNodeFromTemplate=e.createDiv=e.createElement=e.createTextArea=void 0,e.createTextArea=(t="")=>{const i=(0,e.createElement)("textarea");return i.className=t,i},e.createElement=t=>document.createElement(t),e.createDiv=(t="")=>{const i=(0,e.createElement)("div");return i.className=t,i},e.createNodeFromTemplate=t=>{const i=(0,e.createElement)("template");return i.innerHTML=t,i.content.firstChild},e.isChildOf=(t,e)=>{let i=e;for(;i;){if(i===t)return!0;i=i.parentNode}return!1},e.px=t=>`${t}px`},164:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(183),o=i(555),r=n(i(209)),l=i(528),h=i(781),a=i(593);class _ extends s.EventEmitter{constructor(t,e){super(),this._editor=null,this._view=null,this._mountPoint=null,this._textContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._visibleLines=[],this._activeLineNumber=0,this._hoveredLineNumber=0,this._lineHeight=20,this._letterWidth=0,this._editor=t,this._view=e,this._mountPoint=e.getDOMElement(),this._createTextContainer(),this._initEventListeners(),this._measureLetterWidth()}_initEventListeners(){this._view&&this._view.on(l.EvScroll.Changed,(t=>{this.setFirstVisibleLine(t.firstVisibleLine),this.update()})),this._editor&&(this._editor.on(h.EvDocument.Edited,(()=>{this.update()})),this._editor.on(h.EvTokenizer.Finished,(()=>{this.update()})),this._editor.on(h.EvSelection.Changed,(()=>{this._updateActiveLines()})))}_createTextContainer(){null!==this._mountPoint&&(this._textContainer=(0,o.createDiv)("nc-editor__text"),this._mountPoint.appendChild(this._textContainer),this._textContainer.style.gridArea="1/2/2/3")}setFirstVisibleLine(t){this._firstVisibleLine=t}setVisibleLinesCount(t){this._visibleLinesCount=t}update(){this._renderLines()}measureLetterWidth(){return this._measureLetterWidth()}_updateActiveLines(){if(null===this._editor||null==this._textContainer)return;const t=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),e=this._editor.getActiveLinesNumbers();if(this._visibleLines.length!==t.length)return;let i=0;for(const t of this._visibleLines)t.setActive(e.has(this._firstVisibleLine+i)),i++}_measureLetterWidth(){if(null===this._textContainer)return;const t=(0,o.createDiv)("");t.style.padding="0",t.style.margin="0",t.style.width="fit-content",t.textContent="qwertyuiopASDFGHJKLX",this._textContainer.appendChild(t),this._letterWidth=t.offsetWidth/20,this._textContainer.removeChild(t),this.emit(l.EvFont.LetterWidth,{width:this._letterWidth})}_renderLines(){if(null===this._editor||null==this._textContainer)return;const t=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),e=this._editor.getActiveLinesNumbers();if(this._visibleLines.length===t.length){let i=0;for(const n of t)this._visibleLines[i].setData(n),this._visibleLines[i].setActive(e.has(this._firstVisibleLine+i)),i++}else{this._visibleLines=[];let i=0;for(const n of t)this._renderLine(this._visibleLines,n,this._firstVisibleLine+i),this._visibleLines[i].setActive(e.has(this._firstVisibleLine+i)),i++;const n=this._visibleLines.map((t=>t.getNode())).filter(a.notEmpty);this._textContainer.replaceChildren(...n)}}_renderLine(t,e,i){const n=new r.default(e,i===this._activeLineNumber);t.push(n)}}e.default=_},509:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(914),s=i(555);e.default=class{constructor(t,e){this._left=0,this._top=0,this._cursorElement=null,this._left=t,this._top=e,this._createDOMElement()}getDOMElment(){return this._cursorElement}_createDOMElement(){this._cursorElement=(0,s.createDiv)(n.EDITOR_CURSOR_CSS_CLASS+" "+n.EDITOR_CURSOR_ANIMATED_CSS_CLASS),this._cursorElement.style.top=(0,s.px)(this._top),this._cursorElement.style.left=(0,s.px)(this._left)}}},285:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(183),s=i(781),o=i(555),r=i(528),l=i(556);class h extends n.EventEmitter{constructor(t,e){super(),this._editor=null,this._view=null,this._mountPoint=null,this._gutterContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._totalLinesCount=50,this._gutterWidth=50,this._editor=t,this._view=e,this._mountPoint=e.getDOMElement(),this._createGutterContainer(),this._initEventListeners()}update(){this._renderLinesNumbers()}setWidth(t){this._gutterWidth=t}setWidthForLinesCount(t){if(null===this._gutterContainer)return this._gutterWidth;const e=t.toString().length;let i=10*e;return i<50&&(i=50),this._gutterWidth!==i&&(this._gutterWidth=10*e,this._gutterContainer.style.width=(0,o.px)(this._gutterWidth)),this.emit(r.EvGutter.Width,{width:this._gutterWidth}),this._gutterWidth}setFirstVisibleLine(t){this._firstVisibleLine=t}setVisibleLinesCount(t){this._visibleLinesCount=t}setTotalLinesCount(t){this._totalLinesCount=t}_initEventListeners(){null!==this._view&&(this._view.on(r.EvScroll.Changed,(t=>{this.setFirstVisibleLine(t.firstVisibleLine),this.update()})),this._view.on(r.EvTheme.Changed,(t=>{if(null!==this._gutterContainer)switch(t.theme){case l.Theme.Dark:this._gutterContainer.className="nc-editor__gutter nc-editor__gutter--dark";break;case l.Theme.Default:this._gutterContainer.className="nc-editor__gutter nc-editor__gutter--default";break;case l.Theme.Light:this._gutterContainer.className="nc-editor__gutter nc-editor__gutter--light"}})),null!==this._editor&&this._editor.on(s.EvDocument.LinesCount,(t=>{this.setTotalLinesCount(t.linesCount),this.setWidthForLinesCount(t.linesCount),this.update()})))}_createGutterContainer(){null!==this._mountPoint&&(this._gutterContainer=(0,o.createDiv)("nc-editor__gutter"),this._mountPoint.appendChild(this._gutterContainer),this._gutterContainer.style.gridArea="1/1/2/2",this._gutterContainer.style.width="100%",this._gutterContainer.style.height="100%")}_renderLinesNumbers(){if(null===this._gutterContainer)return;const t=[];for(let e=0;e<this._visibleLinesCount&&!(e+this._firstVisibleLine>this._totalLinesCount-1);e++){const i=(0,o.createDiv)("nc-gutter__number");i.innerText=`${e+this._firstVisibleLine+1}`,t.push(i)}this._gutterContainer.replaceChildren(...t)}}e.default=h},805:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(914),s=i(555),o=i(528);e.default=class{constructor(t,e){this._domElement=null,this._editor=null,this._view=null,this._isCtrlHold=!1,this._isShiftHold=!1,this._editor=t,this._view=e,this._domElement=(0,s.createTextArea)(n.EDITOR_INPUT_CLASS),this._domElement.id=n.EDITOR_INPUT_ID,this._domElement.autofocus=!0,this._initEventListeners()}focus(){var t;null===(t=this._domElement)||void 0===t||t.focus()}render(t){this._domElement&&t.appendChild(this._domElement)}_initEventListeners(){this._domElement&&(this._domElement.addEventListener("input",(()=>this._onInput())),this._domElement.addEventListener("keydown",(t=>this._onKeyDown(t)))),this._view&&(this._view.on(o.EvFocus.Changed,(t=>{t.focused&&this.focus()})),this._view.on(o.EvKey.CtrlDown,(()=>{this._isCtrlHold=!0})),this._view.on(o.EvKey.CtrlUp,(()=>{this._isCtrlHold=!1})),this._view.on(o.EvKey.ShiftDown,(()=>{this._isShiftHold=!0})),this._view.on(o.EvKey.ShiftUp,(()=>{this._isShiftHold=!1})))}_onInput(){null!==this._editor&&null!==this._domElement&&0!==this._domElement.value.length&&(this._editor.insert(this._domElement.value),this._domElement.value="")}_onKeyDown(t){if(null!==this._editor)switch(t.key){case"Backspace":this._isCtrlHold||this._editor.remove();break;case"Delete":this._isCtrlHold||this._editor.remove(1);break;case"Tab":this._isShiftHold||1===this._editor.getSelectedLinesCount()&&this._editor.insert("\t")}}}},209:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(914),s=i(555);e.default=class{constructor(t,e=!1){this._text="",this._isActive=!1,this._isHovered=!1,this._domElement=null,this._tokens=[],this._text=t.rawText,this._tokens=t.tokens,this._domElement=(0,s.createNodeFromTemplate)(`<div class="${n.EDITOR_MULTI_LINE_CSS_CLASS}">\n\t\t\t<div class="${n.EDITOR_MULTI_LINE_CONTENT_CSS_CLASS}">\n\t\t\t  ${this._text||"<br />"}\n\t\t\t</div>\n\t\t</div>`),this._domElement.style.height="20px",this.setActive(e),this._renderTokens()}getNode(){return this._domElement}setData(t){t.rawText===this._text&&this._tokens.length>0||(this._text=t.rawText,this._tokens=t.tokens,this._renderTokens())}_renderTokens(){const t=this._domElement;if(null===t.firstElementChild)return;if(0===this._tokens.length)return void(t.firstElementChild.textContent=this._text);const e=[];for(let t=0;t<this._tokens.length;t++){const i=this._tokens[t],n=(0,s.createElement)("span");n.className=i.type.toString();const o=i.startIndex,r=t+1<this._tokens.length?this._tokens[t+1].startIndex:this._text.length;n.textContent=this._text.substring(o,r),e.push(n)}t.firstElementChild.replaceChildren(...e)}setText(t){if(t===this._text)return;this._text=t;const e=this._domElement;null!==e.firstElementChild&&(e.firstElementChild.textContent=t)}setActive(t){if(t===this._isActive)return;this._isActive=t;const e=this._domElement;t?e.classList.add(n.EDITOR_MULTI_LINE_ACTIVE_CSS_CLASS):e.classList.remove(n.EDITOR_MULTI_LINE_ACTIVE_CSS_CLASS)}setHover(t){if(t===this._isHovered)return;this._isHovered=t;const e=this._domElement;t?e.classList.add(n.EDITOR_MULTI_LINE_HOVERED_CSS_CLASS):e.classList.remove(n.EDITOR_MULTI_LINE_HOVERED_CSS_CLASS)}}},168:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(555),s=i(183),o=i(528),r=i(781),l=i(914);class h extends s.EventEmitter{constructor(t,e){super(),this._editor=null,this._view=null,this._mountPoint=null,this._emitterName="scroll-bar",this._scrollBarContainer=null,this._scrollableDiv=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._totalLinesCount=50,this._maxLinesPadding=10,this._scale=20,this._editor=t,this._view=e,this._mountPoint=e.getDOMElement(),this._createScrollContainer(),this._initEventListeners()}update(){this._updateScrollPosition()}setTotalLinesCount(t){if(this._totalLinesCount=t,this._updateScale(),this._scrollableDiv){let e=(t+this._maxLinesPadding)*this._scale;this._totalLinesCount>l.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE&&(e*=1.01),this._scrollableDiv.style.height=(0,n.px)(e)}}setFirstVisibleLine(t){this._firstVisibleLine=t}setVisibleLinesCount(t){this._visibleLinesCount=t}setMaxLinesPadding(t){this._maxLinesPadding=t}_createScrollContainer(){null!==this._mountPoint&&(this._scrollBarContainer=(0,n.createDiv)("nc-editor__scroll-bar"),this._scrollableDiv=(0,n.createDiv)("nc-scroll__scrollable"),this._scrollBarContainer.appendChild(this._scrollableDiv),this._mountPoint.appendChild(this._scrollBarContainer),this._scrollBarContainer.style.gridArea="1/3/2/4",this._scrollBarContainer.style.width="100%",this._scrollBarContainer.style.height="100%",this._scrollBarContainer.style.maxHeight="100%",this._scrollableDiv.style.width="15px")}_updateScrollPosition(){null!==this._scrollBarContainer&&(this._scrollBarContainer.scrollTop=this._firstVisibleLine*this._scale)}_initEventListeners(){this._scrollBarContainer&&this._scrollBarContainer.addEventListener("scroll",(()=>{this._onScroll()})),this._view&&this._view.on(o.EvScroll.Changed,(t=>{t.emitterName!==this._emitterName&&(this.setFirstVisibleLine(t.firstVisibleLine),this.update())})),this._editor&&this._editor.on(r.EvDocument.LinesCount,(t=>{this.setTotalLinesCount(t.linesCount)}))}_onScroll(){if(null===this._scrollBarContainer)return;const t=Math.ceil(this._scrollBarContainer.scrollTop/this._scale);t!==this._firstVisibleLine&&(this._firstVisibleLine=t,this.emit(o.EvScroll.Changed,{firstVisibleLine:t,emitterName:this._emitterName}))}_updateScale(){this._totalLinesCount>l.MAX_LINES_COUNT_ON_DEFAULT_SCROLL_SCALE?this._scale=.1:this._scale=20}}e.default=h},757:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(924),s=i(914),o=i(555);e.default=class{constructor(t){this._domElements=[],this._selection=t}setSelection(t){this._selection=t}render(t,e,i,r){var l,h;if(this._selection.isCollapsed)return[];const a=i.map((t=>t.rawText.length)),_=Math.max(this._selection.start.line,t)-t,c=Math.min(this._selection.end.line+1,t+e)-t,u=c-_;u!==this._domElements.length&&(this._domElements=[]);for(let e=_;e<c;e++){const c=null!==(h=null===(l=i[e])||void 0===l?void 0:l.rawText)&&void 0!==h?h:"";let d=0,f=(0,n.offsetToColumn)(c,a[e]);e===this._selection.start.line-t&&(d=(0,n.offsetToColumn)(c,this._selection.start.offset)),e===this._selection.end.line-t&&(f=(0,n.offsetToColumn)(c,this._selection.end.offset));const m=(0,o.px)(d*r),p=(0,o.px)(20*e),v=(0,o.px)((f-d)*r||r),g=(0,o.px)(20);if(u===this._domElements.length){const t=e-_;this._domElements[t].style.left=m,this._domElements[t].style.top=p,this._domElements[t].style.width=v,this._domElements[t].style.height=g}else{const t=(0,o.createDiv)(s.EDITOR_SELECTION_RANGE_CSS_CLASS);t.style.left=m,t.style.top=p,t.style.width=v,t.style.height=g,this._domElements.push(t)}}return this._domElements}}},551:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(781),o=i(729),r=i(924),l=i(914),h=i(555),a=n(i(509)),_=n(i(757)),c=i(528);e.default=class{constructor(t,e){this._editor=null,this._view=null,this._mountPoint=null,this._selectionContainer=null,this._firstVisibleLine=0,this._visibleLinesCount=20,this._lineHeight=20,this._letterWidth=0,this._visibleSelections=[],this._isMouseHold=!1,this._isCtrlHold=!1,this._isShitHold=!1,this._editor=t,this._view=e,this._mountPoint=e.getDOMElement(),this._crateSelctionContainer(),this._initEventListeners()}setFirstVisibleLine(t){this._firstVisibleLine=t}setVisibleLinesCount(t){this._visibleLinesCount=t}update(){if(this._selectionContainer){const t=this._renderSelections(),e=this._renderCursors();this._selectionContainer.replaceChildren(...t,...e)}}_crateSelctionContainer(){null!==this._mountPoint&&(this._selectionContainer=(0,h.createDiv)(l.EDITOR_SELECTION_CSS_CLASS),this._mountPoint.appendChild(this._selectionContainer),this._selectionContainer.style.gridArea="1/2/2/3",this._selectionContainer.style.position="relative",this._selectionContainer.style.zIndex="4",this._selectionContainer.style.marginLeft="1em")}_initEventListeners(){this._view&&(this._view.on(c.EvScroll.Changed,(t=>{this.setFirstVisibleLine(t.firstVisibleLine),this.update()})),this._view.on(c.EvFont.LetterWidth,(t=>{this._letterWidth=t.width,this.update()})),this._view.on(c.EvKey.CtrlDown,(()=>{this._isCtrlHold=!0})),this._view.on(c.EvKey.CtrlUp,(()=>{this._isCtrlHold=!1})),this._view.on(c.EvKey.ShiftDown,(()=>{this._isShitHold=!0})),this._view.on(c.EvKey.ShiftUp,(()=>{this._isShitHold=!1}))),this._editor&&this._editor.on(s.EvSelection.Changed,(()=>{this.update()})),this._selectionContainer&&(this._selectionContainer.addEventListener("mousedown",(t=>this._onMouseDown(t))),this._selectionContainer.addEventListener("mouseup",(()=>this._onMouseUp())),this._selectionContainer.addEventListener("mousemove",(t=>this._onMouseMove(t))),this._selectionContainer.addEventListener("dblclick",(t=>this._onDoubleClick(t))))}_renderSelections(){if(null===this._editor||null===this._selectionContainer)return[];const t=this._editor.getSelctions(),e=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),i=[];if(t.length===this._visibleSelections.length)for(let n=0;n<t.length;n++)this._visibleSelections[n].setSelection(t[n]),i.push(...this._visibleSelections[n].render(this._firstVisibleLine,this._visibleLinesCount,e,this._letterWidth));else{this._visibleSelections=[];for(let n=0;n<t.length;n++){const s=new _.default(t[n]);this._visibleSelections.push(s),i.push(...this._visibleSelections[n].render(this._firstVisibleLine,this._visibleLinesCount,e,this._letterWidth))}}return i}_renderCursors(){if(null===this._editor||null===this._selectionContainer)return[];const t=this._editor.getSelctions(),e=this._editor.getLines(this._firstVisibleLine,this._visibleLinesCount),i=[];for(const n of t){const t=n.end.line-this._firstVisibleLine;if(t>=e.length||t<0)continue;const s=e[t],o=(0,r.offsetToColumn)(s.rawText,n.end.offset)*this._letterWidth,l=t*this._lineHeight,h=new a.default(o,l).getDOMElment();h&&i.push(h)}return i}_onMouseDown(t){if(this._isMouseHold=!0,null===this._editor)return;const e=t.target.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top;let s=Math.floor(n/this._lineHeight)+this._firstVisibleLine;const l=this._editor.getLines(s,1);let h=0;if(0===l.length){const t=this._editor.getLastLine();if(null===t)return;h=(0,r.columnToOffset)(t.rawText,1/0),s=this._editor.getTotalLinesCount()-1}else{const t=l[0],e=Math.round(i/this._letterWidth);h=(0,r.columnToOffset)(t.rawText,e)}this._isShitHold?this._editor.extendLastSelection(new o.Point(s,h)):this._isCtrlHold?this._editor.addSelection(new o.Selection(s,h,s,h)):this._editor.setSelection(new o.Selection(s,h,s,h))}_onMouseUp(){this._isMouseHold=!1}_onMouseMove(t){if(this._isMouseHold&&this._editor){const e=t.target.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top,s=Math.floor(n/this._lineHeight)+this._firstVisibleLine,l=this._editor.getLines(s,1);if(0===l.length){const t=this._editor.getLastLine();if(null===t)return;const e=(0,r.columnToOffset)(t.rawText,1/0),i=this._editor.getTotalLinesCount()-1;this._editor.extendLastSelection(new o.Point(i,e))}else{const t=l[0],e=Math.round(i/this._letterWidth),n=(0,r.columnToOffset)(t.rawText,e);this._editor.extendLastSelection(new o.Point(s,n))}}}_onDoubleClick(t){if(null===this._editor)return;const e=t.target.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top;let s=Math.floor(n/this._lineHeight)+this._firstVisibleLine;const l=this._editor.getLines(s,1);let h=0;if(0===l.length){const t=this._editor.getLastLine();if(null===t)return;h=(0,r.columnToOffset)(t.rawText,1/0),s=this._editor.getTotalLinesCount()-1}else{const t=l[0],e=Math.round(i/this._letterWidth);h=(0,r.columnToOffset)(t.rawText,e)}this._isShitHold||this._editor.selectWordAt(new o.Point(s,h),this._isCtrlHold)}}},248:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(183),o=n(i(164)),r=n(i(285)),l=n(i(168)),h=n(i(551)),a=n(i(805)),_=i(555),c=i(556),u=i(528),d=i(781),f=i(914);class m extends s.EventEmitter{constructor(t,e){super(),this._editor=null,this._mountPoint=null,this._editorContainer=null,this._emitterName="editor-view",this._textLayer=null,this._gutter=null,this._scrollBar=null,this._selectionLayer=null,this._input=null,this._firstVisibleLine=0,this._visibleLinesCount=0,this._scrollHeight=0,this._scrollWidth=0,this._scrollLeft=0,this._scrollbarWidth=15,this._gutterWidth=50,this._isFocused=!1,this._height=0,this._width=0,this._lineHeight=20,this._fontSize=12,this._fontFamily=f.EDITOR_FONT_FAMILY,this._letterWidth=8,this._hoverLineNumber=-1,this._activeLineNumber=-1,this._isCtrlHold=!1,this._isShitHold=!1,this._isLeftAltHold=!1,this._isRightAltHold=!1,this._theme=c.Theme.Default,this._editor=t,this.mount(e),this._editor.addView(this),this._textLayer=new o.default(t,this),this._selectionLayer=new h.default(t,this),this._gutter=new r.default(t,this),this._scrollBar=new l.default(t,this),this._input=new a.default(t,this),this._scrollBarInitialConfig(),this._initEventListeners(),this._createInputElement(),this._scrollToLine(0,this._emitterName),this.setTheme(c.Theme.Default),this._textLayer.measureLetterWidth(),this._emitInitEvent()}mount(t){if("string"==typeof t){const e=document.getElementById(t);if(null===e)throw new Error(`Element with id="${t}" does not exist.`);this._mountPoint=e}else typeof t===HTMLElement.toString()&&(this._mountPoint=t);return this._createEditorContainer(),this._updateEditorSize(),this._createInputElement(),this.setTheme(c.DEFAULT_THEME),0}unmount(){this._mountPoint&&(this._mountPoint.textContent="")}setTheme(t){const e=t;let i=!1;for(const t of c.VALID_THEMES)if(t===e&&t.length===e.length){i=!0;break}if(!i)throw new Error("Invalid theme name");if(this._theme=e,null===this._editorContainer)return 1;for(const t of c.VALID_THEMES)this._editorContainer.classList.remove(c.BASE_THEME_CLASS+t);return this._editorContainer.classList.add(c.BASE_THEME_CLASS+e),this.emit(u.EvTheme.Changed,{theme:this._theme}),0}update(){this._updateEditorSize()}getDOMElement(){return this._editorContainer}_emitInitEvent(){this.emit(u.EvView.Initialized,void 0)}_scrollBarInitialConfig(){this._scrollBar&&this._scrollBar.setMaxLinesPadding(10)}_createEditorContainer(){null!==this._mountPoint&&(this._editorContainer=(0,_.createDiv)("nc-editor"),this._mountPoint.appendChild(this._editorContainer),this._editorContainer.style.fontFamily=this._fontFamily,this._editorContainer.style.fontSize=(0,_.px)(this._fontSize),this._editorContainer.style.lineHeight=(0,_.px)(this._lineHeight),this._updateGridLayout())}_updateGridLayout(){this._editorContainer&&(this._editorContainer.style.gridTemplate=`100% / ${(0,_.px)(this._gutterWidth)} 1fr ${(0,_.px)(this._scrollbarWidth)}`)}_createInputElement(){this._editorContainer&&this._input&&this._input.render(this._editorContainer)}_updateEditorSize(){null!==this._editorContainer&&(this._height=this._editorContainer.clientHeight,this._width=this._editorContainer.clientWidth,this._visibleLinesCount=Math.ceil(this._height/this._lineHeight),this._gutter&&this._gutter.setVisibleLinesCount(this._visibleLinesCount),this._textLayer&&this._textLayer.setVisibleLinesCount(this._visibleLinesCount),this._scrollBar&&this._scrollBar.setVisibleLinesCount(this._visibleLinesCount),this._selectionLayer&&this._selectionLayer.setVisibleLinesCount(this._visibleLinesCount))}_initEventListeners(){window.addEventListener("resize",(()=>this._onResize())),document.addEventListener("click",(t=>this._onDocumentClick(t))),this._editorContainer&&(this._editorContainer.addEventListener("mousewheel",(t=>this._onMouseWheel(t))),this._editorContainer.addEventListener("click",(()=>this._onMouseDown())),this._editorContainer.addEventListener("blur",(()=>this._onBlur())),this._editorContainer.addEventListener("keydown",(t=>this._onKeyDown(t))),this._editorContainer.addEventListener("keyup",(t=>this._onKeyUp(t)))),this._editor&&(this._editor.on(d.EvDocument.Edited,(()=>{this.update()})),this._editor.on(d.EvDocument.Set,(()=>{this.update()})),this._editor.on(d.EvTokenizer.Finished,(()=>{this.update()}))),this._scrollBar&&this._scrollBar.on(u.EvScroll.Changed,(t=>{this._scrollToLine(t.firstVisibleLine,t.emitterName)})),this._textLayer&&this._textLayer.on(u.EvFont.LetterWidth,(t=>{this._letterWidth=t.width,this.emit(u.EvFont.LetterWidth,{width:t.width})})),this._gutter&&this._gutter.on(u.EvGutter.Width,(t=>{this._gutterWidth=t.width,this._updateGridLayout()}))}_onResize(){this._updateEditorSize(),this.update()}_onMouseWheel(t){const e=t.deltaY/Math.abs(t.deltaY)*3;this._scrollToLine(this._firstVisibleLine+e,this._emitterName),t.preventDefault(),t.stopPropagation()}_onMouseDown(){this._setFocus(!0)}_onBlur(){this._setFocus(!1),this.update()}_onKeyDown(t){switch(t.code){case"ControlLeft":this._isCtrlHold=!0,this.emit(u.EvKey.CtrlDown,void 0);break;case"ShiftLeft":this._isShitHold=!0,this.emit(u.EvKey.ShiftDown,void 0);break;case"AltLeft":this._isLeftAltHold=!0,this.emit(u.EvKey.AltDown,void 0);break;case"AltRight":this._isRightAltHold=!0;break;case"KeyA":this._editor&&this._isCtrlHold&&!this._isRightAltHold&&this._editor.selectAll();break;case"ArrowUp":if(null===this._editor)return;this._isLeftAltHold?this._editor.swapLinesUp():this._editor.collapseSelectionToTop();break;case"ArrowDown":if(null===this._editor)return;this._isLeftAltHold?this._editor.swapLinesDown():this._editor.collapseSelectionToBottom();break;case"ArrowLeft":if(null===this._editor)return;this._isShitHold&&this._isCtrlHold?this._editor.selectWordBefore():this._isCtrlHold?this._editor.moveSelectionWordBefore():this._editor.collapseSelectionToLeft();break;case"ArrowRight":if(null===this._editor)return;this._isShitHold&&this._isCtrlHold?this._editor.selectWordAfter():this._isCtrlHold?this._editor.moveSelectionWordAfter():this._editor.collapseSelectionToRight();break;case"Backspace":this._editor&&this._isCtrlHold&&this._editor.removeWordBefore();break;case"Delete":this._editor&&this._isCtrlHold&&this._editor.removeWordAfter();break;case"Tab":if(!this._editor)return;this._isShitHold?this._editor.removeIndentFromSelectedLines():this._editor.indentSelectedLines(),t.stopPropagation(),t.preventDefault()}}_onKeyUp(t){switch(t.code){case"ControlLeft":this._isCtrlHold=!1,this.emit(u.EvKey.CtrlUp,void 0);break;case"ShiftLeft":this._isShitHold=!1,this.emit(u.EvKey.ShiftUp,void 0);break;case"AltLeft":this._isLeftAltHold=!1,this.emit(u.EvKey.AltUp,void 0);break;case"AltRight":this._isRightAltHold=!1}}_onDocumentClick(t){const e=t.target;(0,_.isChildOf)(this._editorContainer,e)?(this._setFocus(!0),this.update()):(this._setFocus(!1),this.update())}scrollToLine(t){this._scrollToLine(t,this._emitterName)}_setFocus(t){this._isFocused=t,this.emit(u.EvFocus.Changed,{focused:t})}_scrollToLine(t,e=this._emitterName){if(null===this._editor)return;let i=this._editor.getTotalLinesCount();i=i<0?0:i,t<0||i-this._visibleLinesCount<0?this._firstVisibleLine=0:t>i-this._visibleLinesCount+10?this._firstVisibleLine=i-this._visibleLinesCount+10:this._firstVisibleLine=t,this.emit(u.EvScroll.Changed,{firstVisibleLine:this._firstVisibleLine,emitterName:e}),this.update()}}e.default=m},528:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.EvKey=e.EvGutter=e.EvFont=e.EvTheme=e.EvFocus=e.EvScroll=e.EvView=void 0,(e.EvView||(e.EvView={})).Initialized="view.Initialized",(e.EvScroll||(e.EvScroll={})).Changed="scroll.Changed",(e.EvFocus||(e.EvFocus={})).Changed="focus.Changed",(e.EvTheme||(e.EvTheme={})).Changed="theme.Changed",(e.EvFont||(e.EvFont={})).LetterWidth="font.LetterWidthChange",(e.EvGutter||(e.EvGutter={})).Width="gutter.WidthChanged",(i=e.EvKey||(e.EvKey={})).CtrlDown="key.Ctrl.down",i.CtrlUp="key.Ctrl.up",i.ShiftDown="key.Shift.down",i.ShiftUp="key.Shift.up",i.AltDown="key.Alt.down",i.AltUp="key.Alt.up"},637:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EditorView=void 0;const s=n(i(248));e.EditorView=s.default},556:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_THEME=e.Theme=e.BASE_THEME_CLASS=e.VALID_THEMES=void 0,e.VALID_THEMES=["default","light","dark"],e.BASE_THEME_CLASS="nc-theme--",(i=e.Theme||(e.Theme={})).Default="default",i.Light="light",i.Dark="dark",e.DEFAULT_THEME="default"},593:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notEmpty=void 0,e.notEmpty=function(t){return null!=t}}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={id:n,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nc=void 0;var n={};(()=>{var t=n;Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=t.EditorView=t.Editor=t.Range=t.Document=void 0;const e=i(117);Object.defineProperty(t,"Document",{enumerable:!0,get:function(){return e.Document}});const s=i(729);Object.defineProperty(t,"Range",{enumerable:!0,get:function(){return s.Range}}),Object.defineProperty(t,"Selection",{enumerable:!0,get:function(){return s.Selection}});const o=i(708);Object.defineProperty(t,"Editor",{enumerable:!0,get:function(){return o.Editor}});const r=i(637);Object.defineProperty(t,"EditorView",{enumerable:!0,get:function(){return r.EditorView}}),i(545)})(),nc=n})();